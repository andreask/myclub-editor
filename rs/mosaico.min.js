!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Mosaico=e()}}(function(){return function r(a,l,s){function d(t,e){if(!l[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=l[t]={exports:{}};a[t][0].call(i.exports,function(e){return d(a[t][1][e]||e)},i,i.exports,r,a,l,s)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)d(s[e]);return d}({1:[function(e,t,n){var o=e("../src/js/bindings/choose-template.js");document.addEventListener("DOMContentLoaded",function(e){o.addTemplate("array","\x3c!-- ko foreach: $data --\x3e\x3c!-- ko block: $data --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("block-show","\x3c!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("block-wysiwyg",'<div class="editable block" data-drop-content="Drop here" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data">  <div class="mo-blockselectionhelper"></div>  <div class="tools" data-bind="tooltips: {}">    \x3c!-- ko if: typeof $index != \'undefined\' --\x3e    <div title="Drag this handle to move the block" data-bind="attr: { title: $root.t(\'Drag this handle to move the block\') }" class="tool handle"><i class="fa fa-fw fa-sort"></i></div>    \x3c!-- ko if: $index() > 0 --\x3e    <div title="Move this block upside" data-bind="attr: { title: $root.t(\'Move this block upside\') }" class="tool moveup"><i class="fa fa-fw fa-sort-asc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, true)\'></i></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $index() < $parent.blocks().length -1 --\x3e    <div title="Move this block downside" data-bind="attr: { title: $root.t(\'Move this block downside\') }" class="tool movedown"><i class="fa fa-fw fa-sort-desc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, false)\'></i></div>    \x3c!-- /ko --\x3e    <div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i class="fa fa-fw fa-trash-o"></i></div>    <div title="Duplicate block" class="tool clone" data-bind="attr: { title: $root.t(\'Duplicate block\') }, click: $root.duplicateBlock.bind($element, $index, $parent)"><i class="fa fa-fw fa-files-o"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $data._nextVariant != \'undefined\' --\x3e<div title="Switch block variant" class="tool variant" data-bind="attr: { title: $root.t(\'Switch block variant\') }, click: $data._nextVariant"><i class="fa fa-fw fa-magic"></i></div>\x3c!-- /ko --\x3e  </div>  \x3c!-- ko block: $data --\x3e\x3c!-- /ko --\x3e</div>'),o.addTemplate("blocks-show","\x3c!-- ko template: { name: 'block-show', foreach: blocks } --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("blocks-wysiwyg","<div class=\"sortable-blocks-edit\" data-drop-content=\"Drop here\" data-empty-content=\"Drop here blocks from the Blocks tab\" data-bind=\"attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\"></div>"),o.addTemplate("customstyle",'<div class="customStyleHelp" data-bind="html: $root.t(\'Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=&quot;customStyled&quot;><span>&quot;small cube&quot; </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul>\')">Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class="customStyled"><span>"small cube" </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul></div>'),o.addTemplate("empty",""),o.addTemplate("error",'[<div style="background-color: #fff0f0" data-bind="text: ko.toJS($data)"></div>]'),o.addTemplate("gallery-images",'<div data-bind="foreach: items.currentPageData">  <div class="draggable-item" data-bind="if: typeof thumbnailUrl != \'undefined\'">    <div class="draggable image" data-bind="click: $root.addImage, extdraggable: { data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.draggingImage, \'options\': { \'appendTo\': \'#page\' } }, style: { backgroundImage: \'url(\\\'\' + thumbnailUrl + \'\\\')\' }">      <img title="Drag this image and drop it on any template image placeholder" style="display: block;" data-bind="tooltips: {}, attr: { src: thumbnailUrl, \'title\': $root.t(\'Drag this image and drop it on any template image placeholder\') }"/>    </div>  </div></div>\x3c!-- ko if: items.pageCount() > 1 --\x3e<div class="galleryPager" data-bind="buttonset: {}">  <a href="javascript:void(0)" data-bind="click: items.moveFirst, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-fast-backward\' }, text: false }">First</a>  <a href="javascript:void(0)" data-bind="click: items.movePrevious, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-backward\' }, text: false }">Previous</a>  <span data-bind="button: { disabled: true, text: true, label: \' \'+$root.t(\'__current__ of __total__\', { current: items.currentPage(), total: items.pageCount() })+\' \' }"> X of Y </span>  <a href="javascript:void(0)" data-bind="click: items.moveNext, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-forward\' }, text: false }">Next</a>  <a href="javascript:void(0)" data-bind="click: items.moveLast, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-fast-forward\' }, text: false }">Last</a></div>\x3c!-- /ko --\x3e'),o.addTemplate("img-wysiwyg",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, extdroppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { \'data-drop-content\': $root.t(\'Drop here\'), width: _width, height: _height, align: _align }"  class="img-wysiwyg selectable-img"><tr><td class="uploadzone" data-bind="attr: { width: _width, height: _height }">  <div class="mo-imgselectionhelper"></div>  <div class="mo-uploadzone"></div>  <div class="img-size" data-bind="text: _width && _height ? ko.utils.unwrapObservable(_width)+\'x\'+ko.utils.unwrapObservable(_height) : _width ? \'w\'+ko.utils.unwrapObservable(_width) : \'h\'+ko.utils.unwrapObservable(_height)">size</div>  <div class="midtools" data-bind="tooltips: {}">    \x3c!-- ko if: _src() != \'\' --\x3e    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i class="fa fa-fw fa-trash-o"></i></div>    \x3c!-- ko if: typeof $root.editImage !== \'undefined\' --\x3e    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i class="fa fa-fw fa-pencil"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e    \x3c!-- ko if: _src() == \'\' --\x3e    <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>      <input class="fileupload nofile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    </div>    \x3c!-- ko if: typeof $root.selectImage !== \'undefined\' --\x3e    <div title="Select from gallery" class="tool gallery" data-bind="attr: { title: $root.t(\'Select from gallery\') }, click: $root.selectImage.bind($element, _src), clickBubble: true"><i class="fa fa-fw fa-picture-o"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e  </div>  \x3c!-- ko template: _template --\x3e\x3c!-- /ko --\x3e  \x3c!-- ko if: _src() == \'\' --\x3e    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop an image here</span></span>  \x3c!-- /ko --\x3e  \x3c!-- pulsante per la cancellazione --\x3e  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">    \x3c!-- ko if: _src.preloaded && _src() != _src.preloaded() --\x3ePRELOADING....\x3c!-- /ko --\x3e    \x3c!-- ko if: _src() != \'\' --\x3e      <input class="fileupload withfile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    \x3c!-- /ko --\x3e    <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">      <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>    </div>  </div></table>'),o.addTemplate("main",'<div id="page" style="display: none;" data-bind="visible: true, css: { withToolbox: $root.showToolbox, withPreviewFrame: showPreviewFrame }">  <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">    \x3c!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } --\x3e    <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content"></div>    \x3c!-- /ko --\x3e  </div>  <div id="toolbar" class="mo" data-bind="tooltips: {}">    \x3c!-- ko if: typeof $root.undo != \'undefined\' --\x3e    <span data-bind="buttonset: { }" class="leftButtons">    <a title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'fa fa-reply\' }, label: $root.undo.name, text: true }">UNDO</a>    <a title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'fa fa-share\' }, label: $root.redo.name, text: true }">REDO</a>    </span>    \x3c!-- ko if: $root.debug --\x3e    <a href="javascript:void(0)" data-bind="click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: \'reset\', text: true }">RESET</a>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e    <span>    <input id="showGallery" type="checkbox" data-bind="checked: $root.showGallery, button: { refreshOn: $root.showGallery,     icons: { primary: \'fa fa-fw fa-picture-o\', secondary: null }, text: true, label: $root.t(\'Gallery\') }"><label title="Show image gallery" for="showGallery" data-bind="attr: { title: $root.t(\'Show image gallery\') }">show gallery</label></input>    </span>    <input id="previewFrameToggle" type="checkbox" data-bind="checked: $root.showPreviewFrame, button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-tablet\', secondary: null }, text: false, label: $root.t(\'Preview\') }"><label title="Show live preview" for="previewFrameToggle" data-bind="attr: { title: $root.t(\'Show live preview\') }">PREVIEW</label></input>    \x3c!-- ko if: $root.debug --\x3e    <a href="javascript:void(0)" data-bind="click: $root.export, clickBubble: false, button: { label: \'export\', text: true }">EXPORT</a>    <input type="checkbox" data-bind="checked: $root.debug" /> debug    <a href="javascript:void(0)" data-bind="click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: \'fa fa-fw fa-upload\' }, label: \'Default\', text: true }">LOAD BLOCKS</a>    [<a id="subscriptionsCount" href="javascript:viewModel.loopSubscriptionsCount()">subs</a>]    \x3c!-- /ko --\x3e    <span data-bind="visible: false">    <input type="checkbox" data-bind="checked: $root.showToolbox" /> toolbox    </span>    <div class="rightButtons">    \x3c!-- ko if: typeof $root.save !== \'undefined\' --\x3e    <a title="Save template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Save template\') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: \'fa fa-fw fa-cloud-upload\' }, label: $root.t($root.save.name), text: true }">SALVA</a>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $root.test !== \'undefined\' --\x3e    <a title="Show preview and send test" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show preview and send test\') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: \'fa fa-fw fa-paper-plane\' }, label: $root.t($root.test.name), text: true }">TEST</a>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $root.download !== \'undefined\' --\x3e    <form id="downloadForm" action="#" method="POST">    <input type="hidden" name="action" value="download" />    <input type="hidden" name="filename" value="email.html" />    <input type="hidden" name="html" id="downloadHtmlTextarea" />    <a title="Download template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Download template\') }, click: $root.download.execute, clickBubble: false, button: { disabled: !$root.download.enabled(), icons: { primary: \'fa fa-fw fa-download\' }, label: $root.t($root.download.name), text: true }">DOWNLOAD</a>    </form>    \x3c!-- /ko --\x3e    </div>  </div>  \x3c!-- ko if: $root.showToolbox --\x3e  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  \x3c!-- /ko --\x3e    <div id="main-preview" class="mo" data-bind="scrollable: true, if: $root.showPreviewFrame">    <div id="preview-toolbar">      <div data-bind="visible: $root.showPreviewFrame, buttonset: { }" style="display: inline-block">        <input id="previewLarge" type="radio" name="previewMode" value="large" data-bind="checked: $root.previewMode, button: { text: false, label: \'large\', icons: { primary: \'fa fa-fw fa-desktop\' } }" />        <label for="previewLarge" title="Large screen" data-bind="attr: { title: $root.t(\'Large screen\') }">Large screen</label>        <input id="previewDesktop" type="radio" name="previewMode" value="desktop" data-bind="checked: $root.previewMode, button: { text: false, label: \'desktop\', icons: { primary: \'fa fa-fw fa-tablet\' } }" />        <label for="previewDesktop" title="Tablet" data-bind="attr: { title: $root.t(\'Tablet\') }">Tablet</label>        <input id="previewMobile" type="radio" name="previewMode" value="mobile" data-bind="checked: $root.previewMode, button: { text: false, label: \'mobile\', icons: { primary: \'fa fa-fw fa-mobile\' } }" />        <label for="previewMobile" title="Smartphone" data-bind="attr: { title: $root.t(\'Smartphone\') }">Smartphone</label>      </div>    </div>    <div id="frame-container" data-bind="css: { desktop: $root.previewMode() == \'desktop\', mobile: $root.previewMode() == \'mobile\', large: $root.previewMode() == \'large\' }">      <iframe data-bind="bindIframe: $data"></iframe>    </div>  </div>  <div class="mo" id="mo-body"></div>  <div id="incompatible-template" title="Saved model is obsolete" style="display: none" data-bind="attr: { title: $root.t(\'Saved model is obsolete\') }, html: $root.t(\'<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>\')">    Incompatible template  </div>  <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div></div>\x3c!-- ko if: $root.logoPath --\x3e<div id="loading" class="loading" style="display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;" data-bind="attr: { style: \'position: absolute; top: 5px; left: 6px; z-index: 150;\'}, css: { loading: false }">  <a href="/" data-bind="attr: { href: $root.logoUrl, alt: $root.logoAlt }"><img data-bind="attr: { src: $root.logoPath }" width="32" height="32" alt="mosaico" border="0" /></a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div>\x3c!-- /ko --\x3e'),o.addTemplate("toolbox",'<div id="tooltabs" class="tabs_horizontal button_color" data-bind="tabs: { active: $root.selectedTool }">  <ul>    <li data-bind="tooltips: {}"><a title="Blocks ready to be added to the template" data-local="true" href="#toolblocks" data-bind="attr: { title: $root.t(\'Blocks ready to be added to the template\') }"><i class="fa fa-fw fa-cubes"></i> <span data-bind="html: $root.t(\'Blocks\')">Blocks</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit content options" href="#toolcontents" data-local="true" data-bind="attr: { title: $root.t(\'Edit content options\') }"><i class="fa fa-fw fa-pencil"></i> <span data-bind="html: $root.t(\'Content\')">Content</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit style options" href="#toolstyles" data-local="true" data-bind="attr: { title: $root.t(\'Edit style options\') }"><i class="fa fa-fw fa-paint-brush"></i> <span data-bind="html: $root.t(\'Style\')">Style</span></a></li>  </ul>  <div id="toolblocks" data-bind="scrollable: true">    <div class="block-list" data-bind="foreach: blockDefs" style="text-align: center">      <div class="draggable-item" data-bind="withProperties: { templateMode: \'show\' }">        <div class="block" data-bind="extdraggable: { connectClass: \'sortable-blocks-edit\', data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.dragging, \'options\': { handle: \'.handle\', distance: 10, \'appendTo\': \'#page\' } }, click: $root.addBlock" style="position: relative;">          <div title="Click or drag to add this block to the template" class="handle" data-bind="attr: { title: $root.t(\'Click or drag to add this block to the template\') }, tooltips: {}"></div>          <img data-bind="attr: { alt: $root.t(\'Block __name__\', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath(\'edres/\'+ko.utils.unwrapObservable(type)+\'.png\') }" alt="Block __name__" />        </div>        <a href="javascript:void(0)" class="addblockbutton" data-bind="click: $root.addBlock, button: { label: $root.t(\'Add\') }">Add</a>      </div>    </div>  </div>  <div id="toolcontents" data-bind="scrollable: true">    \x3c!-- ko if: $root.selectedBlock() !== null --\x3e    <div data-bind="block: $root.selectedBlock"></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $root.selectedBlock() == null --\x3e    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and content options, if any, will show here\')">By clicking on message parts you will select a block and content options, if any, will show here</div>    \x3c!-- /ko --\x3e    \x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e  </div>    <div id="toolstyles" data-bind="scrollable: true, withProperties: { templateMode: \'styler\' }">    \x3c!-- ko if: typeof $root.content().theme === \'undefined\' || typeof $root.content().theme().scheme === \'undefined\' || $root.content().theme().scheme() === \'custom\' --\x3e      \x3c!-- ko if: $root.selectedBlock() !== null --\x3e      <div data-bind="block: $root.selectedBlock, css: { workLocal: $root.selectedBlock().customStyle, workGlobal: typeof $root.selectedBlock().customStyle === \'undefined\' || !$root.selectedBlock().customStyle() }"></div>      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.selectedBlock() == null --\x3e      <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and style options, if available, will show here\')">By clicking on message parts you will select a block and style options, if available, will show here</div>      \x3c!-- /ko --\x3e      <div class="workGlobalContent">      \x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e      </div>    \x3c!-- /ko --\x3e  </div></div>        <div id="toolimages" class="slidebar" data-bind="scrollable: true, css: { hidden: $root.showGallery() === false }">  <div class="close" data-bind="click: $root.showGallery.bind($element, false);">X</div>  <span class="pane-title" data-bind="text: $root.t(\'Gallery:\')">Gallery:</span>  <div data-drop-content="Drop here" class="img-dropzone pane uploadzone" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }">  <div class="mo-uploadzone" style="position: relative; padding: 2em; border: 2px dotted #808080">     <input class="fileupload" type="file" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadImage }" style="z-index: 10; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">     <span data-bind="text: $root.t(\'Click or drag files here\')">Click or drag files here</span>     <div class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">       <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">         <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>       </div>     </div>  </div>  </div>  \x3c!-- ko if: $root.showGallery() --\x3e  <div id="toolimagestab" class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <ul>      <li data-bind="tooltips: {}"><a title="Session images" data-local="true" href="#toolimagesrecent" data-bind="attr: { title: $root.t(\'Session images\') }, text: $root.t(\'Recents\')">Recents</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolimagesgallery" data-bind="attr: { title: $root.t(\'Remote gallery\') }, text: $root.t(\'Gallery\')">Gallery</a></li>    </ul>    <div id="toolimagesrecent">      \x3c!-- ko if: galleryRecent().length == 0 --\x3e<div class="galleryEmpty" data-bind="text: $root.t(\'No images uploaded, yet\')">No images uploaded, yet</div>\x3c!-- /ko --\x3e      \x3c!-- ko template: {name: \'gallery-images\', data: { items: galleryRecent } } --\x3e# recent gallery #\x3c!-- /ko --\x3e    </div>    <div id="toolimagesgallery" style="text-align: center">    \x3c!-- ko if: $root.galleryLoaded() === false --\x3e<a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadGallery, button: { disabled: $root.galleryLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a>\x3c!-- /ko --\x3e    \x3c!-- ko if: $root.galleryLoaded() === \'loading\' --\x3e<div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div>\x3c!-- /ko --\x3e    \x3c!-- ko if: $root.galleryLoaded() === 0 --\x3e<div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div>\x3c!-- /ko --\x3e    \x3c!-- ko template: {name: \'gallery-images\', data: { items: galleryRemote } } --\x3e# remote gallery #\x3c!-- /ko --\x3e    </div>  </div>  \x3c!-- /ko --\x3e</div><div id="tooldebug" class="slidebar" data-bind="css: { hidden: $root.debug() === false }">  <div class="close" data-bind="click: $root.debug.bind($element, false);">X</div>    \x3c!-- ko if: $root.debug --\x3e  Content:  <pre data-bind=\'text: ko.toJSON(content, null, 2)\' style="overflow: auto; height: 20%"></pre>  BlockDefs:  <pre data-bind=\'text: ko.toJSON(blockDefs, null, 2)\' style="overflow: auto; height: 20%"></pre>  \x3c!-- /ko --\x3e  <a href="javascript:void(0)" data-bind="click: $root.exportHTMLtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Generate\' }">Output</a>  <a href="javascript:void(0)" data-bind="click: $root.exportJSONtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Export\' }">Export</a>  <a href="javascript:void(0)" data-bind="click: $root.importJSONfromTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Import\' }">Import</a>  <textarea id="outputhtml" rows="10" style="width: 100%;"></textarea></div><div id="tooltheme" class="ui-widget slidebar" data-bind="css: { hidden: $root.showTheme() === false }">  <div class="close" data-bind="click: $root.showTheme.bind($element, false);">X</div>    \x3c!-- ko withProperties: { templateMode: \'styler\' } --\x3e    \x3c!-- ko if: $root.showTheme --\x3e      \x3c!-- ko block: $root.content().theme --\x3e\x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e  \x3c!-- /ko --\x3e</div>')})},{"../src/js/bindings/choose-template.js":31}],2:[function(k,_,e){(function(t){"use strict";var e=k("object-assign");function r(e,t){if(e===t)return 0;for(var n=e.length,o=t.length,i=0,r=Math.min(n,o);i<r;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var c=k("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,n="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function s(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=_.exports=h,i=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(c.isFunction(e)){if(n)return e.name;var t=e.toString().match(i);return t&&t[1]}}function p(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function b(e){if(n||!c.isFunction(e))return c.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,o,i){throw new d.AssertionError({message:n,actual:e,expected:t,operator:o,stackStartFunction:i})}function h(e,t){e||v(e,!0,t,"==",d.ok)}function g(e,t,n,o){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(c.isDate(e)&&c.isDate(t))return e.getTime()===t.getTime();if(c.isRegExp(e)&&c.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var i=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,o){if(null==e||null==t)return!1;if(c.isPrimitive(e)||c.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=m(e),r=m(t);if(i&&!r||!i&&r)return!1;if(i)return e=u.call(e),t=u.call(t),g(e,t,n);var a,l,s=x(e),d=x(t);if(s.length!==d.length)return!1;for(s.sort(),d.sort(),l=s.length-1;0<=l;l--)if(s[l]!==d[l])return!1;for(l=s.length-1;0<=l;l--)if(a=s[l],!g(e[a],t[a],n,o))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function m(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function y(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,n,o){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(o=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),o=(n&&n.name?" ("+n.name+").":".")+(o?" "+o:"."),e&&!i&&v(i,n,"Missing expected exception"+o);var r="string"==typeof o,a=!e&&i&&!n;if((!e&&c.isError(i)&&r&&y(i,n)||a)&&v(i,n,"Got unwanted exception"+o),e&&i&&n&&!y(i,n)||!e&&i)throw i}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return p(b(e.actual),128)+" "+e.operator+" "+p(b(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var o=n.stack,i=f(t),r=o.indexOf("\n"+i);if(0<=r){var a=o.indexOf("\n",r+1);o=o.substring(a+1)}this.stack=o}}},c.inherits(d.AssertionError,Error),d.fail=v,d.ok=h,d.equal=function(e,t,n){e!=t&&v(e,t,n,"==",d.equal)},d.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",d.notEqual)},d.deepEqual=function(e,t,n){g(e,t,!1)||v(e,t,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,n){g(e,t,!0)||v(e,t,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,n){g(e,t,!1)&&v(e,t,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,n,o){g(t,n,!0)&&v(t,n,o,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",d.strictEqual)},d.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",d.notStrictEqual)},d.throws=function(e,t,n){w(!0,e,t,n)},d.doesNotThrow=function(e,t,n){w(!1,e,t,n)},d.ifError=function(e){if(e)throw e},d.strict=e(function e(t,n){t||v(t,!0,n,"==",e)},d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var x=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":21,"util/":5}],3:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],4:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],5:[function(j,e,C){(function(o,i){var l=/%[sdj%]/g;C.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,i=o.length,r=String(e).replace(l,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),a=o[n];n<i;a=o[++n])g(a)||!c(a)?r+=" "+a:r+=" "+s(a);return r},C.deprecate=function(e,t){if(w(i.process))return function(){return C.deprecate(e,t).apply(this,arguments)};if(!0===o.noDeprecation)return e;var n=!1;return function(){if(!n){if(o.throwDeprecation)throw new Error(t);o.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function s(e,t){var n={seen:[],stylize:d};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&C._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),f(n,e,n.depth)}function a(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function d(e,t){return e}function f(t,n,o){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==C.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(o,t);return y(e)||(e=f(t,e,o)),e}var i=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(t,n);if(i)return i;var r=Object.keys(n),a=function(e){var n={};return e.forEach(function(e,t){n[e]=!0}),n}(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(n)),_(n)&&(0<=r.indexOf("message")||0<=r.indexOf("description")))return p(n);if(0===r.length){if(O(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return p(n)}var s,d="",c=!1,u=["{","}"];(v(n)&&(c=!0,u=["[","]"]),O(n))&&(d=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(d=" "+RegExp.prototype.toString.call(n)),k(n)&&(d=" "+Date.prototype.toUTCString.call(n)),_(n)&&(d=" "+p(n)),0!==r.length||c&&0!=n.length?o<0?x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),s=c?function(t,n,o,i,e){for(var r=[],a=0,l=n.length;a<l;++a)S(n,String(a))?r.push(b(t,n,o,i,String(a),!0)):r.push("");return e.forEach(function(e){e.match(/^\d+$/)||r.push(b(t,n,o,i,e,!0))}),r}(t,n,o,a,r):r.map(function(e){return b(t,n,o,a,e,c)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(s,d,u)):u[0]+d+u[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function b(e,t,n,o,i,r){var a,l,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?l=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(l=e.stylize("[Setter]","special")),S(o,i)||(a="["+i+"]"),l||(e.seen.indexOf(s.value)<0?-1<(l=g(n)?f(e,s.value,null):f(e,s.value,n-1)).indexOf("\n")&&(l=r?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n")):l=e.stylize("[Circular]","special")),w(a)){if(r&&i.match(/^\d+$/))return l;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+l}function v(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function w(e){return void 0===e}function x(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"==typeof e&&null!==e}function k(e){return c(e)&&"[object Date]"===t(e)}function _(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function O(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}C.debuglog=function(t){if(w(e)&&(e=o.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=o.pid;r[t]=function(){var e=C.format.apply(C,arguments);console.error("%s %d: %s",t,n,e)}}else r[t]=function(){};return r[t]},(C.inspect=s).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},C.isArray=v,C.isBoolean=h,C.isNull=g,C.isNullOrUndefined=function(e){return null==e},C.isNumber=m,C.isString=y,C.isSymbol=function(e){return"symbol"==typeof e},C.isUndefined=w,C.isRegExp=x,C.isObject=c,C.isDate=k,C.isError=_,C.isFunction=O,C.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},C.isBuffer=j("./support/isBuffer");var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C.log=function(){console.log("%s - %s",function(){var e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":");return[e.getDate(),u[e.getMonth()],t].join(" ")}(),C.format.apply(C,arguments))},C.inherits=j("inherits"),C._extend=function(e,t){if(!t||!c(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}).call(this,j("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":4,_process:22,inherits:3}],6:[function(f,p,e){(function(e){var n=f("util"),o=f("assert");function i(){return(new Date).getTime()}var r,a=Array.prototype.slice,l={};r=void 0!==e&&e.console?e.console:"undefined"!=typeof window&&window.console?window.console:{};for(var t=[[function(){},"log"],[function(){r.log.apply(r,arguments)},"info"],[function(){r.log.apply(r,arguments)},"warn"],[function(){r.warn.apply(r,arguments)},"error"],[function(e){l[e]=i()},"time"],[function(e){var t=l[e];if(!t)throw new Error("No such label: "+e);delete l[e];var n=i()-t;r.log(e+": "+n+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=n.format.apply(null,arguments),r.error(e.stack)},"trace"],[function(e){r.log(n.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=a.call(arguments,1);o.ok(!1,n.format.apply(null,t))}},"assert"]],s=0;s<t.length;s++){var d=t[s],c=d[0],u=d[1];r[u]||(r[u]=c)}p.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:2,util:27}],7:[function(e,t,n){var d,c,o,u,f,p,b,s,v,h,g,m,i,r,y,a;d=jQuery,c=0,o=window.navigator.userAgent,u=0<o.indexOf("MSIE "),f=u?"-ie":"",p=!u&&(/mozilla/.test(o.toLowerCase())&&!/webkit/.test(o.toLowerCase())),b=[],s=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],v=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],h=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],g=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],m="#0000ffff",i=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){return i(Number(e))},y=function(e){var t=i(e);return t+t+t},a=function(e){if(10<e.length){var t=1+e.indexOf("("),n=e.indexOf(")"),o=e.substring(t,n).split(",");return["#",r(o[0]),r(o[1]),r(o[2])].join("")}return e},d.widget("evol.colorpicker",{version:"3.4.0",options:{color:null,customTheme:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var n=this,e=this.options.color;switch(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+c++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,this.element.get(0).tagName){case"INPUT":var t=this.element,o=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(p?"-ff":f)+(this.options.hideButton?" evo-hidden-button":""),i="";this._isPopup=!0,this._palette=null;var r=t.val();null!==e?e!=r&&t.val(e).change():""!==r&&(e=this.options.color=r),e===m?o+=" evo-transparent":i=null!==e?"background-color:"+e:"",t.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(u?"margin-bottom:-21px;":"")+(p?"padding:1px 0;":"")+'" class="evo-cp-wrap"></div>').after('<div class="'+o+'" style="'+i+'"></div>').on("keyup onpaste",function(e){var t=d(this).val();t!=n.options.color&&n._setValue(t,!0)});var a=this.options.showOn;"both"!==a&&"focus"!==a||t.on("focus",function(){n.showPalette()}),"both"!==a&&"button"!==a||t.next().on("click",function(e){return e.stopPropagation(),n.showPalette(),!1});break;default:this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()}if(this.options.history){e&&this._add2History(e);var l=this.options.initialHistory;if(l)for(var s in l)this._add2History(l[s])}},_paletteHTML:function(){var e=this._paletteIdx=Math.abs(this._paletteIdx),t=this.options,n=t.strings.split(","),o='<div class="evo-pop'+f+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+e]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+n[1+e]+"</a>";return t.history&&(o+='<a href="javascript:void(0)" class="evo-hist">'+n[5]+"</a>"),o+="</div>",t.displayIndicator&&(o+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),o+="</div>"},_colorIndHTML:function(e){var t=u?"evo-colorbox-ie ":"",n="";return e?e===m?t+="evo-transparent":n="background-color:"+e:n="display:none",'<div class="evo-color" style="float:left"><div style="'+n+'" class="'+t+'"></div><span>'+(e||"")+"</span></div>"},_paletteHTML1:function(){var e,t=this.options,n=t.strings.split(","),o='<td style="background-color:',i=u?'"><div style="width:2px;"></div></td>':'"><span></span></td>',r='<tr><th colspan="10" class="ui-widget-content">',a='<table class="evo-palette'+f+(t.customTheme?" cust-theme":"")+'">'+r+n[0]+"</th></tr><tr>";if(t.customTheme)for(e=0,ml=t.customTheme.length;e<ml;e++)a+=o+t.customTheme[e]+i,e%10==9&&(a+="</tr><tr>");else{for(o+="#",e=0;e<10;e++)a+=o+s[e]+i;for(a+="</tr>",u||(a+='<tr><th colspan="10"></th></tr>'),a+='<tr class="top">',e=0;e<10;e++)a+=o+v[e]+i;for(var l=1;l<4;l++)for(a+='</tr><tr class="in">',e=0;e<10;e++)a+=o+v[10*l+e]+i;for(a+='</tr><tr class="bottom">',e=40;e<50;e++)a+=o+v[e]+i;for(a+="</tr>"+r,t.transparentColor&&(a+='<div class="evo-transparent evo-tr-box"></div>'),a+=n[1]+"</th></tr><tr>",e=0;e<10;e++)a+=o+h[e]+i}return a+="</tr></table>"},_paletteHTML2:function(){for(var e,t,n='<td style="background-color:#',o=u?'"><div style="width:5px;"></div></td>':'"><span></span></td>',i='<table class="evo-palette2'+f+'"><tr>',r="</tr></table>",a='<div class="evo-palcenter">',l=0,s=g.length;l<s;l++){a+=i;var d=g[l];for(e=0,t=d.length;e<t;e++)a+=n+d[e]+o;a+=r}a+='<div class="evo-sep"></div>';var c="";for(a+=i,e=255;10<e;e-=10)a+=n+y(e)+o,c+=n+y(e-=10)+o;return a+=r+i+c+r+"</div>"},_switchPalette:function(e){if(this._enabled){var t,n,o,i=this.options,r=i.strings.split(",");if(d(e).hasClass("evo-hist")){var a='<table class="evo-palette"><tr><th class="ui-widget-content">'+r[5]+'</th></tr></tr></table><div class="evo-cHist">';if(0===b.length)a+="<p>&nbsp;"+r[6]+"</p>";else for(var l=b.length-1;-1<l;l--)9===b[l].length?i.transparentColor&&(a+='<div class="evo-transparent"></div>'):a+='<div style="background-color:'+b[l]+'"></div>';a+="</div>",t=-this._paletteIdx,n=a,o=r[4]}else this._paletteIdx<0?(t=-this._paletteIdx,this._palette.find(".evo-hist").show()):t=2==this._paletteIdx?1:2,n=this["_paletteHTML"+t](),o=r[t+1],this._paletteIdx=t;this._paletteIdx=t;var s=this._palette.find(".evo-more").prev().html(n).end().children().eq(0).html(o);t<0&&s.next().hide()}},_downOrUpPositioning:function(){for(var e=this.element,t=0;null!==e&&t<100;){if("visible"!=e.css("overflow")){var n=this._palette.offset().top+this._palette.height(),o=e.offset().top+e.height(),i=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),r=e.offset().top;o<n&&r<i?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}},showPalette:function(){if(this._enabled&&(this._active=!0,d(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette)){this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(e){return e.stopPropagation(),!1}),this._bindColors();var t=this;this._isPopup&&(this._downOrUpPositioning(),d(document.body).on("click."+t._id,function(e){e.target!=t.element.get(0)&&t.hidePalette()}).on("keyup."+t._id,function(e){27===e.keyCode&&t.hidePalette()}))}return this},hidePalette:function(){if(this._isPopup&&this._palette){d(document.body).off("click."+this._id);var e=this;this._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){e._palette.remove(),e._palette=e._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var o=this,e=this.options,t=this._palette.find("div.evo-color"),n=e.history?"td,.evo-cHist>div":"td";e.transparentColor&&(n+=",.evo-transparent"),this._cTxt1=t.eq(0).children().eq(0),this._cTxt2=t.eq(1).children().eq(0),this._palette.on("click",n,function(e){if(o._enabled){var t=d(this);o._setValue(t.hasClass("evo-transparent")?m:a(t.attr("style").substring(17))),o._active=!1}}).on("mouseover",n,function(e){if(o._enabled){var t=d(this),n=t.hasClass("evo-transparent")?m:a(t.attr("style").substring(17));o.options.displayIndicator&&o._setColorInd(n,2),o._active&&o.element.trigger("mouseover.color",n)}}).find(".evo-more a").on("click",function(){return o._switchPalette(this),!1})},val:function(e){return void 0===e?this.options.color:(this._setValue(e),this)},_setValue:function(e,t){e=e.replace(/ /g,""),this.options.color=e,this._isPopup?(t||this.hidePalette(),this._setBoxColor(this.element.val(e).change().next(),e)):this._setColorInd(e,1),this.options.history&&0<this._paletteIdx&&this._add2History(e),this.element.trigger("change.color",e)},_setColorInd:function(e,t){var n=this["_cTxt"+t];this._setBoxColor(n,e),n.next().html(e)},_setBoxColor:function(e,t){t===m?e.addClass("evo-transparent").removeAttr("style"):e.removeClass("evo-transparent").attr("style","background-color:"+t)},_setOption:function(e,t){"color"==e?this._setValue(t,!0):this.options[e]=t},_add2History:function(e){for(var t=b.length,n=0;n<t;n++)if(e==b[n])return;27<t&&b.shift(),b.push(e)},clear:function(){this.hidePalette().val("")},enable:function(){var e=this.element;return this._isPopup?e.removeAttr("disabled"):e.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),e.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var e=this.element;return this._isPopup?e.attr("disabled","disabled"):(this.hidePalette(),e.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),e.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){d(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),d.Widget.prototype.destroy.call(this)}})},{}],8:[function(e,t,n){arguments[4][3][0].apply(n,arguments)},{dup:3}],9:[function(e,i,r){!function(e){"use strict";var k="Compound",_="MemberExpression",O="Literal",S=function(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n},j={"-":!0,"!":!0,"~":!0,"+":!0},C={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},t=function(e){var t,n=0;for(var o in e)(t=o.length)>n&&e.hasOwnProperty(o)&&(n=t);return n},T=t(j),E=t(C),A={true:!0,false:!1,null:null},$=function(e){return C[e]||0},H=function(e,t,n){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:n}},M=function(e){return 48<=e&&e<=57},I=function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||128<=e&&!C[String.fromCharCode(e)]},B=function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||128<=e&&!C[String.fromCharCode(e)]},n=function(o){for(var e,t,s=0,n=o.charAt,i=o.charCodeAt,r=function(e){return n.call(o,e)},a=function(e){return i.call(o,e)},l=o.length,d=function(){for(var e=a(s);32===e||9===e||10===e||13===e;)e=a(++s)},c=function(){var e,t,n=f();return d(),63!==a(s)?n:(s++,(e=c())||S("Expected expression",s),d(),58===a(s)?(s++,(t=c())||S("Expected expression",s),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void S("Expected :",s))},u=function(){d();for(var e=o.substr(s,E),t=e.length;0<t;){if(C.hasOwnProperty(e)&&(!I(a(s))||s+e.length<o.length&&!B(a(s+e.length))))return s+=t,e;e=e.substr(0,--t)}return!1},f=function(){var e,t,n,o,i,r,a,l;if(r=p(),!(t=u()))return r;for(i={value:t,prec:$(t)},(a=p())||S("Expected expression after "+t,s),o=[r,i,a];(t=u())&&0!==(n=$(t));){for(i={value:t,prec:n};2<o.length&&n<=o[o.length-2].prec;)a=o.pop(),t=o.pop().value,r=o.pop(),e=H(t,r,a),o.push(e);(e=p())||S("Expected expression after "+t,s),o.push(i,e)}for(e=o[l=o.length-1];1<l;)e=H(o[l-1].value,o[l-2],e),l-=2;return e},p=function(){var e,t,n;if(d(),e=a(s),M(e)||46===e)return b();if(39===e||34===e)return v();if(91===e)return w();for(n=(t=o.substr(s,T)).length;0<n;){if(j.hasOwnProperty(t)&&(!I(a(s))||s+t.length<o.length&&!B(a(s+t.length))))return s+=n,{type:"UnaryExpression",operator:t,argument:p(),prefix:!0};t=t.substr(0,--n)}return!(!I(e)&&40!==e)&&m()},b=function(){for(var e,t,n="";M(a(s));)n+=r(s++);if(46===a(s))for(n+=r(s++);M(a(s));)n+=r(s++);if("e"===(e=r(s))||"E"===e){for(n+=r(s++),"+"!==(e=r(s))&&"-"!==e||(n+=r(s++));M(a(s));)n+=r(s++);M(a(s-1))||S("Expected exponent ("+n+r(s)+")",s)}return t=a(s),I(t)?S("Variable names cannot start with a number ("+n+r(s)+")",s):46===t&&S("Unexpected period",s),{type:O,value:parseFloat(n),raw:n}},v=function(){for(var e,t="",n=r(s++),o=!1;s<l;){if((e=r(s++))===n){o=!0;break}if("\\"===e)switch(e=r(s++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return o||S('Unclosed quote after "'+t+'"',s),{type:O,value:t,raw:n+t+n}},h=function(){var e,t=a(s),n=s;for(I(t)?s++:S("Unexpected "+r(s),s);s<l&&(t=a(s),B(t));)s++;return e=o.slice(n,s),A.hasOwnProperty(e)?{type:O,value:A[e],raw:e}:"this"===e?{type:"ThisExpression"}:{type:"Identifier",name:e}},g=function(e){for(var t,n,o=[],i=!1;s<l;){if(d(),(t=a(s))===e){i=!0,s++;break}44===t?s++:((n=c())&&n.type!==k||S("Expected comma",s),o.push(n))}return i||S("Expected "+String.fromCharCode(e),s),o},m=function(){var e,t;for(t=40===(e=a(s))?y():h(),d(),e=a(s);46===e||91===e||40===e;)s++,46===e?(d(),t={type:_,computed:!1,object:t,property:h()}):91===e?(t={type:_,computed:!0,object:t,property:c()},d(),93!==(e=a(s))&&S("Unclosed [",s),s++):40===e&&(t={type:"CallExpression",arguments:g(41),callee:t}),d(),e=a(s);return t},y=function(){s++;var e=c();if(d(),41===a(s))return s++,e;S("Unclosed (",s)},w=function(){return s++,{type:"ArrayExpression",elements:g(93)}},x=[];s<l;)59===(e=a(s))||44===e?s++:(t=c())?x.push(t):s<l&&S('Unexpected "'+r(s)+'"',s);return 1===x.length?x[0]:{type:k,body:x}};if(n.version="0.3.4",n.toString=function(){return"JavaScript Expression Parser (JSEP) v"+n.version},n.addUnaryOp=function(e){return T=Math.max(e.length,T),j[e]=!0,this},n.addBinaryOp=function(e,t){return E=Math.max(e.length,E),C[e]=t,this},n.addLiteral=function(e,t){return A[e]=t,this},n.removeUnaryOp=function(e){return delete j[e],e.length===T&&(T=t(j)),this},n.removeAllUnaryOps=function(){return j={},T=0,this},n.removeBinaryOp=function(e){return delete C[e],e.length===E&&(E=t(C)),this},n.removeAllBinaryOps=function(){return C={},E=0,this},n.removeLiteral=function(e){return delete A[e],this},n.removeAllLiterals=function(){return A={},this},void 0===r){var o=e.jsep;(e.jsep=n).noConflict=function(){return e.jsep===n&&(e.jsep=o),n}}else void 0!==i&&i.exports?r=i.exports=n:r.parse=n}(this)},{}],10:[function(e,t,n){"use strict";var y=e("./utils");t.exports=function(g){function o(p,e,b){b=b||{};var t=y.parseCSS(e),v=[],h="style";if(b.styleAttributeName&&(h=b.styleAttributeName),t.forEach(function(e){for(var t,n=e[0],i=e[1],r=new y.Selector(n),o=r.parsed(),a=function(e){if(0===e.length)return;var t=e[e.length-1].pseudos;if(!t)return;for(var n=0;n<t.length;n++)if(m(t[n]))return t[n].name}(o),l=0;l<o.length;++l){var s=o[l];if(s.pseudos)for(var d=0;d<s.pseudos.length;++d){var c=s.pseudos[d];if(0<=g.ignoredPseudos.indexOf(c.name))return}}if(a){var u=o[o.length-1],f=u.pseudos;u.pseudos=function(e){return e.filter(function(e){return!m(e)})}(u.pseudos),n=o.toString(),u.pseudos=f}try{t=p(n)}catch(e){return}t.each(function(){var c=this;if(!(c.name&&0<=g.nonVisualElements.indexOf(c.name.toUpperCase()))){if(a){var e="pseudo"+a,t=c[e];t||((t=c[e]=p("<span />").get(0)).pseudoElementType=a,(t.pseudoElementParent=c)[e]=t),c=t}if(!c.styleProps){if(c.styleProps={},p(c).attr(h)){var n="* { "+p(c).attr(h)+" } ";o(y.parseCSS(n)[0][1],new y.Selector("<style>",!0))}v.push(c)}o(i,r)}function o(e,t){for(var n=0,o=e.length;n<o;n++)if("property"==e[n].type){var i=e[n].name,r=e[n].value,a=null!==e[n].value.match(/!important$/);a&&!b.preserveImportant&&(r=r.replace(/\s*!important$/,""));var l=[e[n].position.start.line,e[n].position.start.col],s=new y.Property(i,r,t,a?2:0,l),d=c.styleProps[i];g.excludedProperties.indexOf(i)<0&&(d&&d.compare(s)===s||!d)&&(d&&d.selector!==t?delete c.styleProps[i]:d&&(s.nextProp=d),c.styleProps[i]=s)}}})}),v.forEach(function(n){Object.keys(n.styleProps).length;var o=[];Object.keys(n.styleProps).forEach(function(e){for(var t=n.styleProps[e];void 0!==t;)o.push(t),t=t.nextProp}),o.sort(function(e,t){return e.compareFunc(t)});var e=o.filter(function(e){return"content"!==e.prop}).map(function(e){return e.prop+": "+e.value.replace(/["]/g,"'")+";"}).join(" ");e&&p(n).attr(h,e)}),b.inlinePseudoElements&&v.forEach(function(e){if(e.pseudoElementType&&e.styleProps.content){var t=function(e){if("none"===e||"normal"===e)return"";var t=e.match(/^\s*url\s*\(\s*(.*?)\s*\)\s*$/i);if(t){var n=t[1].replace(/^['"]|['"]$/g,"");return{img:n}}return e=(e=e.slice(1,e.length-1)).replace(/\\/g,"")}(e.styleProps.content.value);t.img?(e.name="img",p(e).attr("src",t.img)):p(e).text(t);var n=e.pseudoElementParent;"before"===e.pseudoElementType?p(n).prepend(e):p(n).append(e)}}),b.applyWidthAttributes&&v.forEach(function(e){i(e,"width")}),b.applyHeightAttributes&&v.forEach(function(e){i(e,"height")}),b.applyAttributesTableElements&&v.forEach(function(e){if(!e.name)return;var t=e.name.toUpperCase(),n=Object.keys(g.styleToAttribute);if(-1<g.tableElements.indexOf(t))for(var o in e.styleProps)if(-1<n.indexOf(e.styleProps[o].prop)){var i=g.styleToAttribute[e.styleProps[o].prop],r=e.styleProps[o].value;if("background"===i&&(r=0!==(a=r).indexOf("url(")?a:a.replace(/^url\((["'])?([^"']+)\1\)$/,"$2")),/(linear|radial)-gradient\(/i.test(r))continue;p(e).attr(i,r)}var a}),b.insertPreservedExtraCss&&b.extraCss){var n=y.getPreservedText(b.extraCss,{mediaQueries:b.preserveMediaQueries,fontFaces:b.preserveFontFaces,keyFrames:b.preserveKeyFrames});if(n){var o=null;!0!==b.insertPreservedExtraCss?o=p(b.insertPreservedExtraCss):((o=p("head")).length||(o=p("body")),o.length||(o=p.root())),o.first().append("<style>"+n+"</style>")}}function i(e,t){if(e.name){var n=e.name.toUpperCase();if(-1<g[t+"Elements"].indexOf(n))for(var o in e.styleProps)if(e.styleProps[o].prop===t){if(e.styleProps[o].value.match(/px/)){var i=e.styleProps[o].value.replace("px","");return void p(e).attr(t,i)}if(-1<g.tableElements.indexOf(n)&&e.styleProps[o].value.match(/\%/))return void p(e).attr(t,e.styleProps[o].value)}}}}function m(e){return"before"===e.name||"after"===e.name}return g.ignoredPseudos=["hover","active","focus","visited","link"],g.widthElements=["TABLE","TD","TH","IMG"],g.heightElements=["TABLE","TD","TH","IMG"],g.tableElements=["TABLE","TH","TR","TD","CAPTION","COLGROUP","COL","THEAD","TBODY","TFOOT"],g.nonVisualElements=["HEAD","TITLE","BASE","LINK","STYLE","META","SCRIPT","NOSCRIPT"],g.styleToAttribute={"background-color":"bgcolor","background-image":"background","text-align":"align","vertical-align":"valign"},g.excludedProperties=[],g.juiceDocument=function(e,t){t=y.getDefaultOptions(t);var n=function(e,t){return function(t,n){var o,i,r,a=[];return t("style").each(function(){if(1===(o=(r=this).childNodes).length){if(i=o[0].data,n.applyStyleTags&&void 0===t(r).attr("data-embed")&&a.push(i),n.removeStyleTags&&void 0===t(r).attr("data-embed")){var e=y.getPreservedText(r.childNodes[0].nodeValue,{mediaQueries:n.preserveMediaQueries,fontFaces:n.preserveFontFaces,keyFrames:n.preserveKeyFrames,pseudos:n.preservePseudos},g.ignoredPseudos);e?r.childNodes[0].nodeValue=e:t(r).remove()}t(r).removeAttr("data-embed")}}),a}(e,t).join("\n")}(e,t);return n+="\n"+t.extraCss,o(e,n,t),e},g.inlineDocument=o,g}},{"./utils":13}],11:[function(e,t,n){"use strict";t.exports=i;var o=e("./utils");function i(e,t,n,o,i){this.prop=e,this.value=t,this.selector=n,this.priority=o||0,this.additionalPriority=i||[]}i.prototype.compareFunc=function(e){var t=[];t.push.apply(t,this.selector.specificity()),t.push.apply(t,this.additionalPriority),t[0]+=this.priority;var n=[];return n.push.apply(n,e.selector.specificity()),n.push.apply(n,e.additionalPriority),n[0]+=e.priority,o.compareFunc(t,n)},i.prototype.compare=function(e){return 1===this.compareFunc(e)?this:e},i.prototype.toString=function(){return this.prop+": "+this.value.replace(/['"]+/g,"")+";"}},{"./utils":13}],12:[function(e,t,n){"use strict";var o=e("slick/parser");function i(e,t){this.text=e,this.spec=void 0,this.styleAttribute=t||!1}function b(e){try{return o(e)[0]}catch(e){return[]}}t.exports=i,i.prototype.parsed=function(){return this.tokens||(this.tokens=b(this.text)),this.tokens},i.prototype.specificity=function(){var p=this.styleAttribute;return this.spec||(this.spec=function e(t,n){var o=n||b(t);var i=[p?1:0,0,0,0];var r=[];for(var a=0;a<o.length;a++){var l=o[a],s=l.pseudos;if(l.id&&i[1]++,l.attributes&&(i[2]+=l.attributes.length),l.classList&&(i[2]+=l.classList.length),l.tag&&"*"!==l.tag&&i[3]++,s){i[3]+=s.length;for(var d=0;d<s.length;d++)"not"===s[d].name&&(r.push(s[d].value),i[3]--)}}for(var c=r.length;c--;)for(var u=e(r[c]),f=4;f--;)i[f]+=u[f];return i}(this.text,this.parsed())),this.spec}},{"slick/parser":23}],13:[function(e,t,n){"use strict";var c=e("mensch"),o={}.hasOwnProperty,i=e("./selector"),r=e("./property");n.Selector=i,n.Property=r,n.extract=function(e){for(var t=0,n=[],o="",i=0,r=e.length;i<r;i++){var a=e.charAt(i);t?("]"!==a&&")"!==a||t--,o+=a):","===a?(n.push(o),o=""):("["!==a&&"("!==a||t++,(o.length||","!==a&&"\n"!==a&&" "!==a)&&(o+=a))}return o.length&&n.push(o),n},n.parseCSS=function(e){for(var t=c.parse(e,{position:!0,comments:!0}),n=void 0!==t.stylesheet&&t.stylesheet.rules?t.stylesheet.rules:[],o=[],i=0,r=n.length;i<r;i++)if("rule"==n[i].type)for(var a=n[i],l=a.selectors,s=0,d=l.length;s<d;s++)o.push([l[s],a.declarations]);return o},n.getPreservedText=function(e,t,n){for(var o=c.parse(e,{position:!0,comments:!0}),i=void 0!==o.stylesheet&&o.stylesheet.rules?o.stylesheet.rules:[],r=[],a=i.length-1;0<=a;a--)(t.fontFaces&&"font-face"===i[a].type||t.mediaQueries&&"media"===i[a].type||t.keyFrames&&"keyframes"===i[a].type||t.pseudos&&i[a].selectors&&this.matchesPseudo(i[a].selectors[0],n))&&r.unshift(c.stringify({stylesheet:{rules:[i[a]]}},{comments:!1,indentation:"  "})),i[a].position.start;return 0!==r.length&&"\n"+r.join("\n")+"\n"},n.normalizeLineEndings=function(e){return e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")},n.matchesPseudo=function(t,e){return e.find(function(e){return-1<t.indexOf(e)})},n.compareFunc=function(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e[o]!==t[o])return e[o]>t[o]?1:-1;return e.length-t.length},n.compare=function(e,t){return 1==n.compareFunc(e,t)?e:t},n.extend=function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);return e},n.getDefaultOptions=function(e){var t=n.extend({extraCss:"",insertPreservedExtraCss:!0,applyStyleTags:!0,removeStyleTags:!0,preserveMediaQueries:!0,preserveFontFaces:!0,preserveKeyFrames:!0,preservePseudos:!0,applyWidthAttributes:!0,applyHeightAttributes:!0,applyAttributesTableElements:!0,url:""},e);return t.webResources=t.webResources||{},t}},{"./property":11,"./selector":12,mensch:16}],14:[function(i,r,a){(function(o){!function(e){if("function"==typeof i&&"object"==typeof a&&"object"==typeof r){var t="undefined"!=typeof window?window.ko:void 0!==o?o.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null;"undefined"!=typeof window?window.jQuery.ui.sortable:void 0!==o&&o.jQuery.ui.sortable,"undefined"!=typeof window?window.jQuery.ui.draggable:void 0!==o&&o.jQuery.ui.draggable,"undefined"!=typeof window?window.jQuery.ui.droppable:void 0!==o&&o.jQuery.ui.droppable,e(t,n)}else e(window.ko,window.jQuery)}(function(v,h){var g="ko_sortItem",m="ko_sourceIndex",y="ko_sortList",w="ko_parentList",x="ko_dragItem",k=v.utils.unwrapObservable,_=v.utils.domData.get,O=v.utils.domData.set,e=h.ui&&h.ui.version,S=e&&e.indexOf("1.6.")&&e.indexOf("1.7.")&&(e.indexOf("1.8.")||"1.8.24"===e),r=function(e,t){v.utils.arrayForEach(e,function(e){1===e.nodeType&&(O(e,g,t),O(e,w,_(e.parentNode,y)))})},u=function(e,t){var n,o={},i={};return v.utils.peekObservable(e()).data?(i=k(e()||{}),o[t]=i.data,i.hasOwnProperty("template")&&(o.name=i.template)):o[t]=e(),v.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(e){i.hasOwnProperty(e)?o[e]=i[e]:v.bindingHandlers.sortable.hasOwnProperty(e)&&(o[e]=v.bindingHandlers.sortable[e])}),"foreach"===t&&(o.afterRender?(n=o.afterRender,o.afterRender=function(e,t){r.call(t,e,t),n.call(t,e,t)}):o.afterRender=r),o},j=function(e,t){var n=k(t);if(n)for(var o=0;o<=e;o++)n[o]&&k(n[o]._destroy)&&e++;return e};v.bindingHandlers.sortable={init:function(o,e,t,n,i){var r,f,a=h(o),l=k(e())||{},p=u(e,"foreach"),b={};!function(e,t){var n,o;t?(o=document.getElementById(t))&&(n=new v.templateSources.domElement(o)).text(h.trim(n.text())):h(e).contents().each(function(){this&&1!==this.nodeType&&e.removeChild(this)})}(o,p.name),h.extend(!0,b,v.bindingHandlers.sortable),l.options&&b.options&&(v.utils.extend(b.options,l.options),delete l.options),v.utils.extend(b,l),b.connectClass&&(v.isObservable(b.allowDrop)||"function"==typeof b.allowDrop)?v.computed({read:function(){var e=k(b.allowDrop),t="function"==typeof e?e.call(this,p.foreach):e;v.utils.toggleDomNodeCssClass(o,b.connectClass,t)},disposeWhenNodeIsRemoved:o},this):v.utils.toggleDomNodeCssClass(o,b.connectClass,b.allowDrop),v.bindingHandlers.template.init(o,function(){return p},t,n,i),r=b.options.start,f=b.options.update,b.options.helper||(b.options.helper=function(e,t){return t.is("tr")&&t.children().each(function(){h(this).width(h(this).width())}),t});var s=setTimeout(function(){var u,n=b.options.receive;a.sortable(v.utils.extend(b.options,{start:function(e,t){var n=t.item[0];O(n,m,v.utils.arrayIndexOf(t.item.parent().children(),n)),t.item.find("input:focus").change(),r&&r.apply(this,arguments)},receive:function(e,t){"function"==typeof n&&n.call(this,e,t),(u=_(t.item[0],x))&&(u.clone&&(u=u.clone()),b.dragged&&(u=b.dragged.call(this,u,e,t)||u))},update:function(e,t){var n,o,i,r,a,l=t.item[0],s=t.item.parent()[0],d=_(l,g)||u;if(d||h(l).remove(),u=null,d&&this===s||!S&&h.contains(this,s)){if(n=_(l,w),i=_(l,m),o=_(l.parentNode,y),r=v.utils.arrayIndexOf(t.item.parent().children(),l),p.includeDestroyed||(i=j(i,n),r=j(r,o)),(b.beforeMove||b.afterMove)&&(a={item:d,sourceParent:n,sourceParentNode:n&&t.sender||l.parentNode,sourceIndex:i,targetParent:o,targetIndex:r,cancelDrop:!1},b.beforeMove&&b.beforeMove.call(this,a,e,t)),n?h(n===o?this:t.sender||this).sortable("cancel"):h(l).remove(),a&&a.cancelDrop)return;if(b.hasOwnProperty("strategyMove")&&!1!==b.strategyMove){if(0<=r)if(n)if(n!==o)n.splice(i,1),o.splice(r,0,d),O(l,g,null),t.item.remove();else{var c=k(n);n.valueWillMutate&&n.valueWillMutate(),c.splice(i,1),c.splice(r,0,d),n.valueHasMutated&&n.valueHasMutated()}else o.splice(r,0,d),O(l,g,null),t.item.remove()}else 0<=r&&(n&&(n.splice(i,1),v.processAllDeferredBindingUpdates&&v.processAllDeferredBindingUpdates(),v.options&&v.options.deferUpdates&&v.tasks.runEarly()),o.splice(r,0,d)),O(l,g,null);v.processAllDeferredBindingUpdates&&v.processAllDeferredBindingUpdates(),b.afterMove&&b.afterMove.call(this,a,e,t)}f&&f.apply(this,arguments)},connectWith:!!b.connectClass&&"."+b.connectClass})),void 0!==b.isEnabled&&v.computed({read:function(){a.sortable(k(b.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:o})},0);return v.utils.domNodeDisposal.addDisposeCallback(o,function(){(a.data("ui-sortable")||a.data("sortable"))&&a.sortable("destroy"),v.utils.toggleDomNodeCssClass(o,b.connectClass,!1),clearTimeout(s)}),{controlsDescendantBindings:!0}},update:function(e,t,n,o,i){var r=u(t,"foreach");O(e,y,r.foreach),v.bindingHandlers.template.update(e,function(){return r},n,o,i)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},v.bindingHandlers.draggable={init:function(e,t,n,o,i){var r=k(t())||{},a=r.options||{},l=v.utils.extend({},v.bindingHandlers.draggable.options),s=u(t,"data"),d=r.connectClass||v.bindingHandlers.draggable.connectClass,c=void 0!==r.isEnabled?r.isEnabled:v.bindingHandlers.draggable.isEnabled;return r="data"in r?r.data:r,O(e,x,r),v.utils.extend(l,a),l.connectToSortable=!!d&&"."+d,h(e).draggable(l),void 0!==c&&v.computed({read:function(){h(e).draggable(k(c)?"enable":"disable")},disposeWhenNodeIsRemoved:e}),v.utils.domNodeDisposal.addDisposeCallback(e,function(){h(e).draggable("destroy")}),v.bindingHandlers.template.init(e,function(){return s},n,o,i)},update:function(e,t,n,o,i){var r=u(t,"data");return v.bindingHandlers.template.update(e,function(){return r},n,o,i)},connectClass:v.bindingHandlers.sortable.connectClass,options:{helper:"clone"}},v.bindingHandlers.droppable={init:function(e,t,n,o,i){var r=k(t())||{},a=r.options||{},l=v.utils.extend({},v.bindingHandlers.droppable.options),s=void 0!==r.isEnabled?r.isEnabled:v.bindingHandlers.droppable.isEnabled;v.utils.extend(l,a),r="data"in r?r.data:t(),l.drop=function(e,t){var n=_(t.draggable[0],x)||_(t.draggable[0],g);r(n)},h(e).droppable(l),void 0!==s&&v.computed({read:function(){h(e).droppable(k(s)?"enable":"disable")},disposeWhenNodeIsRemoved:e}),v.utils.domNodeDisposal.addDisposeCallback(e,function(){h(e).droppable("destroy")})},options:{accept:"*"}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,n,o){(function(e){(function(y){y.subscribable.fn.watch=function(e,t,n,o){var i=typeof e;return"boolean"==i||"undefined"==i?y.watch(this,{enabled:!1!==e}):"function"!=i||y.isSubscribable(e)?y.watch(e,t,n,o||this):y.watch(this,t||{},e,o||this),this},y.watch=function(p,b,v,h){function g(i,e,t,r,a,n){if(i&&0!==b.depth&&(-1===b.depth||t.length<(b.depth||1))){if(b.watchedOnly&&!i.watchable&&i!=p)return;if(!1!==b.enabled&&!0!==b.enabled||(i.watchable=b.enabled),!1===i.watchable)return;!0===b.seal&&(i.watchable=!1);var o=typeof i;if("object"==o||"function"==o){if(i._watcher===h)return;if(b.hide&&-1<y.utils.arrayIndexOf(b.hide,i))return;var l=[].concat(t,e&&e!==p?e:[]);if("function"!=o){if("[object Object]"===Object.prototype.toString.call(i))y.utils.objectForEach(i,function(e,t){if(t=b.getter?b.getter.call(h,l,i,e):t){if(b.wrap){var n=Object.prototype.toString.call(t);"[object Function]"!==n&&"[object Object]"!==n&&(b.beforeWrap&&!1===b.beforeWrap.call(h,l,i,t)||(t=i[e]="[object Array]"===n?y.observableArray(t):y.observable(t)))}b.unloop&&(t._watcher=r?void 0:h);var o=g(t,a?null:i,l,r,null,e);b.tagFields&&void 0===t._fieldName&&(o||"parentsOnly"!==b.tagFields&&"function"==typeof t||"object"==typeof t)&&(t._fieldName=e)}});else if(!0!==b.hideArrays)for(var s=0;s<i.length;s++)g(i[s],a?null:i,l,r);return!0}if("function"==typeof i.notifySubscribers&&v){if(!0===b.enabled&&!1===i.watchable)return;if(r||!b.beforeWatch||!1!==b.beforeWatch.call(h,l,i,n)){var d="function"==typeof i.pop;if(r?function(e){var t=e[m];if(!t)throw"Subscriptions field (."+m+") not defined for observable child "+(e._fieldName||"");if(t.change)for(var n=t.change.length-1;0<=n;n--)t.change[n]._watcher===h&&t.change[n].dispose();if(t.beforeChange&&(b.mutable||0<b.oldValues))for(n=t.beforeChange.length-1;0<=n;n--)t.beforeChange[n]._watcher===h&&t.beforeChange[n].dispose();if(t.arrayChange)for(n=t.arrayChange.length-1;0<=n;n--)t.arrayChange[n]._watcher===h&&t.arrayChange[n].dispose()}(i):(c=i,u=l,f=a,d?c.subscribe(function(e){var t;!1===b.splitArrayChanges&&void 0!==(t=v.call(h,u,c,e))&&h(t),y.utils.arrayForEach(e,function(e){if(!1!==b.splitArrayChanges){var t=v.call(h,u,c,e);void 0!==t&&h(t)}e.moved||(!1===b.async?g(e.value,f?null:c,u,"deleted"===e.status):setTimeout(function(){g(e.value,f?null:c,u,"deleted"===e.status)}))})},void 0,"arrayChange")._watcher=h:(c.subscribe(function(){if(!1!==c.watchable){var e=v.call(h,u,c);void 0!==e&&h(e),b.mutable&&"object"==typeof c()&&(!1===b.async?g(c(),f?null:c,u,!1,!0):setTimeout(function(){g(c(),f?null:c,u,!1,!0)}))}},null,"change")._watcher=h,(0<b.oldValues||b.mutable)&&(c.subscribe(function(e){if(0<b.oldValues){var t=c.oldValues?c.oldValues:c.oldValues=[];for(t.unshift(e);t.length>b.oldValues;)t.pop()}b.mutable&&"object"==typeof e&&g(e,f?null:c,u,!0,!0)},null,"beforeChange")._watcher=h))),d)return g(i(),a?null:i,l,r,!0),!0;if(!0!==b.hideWrappedValues)return g(i(),a?null:i,l,r,!0)}}}}var c,u,f}var m;switch("function"==typeof b&&(h=h||v,v=b,b={}),h=h||this,"function"==typeof y.subscription||y.version){case!0:m="_subscriptions";break;case"3.0.0":m="F";break;case"3.1.0":m="H";break;case"3.2.0":m="M";break;case"3.3.0":m="G";break;case"3.4.0":case"3.4.1":m="K";break;case"3.4.2":m="F";break;case"3.5.0":m="S";break;case"3.5.1":m="U";break;default:throw"Unsupported Knockout version. Only v3.0.0 to v3.5.1 finals are supported when minified. Current version is "+y.version}return"function"!=typeof p||y.isSubscribable(p)?(g(p,null,[]),{dispose:function(){g(p,null,[],!0)}}):y.computed(p,v,b)}})("function"==typeof t&&"object"==typeof o&&"object"==typeof n?"undefined"!=typeof window?window.ko:void 0!==e?e.ko:null:window.ko),window.foo="1.4.2"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){t.exports={lex:e("./lib/lexer"),parse:e("./lib/parser"),stringify:e("./lib/stringify")}},{"./lib/lexer":18,"./lib/parser":19,"./lib/stringify":20}],17:[function(e,t,n){(function(n){t.exports=function(e){return function(e){var t=[].slice.call(arguments,1);t.unshift("["+e+"]"),n.stderr.write(t.join(" ")+"\n")}.bind(null,e)}}).call(this,e("_process"))},{_process:22}],18:[function(e,t,n){e("./debug")("lex");t.exports=function(n){var e,t="",o=0,i=-1,r=0,a=1,l="before-selector",s=[l],d={},c=[],u=["media","keyframes",{name:"-webkit-keyframes",type:"keyframes",prefix:"-webkit-"},{name:"-moz-keyframes",type:"keyframes",prefix:"-moz-"},{name:"-ms-keyframes",type:"keyframes",prefix:"-ms-"},{name:"-o-keyframes",type:"keyframes",prefix:"-o-"},"font-face",{name:"import",state:"before-at-value"},{name:"charset",state:"before-at-value"},"supports","viewport",{name:"namespace",state:"before-at-value"},"document",{name:"-moz-document",type:"document",prefix:"-moz-"},"page"];function f(){return y(),n[i]}function p(e){return e?s[s.length-1-e]:l}function b(e){return e===v(1)}function v(e){return n[i+(e||1)]}function h(){var e=s.pop();return l=s[s.length-1],e}function g(e){return l=e,s.push(l),s.length}function m(e){var t=l;return s[s.length-1]=l=e,t}function y(e){if(1==(e||1))"\n"==n[i]?(a++,o=1):o++,i++;else{var t=n.slice(i,i+e).split("\n");1<t.length&&(a+=t.length-1,o=1),o+=t[t.length-1].length,i+=e}}function w(){d.end={line:a,col:o},c.push(d),t="",d={}}function x(e){d={type:e,start:{line:a,col:o}}}for(;e=f();)switch(e){case" ":switch(p()){case"selector":case"value":case"value-paren":case"at-group":case"at-value":case"comment":case"double-string":case"single-string":t+=e}break;case"\n":case"\t":case"\r":case"\f":switch(p()){case"value":case"value-paren":case"at-group":case"comment":case"single-string":case"double-string":case"selector":t+=e;break;case"at-value":"\n"===e&&(d.value=t.trim(),w(),h())}break;case":":switch(p()){case"name":d.name=t.trim(),t="",m("before-value");break;case"before-selector":t+=e,x("selector"),g("selector");break;case"before-value":m("value"),t+=e;break;default:t+=e}break;case";":switch(p()){case"name":case"before-value":case"value":0<t.trim().length&&(d.value=t.trim(),w()),m("before-name");break;case"value-paren":t+=e;break;case"at-value":d.value=t.trim(),w(),h();break;case"before-name":break;default:t+=e}break;case"{":switch(p()){case"selector":if("\\"===v(-1)){t+=e;break}d.text=t.trim(),w(),m("before-name"),r+=1;break;case"at-group":switch(d.name=t.trim(),d.type){case"font-face":case"viewport":case"page":g("before-name");break;default:g("before-selector")}w(),r+=1;break;case"name":case"at-rule":d.name=t.trim(),w(),g("before-name"),r+=1;break;case"comment":case"double-string":case"single-string":t+=e;break;case"before-value":m("value"),t+=e}break;case"}":switch(p()){case"before-name":case"name":case"before-value":case"value":t&&(d.value=t.trim()),d.name&&d.value&&w(),x("end"),w(),h(),"at-group"===p()&&(x("at-group-end"),w(),h()),0<r&&(r-=1);break;case"at-group":case"before-selector":case"selector":if("\\"===v(-1)){t+=e;break}0<r&&"at-group"===p(1)&&(x("at-group-end"),w()),1<r&&h(),0<r&&(r-=1);break;case"double-string":case"single-string":case"comment":t+=e}break;case'"':case"'":switch(p()){case"double-string":'"'===e&&"\\"!==v(-1)&&h();break;case"single-string":"'"===e&&"\\"!==v(-1)&&h();break;case"before-at-value":m("at-value"),g('"'===e?"double-string":"single-string");break;case"before-value":m("value"),g('"'===e?"double-string":"single-string");break;case"comment":break;default:"\\"!==v(-1)&&g('"'===e?"double-string":"single-string")}t+=e;break;case"/":switch(p()){case"comment":case"double-string":case"single-string":t+=e;break;case"before-value":case"selector":case"name":case"value":if(b("*")){var k=(A="*/",void 0,0<($=n.slice(i).indexOf(A))&&$);k&&y(k+1)}else"before-value"==p()&&m("value"),t+=e;break;default:b("*")?(x("comment"),g("comment"),y()):t+=e}break;case"*":switch(p()){case"comment":b("/")?(d.text=t,y(),w(),h()):t+=e;break;case"before-selector":t+=e,x("selector"),g("selector");break;case"before-value":m("value"),t+=e;break;default:t+=e}break;case"@":switch(p()){case"comment":case"double-string":case"single-string":t+=e;break;case"before-value":m("value"),t+=e;break;default:for(var _,O,S=!1,j=0,C=u.length;!S&&j<C;++j)_=(O=u[j]).name||O,void 0,E=i+1,(T=_)===n.slice(E,E+T.length)&&(S=!0,x(_),g(O.state||"at-group"),y(_.length),O.prefix&&(d.prefix=O.prefix),O.type&&(d.type=O.type));S||(t+=e)}break;case"(":switch(p()){case"value":g("value-paren");break;case"before-value":m("value")}t+=e;break;case")":switch(p()){case"value-paren":h();break;case"before-value":m("value")}t+=e;break;default:switch(p()){case"before-selector":x("selector"),g("selector");break;case"before-name":x("property"),m("name");break;case"before-value":m("value");break;case"before-at-value":m("at-value")}t+=e}var T,E;var A,$;return c}},{"./debug":17}],19:[function(e,t,n){var r,a,l,s,d=!1,c=e("./debug")("parse"),u=e("./lexer");function o(e,t){var n;t||(t={});for(var o=["type","name","value"],i={},r=0;r<o.length;++r)e[n=o[r]]&&(i[n]=t[n]||e[n]);for(o=Object.keys(t),r=0;r<o.length;++r)i[n=o[r]]||(i[n]=t[n]);return l&&(i.position={start:e.start,end:e.end}),d&&c("astNode:",JSON.stringify(i,null,2)),i}function f(){var e=s.shift();return d&&c("next:",JSON.stringify(e,null,2)),e}function i(e){a+=1;var t={};switch(e.type){case"font-face":case"viewport":t.declarations=v();break;case"page":t.prefix=e.prefix,t.declarations=v();break;default:t.prefix=e.prefix,t.rules=b(function(){return a})}return o(e,t)}function p(e){switch(e.type){case"property":return function(e){return o(e)}(e);case"selector":return function(e){return o(e,{type:"rule",selectors:e.text.split(",").map(function(e){return e.trim()}),declarations:v()})}(e);case"at-group-end":return void(a-=1);case"media":case"keyframes":return i(e);case"comment":if(r)return function(e){return o(e,{text:e.text})}(e);break;case"charset":return function(e){return o(e)}(e);case"import":return function(e){return o(e)}(e);case"namespace":return function(e){return o(e)}(e);case"font-face":case"supports":case"viewport":case"document":case"page":return i(e)}d&&c("parseToken: unexpected token:",JSON.stringify(e))}function b(e){for(var t,n,o=[];(n=f())&&e&&e(n);)(t=p(n))&&o.push(t);return n&&"end"!==n.type&&s.unshift(n),o}function v(){return b(function(e){return"property"===e.type||"comment"===e.type})}t.exports=function(e,t){var n;t||(t={}),r=!!t.comments,l=!!t.position,a=0,s=Array.isArray(e)?e.slice():u(e);var o,i=[];for(;o=f();)(n=p(o))&&i.push(n);return{type:"stylesheet",stylesheet:{rules:i}}}},{"./debug":17,"./lexer":18}],20:[function(e,t,n){var o,i,r,a,l,s,d=!1,c=e("./debug")("stringify");function u(e){if(!e)return i?"":Array(a).join(r||"");a+=e}function f(e){var t="",n=e.prefix||"";e.name&&(t=" "+e.name);var o="page"!==e.type;return"@"+n+e.type+t+s+h(e,o)+l}function p(e){return o?"/*"+(e.text||"")+"*/"+l:""}function b(e){var t;return e.selectors?t=e.selectors.join(","+l):(t="@"+e.type,t+=e.name?" "+e.name:""),u()+t+s+h(e)+l}function v(e,o){return e.reduce(function(e,t){var n="comment"===t.type?p(t):o(t);return n&&e.push(n),e},[])}function h(e,t){var n=e.declarations,o=g;return e.rules&&(n=e.rules,o=b),(n=function(e,t){if(!e)return"";u(1);var n=v(e,t);return u(-1),n.length?n.join(l):""}(n,o))&&(n=l+n+(t?"":l)),"{"+n+u()+"}"}function g(e){if("property"===e.type)return function(e){var t=e.name?e.name+":"+s:"";return u()+t+e.value+";"}(e);d&&c("stringifyDeclaration: unexpected node:",JSON.stringify(e))}function m(e){switch(e.type){case"rule":return b(e);case"media":case"keyframes":return f(e);case"comment":return p(e);case"import":case"charset":case"namespace":return function(e){return"@"+e.type+" "+e.value+";"+l}(e);case"font-face":case"supports":case"viewport":case"document":case"page":return f(e)}d&&c("stringifyNode: unexpected node: "+JSON.stringify(e))}t.exports=function(e,t){t||(t={}),r=t.indentation||"",i=!!t.compress,o=!!t.comments,a=1,i?l=s="":(l="\n",s=" ");return v(e.stylesheet.rules,m).join("\n").trim()}},{"./debug":17}],21:[function(e,t,n){"use strict";var s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var a in n=Object(arguments[r]))d.call(n,a)&&(i[a]=n[a]);if(s){o=s(n);for(var l=0;l<o.length;l++)c.call(n,o[l])&&(i[o[l]]=n[o[l]])}}return i}},{}],22:[function(e,t,n){var o,i,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var d,c=[],u=!1,f=-1;function p(){u&&d&&(u=!1,d.length?c=d.concat(c):f=-1,c.length&&b())}function b(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(d=c,c=[];++f<t;)d&&d[f].run();f=-1,t=c.length}d=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),1!==c.length||u||s(b)},v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],23:[function(e,t,n){"use strict";var o=/([-.*+?^${}()|[\]\/\\])/g,i=/\\/g,x=function(e){return(e+"").replace(o,"\\$1")},k=function(e){return(e+"").replace(i,"")},r=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+x(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),_=function(e){this.combinator=e||" ",this.tag="*"};_.prototype.toString=function(){if(!this.raw){var e,t,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(e=0;t=this.attributes[e++];)n+="["+t.name+(t.operator?t.operator+'"'+t.value+'"':"")+"]";if(this.pseudos)for(e=0;t=this.pseudos[e++];)n+=":"+t.name,t.value&&(n+="("+t.value+")");this.raw=n}return this.raw};var O=function(){this.length=0};O.prototype.toString=function(){if(!this.raw){for(var e,t="",n=0;e=this[n++];)1!==n&&(t+=" ")," "!==e.combinator&&(t+=e.combinator+" "),t+=e;this.raw=t}return this.raw};var a=function(e,t,n,o,i,r,a,l,s,d,c,u,f,p,b,v){var h,g;if((t||!this.length)&&(h=this[this.length++]=new O,t))return"";if(h||(h=this[this.length-1]),(n||o||!h.length)&&(g=h[h.length++]=new _(n)),g||(g=h[h.length-1]),i)g.tag=k(i);else if(r)g.id=k(r);else if(a){var m=k(a),y=g.classes||(g.classes={});if(!y[m]){y[m]=x(a);var w=g.classList||(g.classList=[]);w.push(m),w.sort()}}else f?(v=v||b,(g.pseudos||(g.pseudos=[])).push({type:1==u.length?"class":"element",name:k(f),escapedName:x(f),value:v?k(v):null,escapedValue:v?x(v):null})):l&&(c=c?x(c):null,(g.attributes||(g.attributes=[])).push({operator:s,name:k(l),escapedName:x(l),value:c?k(c):null,escapedValue:c?x(c):null}));return""},l=function(e){this.length=0;for(var t,n=this,o=e;e;){if((t=e.replace(r,function(){return a.apply(n,arguments)}))===e)throw new Error(o+" is an invalid expression");e=t}};l.prototype.toString=function(){if(!this.raw){for(var e,t=[],n=0;e=this[n++];)t.push(e);this.raw=t.join(", ")}return this.raw};var s={};t.exports=function(e){return null==e?null:(e=(""+e).replace(/^\s+|\s+$/g,""),s[e]||(s[e]=new l(e)))}},{}],24:[function(e,L,t){!function(d){var s=/^\s+/,c=/\s+$/,o=0,a=d.round,u=d.min,f=d.max,e=d.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=null,i=null,r=null,a=!1,l=!1;"string"==typeof e&&(e=function(e){e=e.replace(s,"").replace(c,"").toLowerCase();var t,n=!1;if(j[e])e=j[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=R.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=R.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=R.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=R.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=R.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=R.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=R.hex8.exec(e))return{r:$(t[1]),g:$(t[2]),b:$(t[3]),a:B(t[4]),format:n?"name":"hex8"};if(t=R.hex6.exec(e))return{r:$(t[1]),g:$(t[2]),b:$(t[3]),format:n?"name":"hex"};if(t=R.hex4.exec(e))return{r:$(t[1]+""+t[1]),g:$(t[2]+""+t[2]),b:$(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=R.hex3.exec(e))return{r:$(t[1]+""+t[1]),g:$(t[2]+""+t[2]),b:$(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(F(e.r)&&F(e.g)&&F(e.b)?(t=function(e,t,n){return{r:255*E(e,255),g:255*E(t,255),b:255*E(n,255)}}(e.r,e.g,e.b),a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):F(e.h)&&F(e.s)&&F(e.v)?(o=M(e.s),i=M(e.v),t=function(e,t,n){e=6*E(e,360),t=E(t,100),n=E(n,100);var o=d.floor(e),i=e-o,r=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),s=o%6;return{r:255*[n,a,r,r,l,n][s],g:255*[l,n,n,a,r,r][s],b:255*[r,r,l,n,n,a][s]}}(e.h,o,i),a=!0,l="hsv"):F(e.h)&&F(e.s)&&F(e.l)&&(o=M(e.s),r=M(e.l),t=function(e,t,n){var o,i,r;function a(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=E(e,360),t=E(t,100),n=E(n,100),0===t)o=i=r=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;o=a(s,l,e+1/3),i=a(s,l,e),r=a(s,l,e-1/3)}return{r:255*o,g:255*i,b:255*r}}(e.h,o,r),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=T(n),{ok:a,format:e.format||l,r:u(255,f(t.r,0)),g:u(255,f(t.g,0)),b:u(255,f(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=o++}function i(e,t,n){e=E(e,255),t=E(t,255),n=E(n,255);var o,i,r=f(e,t,n),a=u(e,t,n),l=(r+a)/2;if(r==a)o=i=0;else{var s=r-a;switch(i=.5<l?s/(2-r-a):s/(r+a),r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:i,l:l}}function r(e,t,n){e=E(e,255),t=E(t,255),n=E(n,255);var o,i,r=f(e,t,n),a=u(e,t,n),l=r,s=r-a;if(i=0===r?0:s/r,r==a)o=0;else{switch(r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:i,v:l}}function t(e,t,n,o){var i=[H(a(e).toString(16)),H(a(t).toString(16)),H(a(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(e,t,n,o){return[H(I(o)),H(a(e).toString(16)),H(a(t).toString(16)),H(a(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s-=t/100,n.s=A(n.s),p(n)}function b(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s+=t/100,n.s=A(n.s),p(n)}function v(e){return p(e).desaturate(100)}function h(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l+=t/100,n.l=A(n.l),p(n)}function g(e,t){t=0===t?0:t||10;var n=p(e).toRgb();return n.r=f(0,u(255,n.r-a(-t/100*255))),n.g=f(0,u(255,n.g-a(-t/100*255))),n.b=f(0,u(255,n.b-a(-t/100*255))),p(n)}function m(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l-=t/100,n.l=A(n.l),p(n)}function y(e,t){var n=p(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,p(n)}function w(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function x(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+120)%360,s:t.s,l:t.l}),p({h:(n+240)%360,s:t.s,l:t.l})]}function k(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+90)%360,s:t.s,l:t.l}),p({h:(n+180)%360,s:t.s,l:t.l}),p({h:(n+270)%360,s:t.s,l:t.l})]}function _(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function O(e,t,n){t=t||6,n=n||30;var o=p(e).toHsl(),i=360/n,r=[p(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,r.push(p(o));return r}function S(e,t){t=t||6;for(var n=p(e).toHsv(),o=n.h,i=n.s,r=n.v,a=[],l=1/t;t--;)a.push(p({h:o,s:i,v:r})),r=(r+l)%1;return a}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:d.pow((.055+e)/1.055,2.4))+.7152*(t<=.03928?t/12.92:d.pow((.055+t)/1.055,2.4))+.0722*(n<=.03928?n/12.92:d.pow((.055+n)/1.055,2.4))},setAlpha:function(e){return this._a=T(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),o=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),o=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,i){var r=[H(a(e).toString(16)),H(a(t).toString(16)),H(a(n).toString(16)),H(I(o))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*E(this._r,255))+"%",g:a(100*E(this._g,255))+"%",b:a(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*E(this._r,255))+"%, "+a(100*E(this._g,255))+"%, "+a(100*E(this._b,255))+"%)":"rgba("+a(100*E(this._r,255))+"%, "+a(100*E(this._g,255))+"%, "+a(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+l(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=p(e);n="#"+l(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&0<=this._a;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:M(e[o]));e=n}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:e(),g:e(),b:e()})},p.mix=function(e,t,n){n=0===n?0:n||50;var o=p(e).toRgb(),i=p(t).toRgb(),r=n/100;return p({r:(i.r-o.r)*r+o.r,g:(i.g-o.g)*r+o.g,b:(i.b-o.b)*r+o.b,a:(i.a-o.a)*r+o.a})},p.readability=function(e,t){var n=p(e),o=p(t);return(d.max(n.getLuminance(),o.getLuminance())+.05)/(d.min(n.getLuminance(),o.getLuminance())+.05)},p.isReadable=function(e,t,n){var o,i,r=p.readability(e,t);switch(i=!1,(o=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+o.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},p.mostReadable=function(e,t,n){var o,i,r,a,l=null,s=0;i=(n=n||{}).includeFallbackColors,r=n.level,a=n.size;for(var d=0;d<t.length;d++)s<(o=p.readability(e,t[d]))&&(s=o,l=p(t[d]));return p.isReadable(e,l,{level:r,size:a})||!i?l:(n.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],n))};var j=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=p.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(j);function T(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function E(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=u(t,f(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),d.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function A(e){return u(1,f(0,e))}function $(e){return parseInt(e,16)}function H(e){return 1==e.length?"0"+e:""+e}function M(e){return e<=1&&(e=100*e+"%"),e}function I(e){return d.round(255*parseFloat(e)).toString(16)}function B(e){return $(e)/255}var D,P,N,R=(P="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",N="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function F(e){return!!R.CSS_UNIT.exec(e)}void 0!==L&&L.exports?L.exports=p:window.tinycolor=p}(Math)},{}],25:[function(e,n,t){(function(e){var t;t=function(_){return function(){var h,t,g,m=0,o="error",i="info",r="success",a="warning",e={clear:function(e,t){var n=x();h||y(n),l(e,n,t)||function(e){for(var t=h.children(),n=t.length-1;0<=n;n--)l(_(t[n]),e)}(n)},remove:function(e){var t=x();h||y(t),e&&0===_(":focus",e).length?k(e):h.children().length&&h.remove()},error:function(e,t,n){return s({type:o,iconClass:x().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:y,info:function(e,t,n){return s({type:i,iconClass:x().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,n){return s({type:r,iconClass:x().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.4",warning:function(e,t,n){return s({type:a,iconClass:x().iconClasses.warning,message:e,optionsOverride:n,title:t})}};return e;function y(e,t){return e||(e=x()),(h=_("#"+e.containerId)).length||t&&(h=function(e){return(h=_("<div/>").attr("id",e.containerId).addClass(e.positionClass)).appendTo(_(e.target)),h}(e)),h}function l(e,t,n){var o=!(!n||!n.force)&&n.force;return!(!e||!o&&0!==_(":focus",e).length||(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){k(e)}}),0))}function w(e){t&&t(e)}function s(t){var i=x(),e=t.iconClass||i.iconClass;if(void 0!==t.optionsOverride&&(i=_.extend(i,t.optionsOverride),e=t.optionsOverride.iconClass||e),!function(e,t){if(e.preventDuplicates){if(t.message===g)return!0;g=t.message}return!1}(i,t)){m++,h=y(i,!0);var r=null,a=_("<div/>"),n=_("<div/>"),o=_("<div/>"),l=_("<div/>"),s=_(i.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},c={toastId:m,state:"visible",startTime:new Date,options:i,map:t};return t.iconClass&&a.addClass(i.toastClass).addClass(e),function(){if(t.title){var e=t.title;i.escapeHtml&&(e=u(t.title)),n.append(e).addClass(i.titleClass),a.append(n)}}(),function(){if(t.message){var e=t.message;i.escapeHtml&&(e=u(t.message)),o.append(e).addClass(i.messageClass),a.append(o)}}(),i.closeButton&&(s.addClass(i.closeClass).attr("role","button"),a.prepend(s)),i.progressBar&&(l.addClass(i.progressClass),a.prepend(l)),i.rtl&&a.addClass("rtl"),i.newestOnTop?h.prepend(a):h.append(a),function(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}a.attr("aria-live",e)}(),a.hide(),a[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),0<i.timeOut&&(r=setTimeout(f,i.timeOut),d.maxHideTime=parseFloat(i.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,i.progressBar&&(d.intervalId=setInterval(v,10))),i.closeOnHover&&a.hover(b,p),!i.onclick&&i.tapToDismiss&&a.click(f),i.closeButton&&s&&s.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(e),f(!0)}),i.onclick&&a.click(function(e){i.onclick(e),f()}),w(c),i.debug&&console&&console.log(c),a}function u(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(e){var t=e&&!1!==i.closeMethod?i.closeMethod:i.hideMethod,n=e&&!1!==i.closeDuration?i.closeDuration:i.hideDuration,o=e&&!1!==i.closeEasing?i.closeEasing:i.hideEasing;if(!_(":focus",a).length||e)return clearTimeout(d.intervalId),a[t]({duration:n,easing:o,complete:function(){k(a),clearTimeout(r),i.onHidden&&"hidden"!==c.state&&i.onHidden(),c.state="hidden",c.endTime=new Date,w(c)}})}function p(){(0<i.timeOut||0<i.extendedTimeOut)&&(r=setTimeout(f,i.extendedTimeOut),d.maxHideTime=parseFloat(i.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime)}function b(){clearTimeout(r),d.hideEta=0,a.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})}function v(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;l.width(e+"%")}}function x(){return _.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function k(e){h||(h=y()),e.is(":visible")||(e.remove(),e=null,0===h.children().length&&(h.remove(),g=void 0))}}()},void 0!==n&&n.exports?n.exports=t("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null):window.toastr=t(window.jQuery)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],27:[function(j,e,C){(function(o,i){var l=/%[sdj%]/g;C.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,i=o.length,r=String(e).replace(l,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),a=o[n];n<i;a=o[++n])g(a)||!c(a)?r+=" "+a:r+=" "+s(a);return r},C.deprecate=function(e,t){if(w(i.process))return function(){return C.deprecate(e,t).apply(this,arguments)};if(!0===o.noDeprecation)return e;var n=!1;return function(){if(!n){if(o.throwDeprecation)throw new Error(t);o.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function s(e,t){var n={seen:[],stylize:d};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&C._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),f(n,e,n.depth)}function a(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function d(e,t){return e}function f(t,n,o){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==C.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(o,t);return y(e)||(e=f(t,e,o)),e}var i=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(t,n);if(i)return i;var r=Object.keys(n),a=function(e){var n={};return e.forEach(function(e,t){n[e]=!0}),n}(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(n)),_(n)&&(0<=r.indexOf("message")||0<=r.indexOf("description")))return p(n);if(0===r.length){if(O(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return p(n)}var s,d="",c=!1,u=["{","}"];(v(n)&&(c=!0,u=["[","]"]),O(n))&&(d=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(d=" "+RegExp.prototype.toString.call(n)),k(n)&&(d=" "+Date.prototype.toUTCString.call(n)),_(n)&&(d=" "+p(n)),0!==r.length||c&&0!=n.length?o<0?x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),s=c?function(t,n,o,i,e){for(var r=[],a=0,l=n.length;a<l;++a)S(n,String(a))?r.push(b(t,n,o,i,String(a),!0)):r.push("");return e.forEach(function(e){e.match(/^\d+$/)||r.push(b(t,n,o,i,e,!0))}),r}(t,n,o,a,r):r.map(function(e){return b(t,n,o,a,e,c)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(s,d,u)):u[0]+d+u[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function b(e,t,n,o,i,r){var a,l,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?l=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(l=e.stylize("[Setter]","special")),S(o,i)||(a="["+i+"]"),l||(e.seen.indexOf(s.value)<0?-1<(l=g(n)?f(e,s.value,null):f(e,s.value,n-1)).indexOf("\n")&&(l=r?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n")):l=e.stylize("[Circular]","special")),w(a)){if(r&&i.match(/^\d+$/))return l;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+l}function v(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function w(e){return void 0===e}function x(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"==typeof e&&null!==e}function k(e){return c(e)&&"[object Date]"===t(e)}function _(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function O(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}C.debuglog=function(t){if(w(e)&&(e=o.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=o.pid;r[t]=function(){var e=C.format.apply(C,arguments);console.error("%s %d: %s",t,n,e)}}else r[t]=function(){};return r[t]},(C.inspect=s).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},C.isArray=v,C.isBoolean=h,C.isNull=g,C.isNullOrUndefined=function(e){return null==e},C.isNumber=m,C.isString=y,C.isSymbol=function(e){return"symbol"==typeof e},C.isUndefined=w,C.isRegExp=x,C.isObject=c,C.isDate=k,C.isError=_,C.isFunction=O,C.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},C.isBuffer=j("./support/isBuffer");var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C.log=function(){console.log("%s - %s",function(){var e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":");return[e.getDate(),u[e.getMonth()],t].join(" ")}(),C.format.apply(C,arguments))},C.inherits=j("inherits"),C._extend=function(e,t){if(!t||!c(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}).call(this,j("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":26,_process:22,inherits:8}],28:[function(e,t,n){(function(s){"use strict";var d=e("./template-loader.js"),c=e("console-browserify"),u="undefined"!=typeof window?window.ko:void 0!==s?s.ko:null,f="undefined"!=typeof window?window.jQuery:void 0!==s?s.jQuery:null;e("./ko-bindings.js");var p=e("./timed-call.js").timedCall,b=e("./undomanager/undomain.js"),v=e("./ext/color.js"),h=e("./ext/util.js"),g=e("./ext/inliner.js"),a=e("./ext/localstorage.js");if(void 0===u)throw"Cannot find knockout.js library!";if(void 0===f)throw"Cannot find jquery library!";function l(e){var t=s.document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}function m(e,t){var n=-1==e.indexOf("?")?"?":"&",o=e;for(var i in t)t.hasOwnProperty(i)&&(o+=n+i+"="+encodeURIComponent(t[i]),n="&");return o}var y=function(i,e,t,n,o){d.fixPageEvents();var r=[function(o){i&&i.strings&&(o.t=function(e,t){var n=i.strings[e];return void 0===n&&(c.warn("Missing translation string for",e,": using default string"),n=e),o.tt(n,t)})},b(p),v,h,g];if(void 0!==o)for(var a=0;a<o.length;a++)r.push(o[a]);r.push(function(e){var t={messages:{unknownError:e.t("Unknown error"),uploadedBytes:e.t("Uploaded bytes exceed file size"),maxNumberOfFiles:e.t("Maximum number of files exceeded"),acceptFileTypes:e.t("File type not allowed"),maxFileSize:e.t("File is too large"),minFileSize:e.t("File is too small"),post_max_size:e.t("The uploaded file exceeds the post_max_size directive in php.ini"),max_file_size:e.t("File is too big"),min_file_size:e.t("File is too small"),accept_file_types:e.t("Filetype not allowed"),max_number_of_files:e.t("Maximum number of files exceeded"),max_width:e.t("Image exceeds maximum width"),min_width:e.t("Image requires a minimum width"),max_height:e.t("Image exceeds maximum height"),min_height:e.t("Image requires a minimum height"),abort:e.t("File upload aborted"),image_resize:e.t("Failed to resize image"),generic:e.t("Unexpected upload error")}};i&&i.fileuploadConfig&&(t=f.extend(!0,t,i.fileuploadConfig)),u.bindingHandlers.fileupload.extendOptions=t});var l=i.fileuploadConfig?i.fileuploadConfig.url:"/upload/";!function(s,e){e.bindingHandlers.wysiwygSrc.convertedUrl=function(e,t,n,o){var i=s.imgProcessorBackend?s.imgProcessorBackend:"./upload",r=i.match(/^(https?:\/\/[^\/]*\/).*$/),a=e.match(/^(https?:\/\/[^\/]*\/).*$/);if(null===r||null!==a&&r[1]==a[1])return i.indexOf("?"),m(i,{src:e,method:t,params:n+","+o});c.log("Cannot apply backend image resizing to non-local resources ",e,t,n,o,r,a);var l={method:t,width:n};return null!==o&&(l.height=o),m(e,l)},e.bindingHandlers.wysiwygSrc.placeholderUrl=function(e,t,n){return m(s.imgProcessorBackend?s.imgProcessorBackend:"./upload",{method:"placeholder",params:e+","+t})},s&&s.tinymceConfig&&(e.bindingHandlers.wysiwyg.standardOptions=s.tinymceConfig),s&&s.tinymceConfigFull&&(e.bindingHandlers.wysiwyg.fullOptions=s.tinymceConfigFull)}(i,u),f("\x3c!-- ko template: 'main' --\x3e\x3c!-- /ko --\x3e").appendTo(s.document.body),void 0===e&&void 0!==t&&(e=t.template),d.load(p,e,t,n,r,l)};t.exports={isCompatible:d.isCompatible,init:function(e,t){var n=s.location.hash?s.location.href.split("#")[1]:void 0;if(e&&(e.template||e.data))if(e.data){var o="string"==typeof o?JSON.parse(e.data):e.data;y(e,void 0,o.metadata,o.content,t)}else y(e,e.template,void 0,void 0,t);else if(n&&7==n.length)!function(e,t,n){try{var o=a(t,e.emailProcessorBackend),i=void 0!==n?n:[];i.push(o.extension);var r=l(o.metadata.template);y(e,r,o.metadata,o.model,i)}catch(e){c.error("TODO not found ",t,e)}}(e,n,t);else{if(!n)return!1;y(e,l(n),void 0,void 0,t)}return!0},start:y}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ext/color.js":61,"./ext/inliner.js":62,"./ext/localstorage.js":63,"./ext/util.js":64,"./ko-bindings.js":65,"./template-loader.js":66,"./timed-call.js":67,"./undomanager/undomain.js":68,"console-browserify":6}],29:[function(t,e,n){(function(e){"use strict";var f="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,p=t("console-browserify");f.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(c,u){!function(t){try{var e=c.contentDocument;e.open(),e.write(f.bindingHandlers.bindIframe.tpl),e.close();try{var n=e.body;if(n){for(var o=c.contentWindow.parent.document.getElementsByTagName("script"),i=0;i<o.length;i++)"text/html"==o[i].getAttribute("type")&&o[i].getAttribute("id")&&(a=e,l=o[i].getAttribute("id"),s=o[i].innerHTML,d=void 0,(d=a.createElement("script")).setAttribute("type","text/html"),d.setAttribute("id",l),d.text=s,a.body.appendChild(d));var r=e.getElementsByTagName("HTML");f.utils.domNodeDisposal.addDisposeCallback(c,function(){f.cleanNode(r[0]||n)}),f.applyBindings(u(),r[0]||n)}else p.log("no iframedoc",t)}catch(e){throw p.log("error reading iframe.body",e,t),e}}catch(e){throw p.log("error reading iframe contentDocument",e,t),e}var a,l,s,d}("first call")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],30:[function(e,t,n){(function(t){"use strict";var d="undefined"!=typeof window?window.ko:void 0!==t?t.ko:null,c=e("console-browserify");d.bindingHandlers.withProperties={init:function(e,t,n,o,i){var r=i.createChildContext(i.$rawData,null,function(e){d.utils.extend(e,t())});return d.applyBindingsToDescendants(r,e),{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.withProperties=!0,d.bindingHandlers.log={init:function(e,t,n,o,i){c.log("log",t())}},d.bindingHandlers.block={templateExists:function(e){return!!t.document.getElementById(e)},_chooseTemplate:function(e,t,n,o){var i=t+"-"+n;if(d.bindingHandlers.block.templateExists(i))return i;if(null!=o)return d.bindingHandlers.block._chooseTemplate(e,t,o);var r=e?"array":"object-"+n;if(d.bindingHandlers.block.templateExists(r))return r;throw"cannot find template for "+i+"/"+r},_displayMode:function(e,t){var n=void 0!==e.type?d.utils.unwrapObservable(e.type):"notablock-"+typeof e,o=void 0!==e.splice,i=t.templateMode?t.templateMode:"show";return d.bindingHandlers.block._chooseTemplate(o,n,i,t.templateModeFallback)},_makeTemplateValueAccessor:function(l,s){return function(){var e,t,n=l(),o=d.utils.peekObservable(n);if(!o||"object"!=typeof o.data&&"function"!=typeof o.data)e=n;else if(e=o.data,void 0!==o.template){var i=d.utils.unwrapObservable(o.template),r=s.templateMode?s.templateMode:"show";t=d.bindingHandlers.block._chooseTemplate(!1,i,r,s.templateModeFallback)}var a=d.utils.unwrapObservable(e);if(d.isObservable(a)&&c.log("doubleObservable",a),void 0===t)if(void 0===e)t="empty";else try{t=d.bindingHandlers.block._displayMode(a,s)}catch(e){throw c.log(e,a,s.$data,s.templateMode),e}return{name:t,data:e,templateEngine:d.nativeTemplateEngine.instance}}},init:function(e,t,n,o,i){void 0===t()&&c.log("found a null block: check ending commas in arrays defs in IE");var r=d.bindingHandlers.block._makeTemplateValueAccessor(t,i);return d.bindingHandlers.template.init(e,r)},update:function(e,t,n,o,i){var r=d.bindingHandlers.block._makeTemplateValueAccessor(t,i);return d.bindingHandlers.template.update(e,r,n,o,i)}},d.expressionRewriting.bindingRewriteValidators.block=!1,d.virtualElements.allowedBindings.block=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],31:[function(e,t,n){"use strict";t.exports=e("./string-template.js")},{"./string-template.js":46}],32:[function(o,e,t){(function(e){"use strict";o("evol-colorpicker");var l="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,s="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t="undefined"!=typeof window?window.kojqui:void 0!==e?e.kojqui:null,n=function(){t.BindingHandler.call(this,"colorpicker")};((n.prototype=t.utils.createObject(t.BindingHandler.prototype)).constructor=n).prototype.init=function(n,e,t){var o=e(),i=o.color,r=s.computed({read:i,write:i,disposeWhenNodeIsRemoved:n});s.bindingHandlers.value.init(n,function(){return r},t);var a=function(e,t){void 0!==t&&r(t)};l(n).on("change.color",a),s.computed({read:function(){var e={color:s.utils.unwrapObservable(r),showOn:"button"};for(var t in o)"color"!==t&&o.hasOwnProperty(t)&&(e[t]=s.utils.unwrapObservable(o[t]));l(n).colorpicker(e)},disposeWhenNodeIsRemoved:n}),s.utils.domNodeDisposal.addDisposeCallback(n,function(){l(n).off("change.color",a),l(n).colorpicker("destroy")})},t.utils.register(n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"evol-colorpicker":7}],33:[function(e,t,n){(function(e){"use strict";var i="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;i.bindingHandlers.cssText={update:function(t,e,n){var o=i.utils.unwrapObservable(e());try{t.innerText=o}catch(e){t.styleSheet||(t.innerHTML="a{}"),t.styleSheet.cssText=o}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(o,e,t){(function(e){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;o("console-browserify");t.bindingHandlers.focusable={focus:function(){},blur:function(){},init:function(e){t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("focusin",t.bindingHandlers.focusable.focus),n(e).off("focusout",t.bindingHandlers.focusable.blur)}),n(e).on("focusin",t.bindingHandlers.focusable.focus),n(e).on("focusout",t.bindingHandlers.focusable.blur)}},t.bindingHandlers.scrollable={scroll:function(){},init:function(e){t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("scroll",t.bindingHandlers.scrollable.scroll)}),n(e).on("scroll",t.bindingHandlers.scrollable.scroll)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],35:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;!function(d,c){d.utils.unwrapObservable;var u=d.utils.domData.get;d.utils.domData.set,d.bindingHandlers.extdroppable={init:function(e,t,n,o,i){var r,a=c(e),l=d.utils.unwrapObservable(t())||{},s={};c.extend(!0,s,d.bindingHandlers.extdroppable),l.data?(l.options&&s.options&&(d.utils.extend(s.options,l.options),delete l.options),d.utils.extend(s,l)):s.data=l,r=s.options.drop,a.droppable(d.utils.extend(s.options,{drop:function(e,t){var n=t.draggable[0],o=u(n,"ko_sortItem")||u(n,"ko_dragItem");o&&(o.clone&&(o=o.clone()),s.dragged&&(o=s.dragged.call(this,o,e,t)||o),s.data&&s.data(o)),r&&r.apply(this,arguments)}})),void 0!==s.isEnabled&&d.computed({read:function(){a.droppable(d.utils.unwrapObservable(s.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:e})},update:function(e,t,n,o,i){},targetIndex:null,afterMove:null,beforeMove:null,options:{}}}("undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t.extenders.paging=function(i,e){var r=t.observable(e||10),a=t.observable(1);return i.pageSize=t.computed({read:r,write:function(e){r(0<e?e:10)}}),i.currentPage=t.computed({read:a,write:function(e){e>i.pageCount()?a(i.pageCount()):a(e<=0?1:e)}}),i.pageCount=t.computed(function(){return Math.ceil(i().length/i.pageSize())||1}),i.currentPageData=t.computed(function(){var e=r(),t=a(),n=e*(t-1),o=e*t;return i().slice(n,o)}),i.moveFirst=function(){i.currentPage(1)},i.movePrevious=function(){i.currentPage(i.currentPage()-1)},i.moveNext=function(){i.currentPage(i.currentPage()+1)},i.moveLast=function(){i.currentPage(i.pageCount())},i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(n,e,t){(function(a){"use strict";var l="undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null,s="undefined"!=typeof window?window.ko:void 0!==a?a.ko:null,e="undefined"!=typeof window?window.jQuery.ui.sortable:void 0!==a?a.jQuery.ui.sortable:null,t="undefined"!=typeof window?window.jQuery.ui.draggable:void 0!==a?a.jQuery.ui.draggable:null;n("console-browserify");if(n("knockout-sortable"),void 0===e)throw"Cannot find jquery-ui sortable widget dependency!";if(void 0===t)throw"Cannot find jquery-ui sortable widget dependency!";var d=function(e,t){e()?t.type==e()+"stop"&&e(!1):"dragstart"!=t.type&&"sortstart"!=t.type||e(t.type.substring(0,4))},r=function(e){return function(){var i=e();s.utils.peekObservable(i);s.utils.unwrapObservable(i),"undefined"==i.options&&(i.options={});var n=i.options.start;i.options.start=function(e,t){if(void 0!==i.dragging&&s.isWritableObservable(i.dragging)&&d(i.dragging,e),void 0!==i.dropContainer&&(i.scrollInterval=a.setInterval(function(){var e=l(i.dropContainer).scrollTop();l(i.dropContainer).scrollTop(e+i.adding)},20)),void 0!==n)return n(e,t)};var o=i.options.stop;i.options.stop=function(e,t){if(void 0!==i.dragging&&s.isWritableObservable(i.dragging)&&d(i.dragging,e),void 0!==i.dropContainer&&a.clearInterval(i.scrollInterval),void 0!==o)return o(e,t)};var r=i.options.drag;return i.options.drag=function(e,t){if(void 0!==i.dropContainer){var n=e.pageY-l(i.dropContainer).offset().top,o=n-l(i.dropContainer).height();i.adding=n<-20?-20:n<0?-10:n<10?-5:20<o?20:0<o?10:-10<o?5:0}if(void 0!==r)return r(e,t)},i}};s.bindingHandlers.extsortable={init:function(e,t,n,o,i){return s.bindingHandlers.sortable.init(e,r(t),n,o,i)},update:function(e,t,n,o,i){return s.bindingHandlers.sortable.update(e,r(t),n,o,i)}},s.bindingHandlers.extdraggable={init:function(e,t,n,o,i){return s.bindingHandlers.draggable.init(e,r(t),n,o,i)},update:function(e,t,n,o,i){return s.bindingHandlers.draggable.update(e,r(t),n,o,i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6,"knockout-sortable":14}],38:[function(e,t,n){(function(v){"use strict";var h="undefined"!=typeof window?window.jQuery:void 0!==v?v.jQuery:null,g="undefined"!=typeof window?window.ko:void 0!==v?v.ko:null,m=e("console-browserify");g.bindingHandlers.fudroppable={init:function(e,t){var n=t()||{},o={},i=function(e,t,n,o,i,r){e[t]?v.clearTimeout(e[t]):(void 0!==o&&n.classList.add(o),g.isWriteableObservable(i)&&!i()&&i(!0));var a=function(){e[t]=null,void 0!==o&&n.classList.remove(o),g.isWriteableObservable(i)&&i()&&i(!1)};"dragleave"==r.type?a():e[t]=v.setTimeout(a,500)};(n.active||n.activeClass)&&g.utils.registerEventHandler(v,"dragover",i.bind(void 0,o,"activeTimeout",e,n.activeClass,n.active)),n.hoverClass&&g.utils.registerEventHandler(e,"dragover dragenter dragleave",i.bind(void 0,o,"hoverTimeout",e,n.hoverClass,void 0))}},g.bindingHandlers.fileupload={extendOptions:{},remoteFilePreprocessor:function(e){return e},init:function(e,t){g.utils.domNodeDisposal.addDisposeCallback(e,function(){h(e).fileupload("destroy")}),!("WebkitAppearance"in v.document.documentElement.style)||"webkitNbspMode"in v.document.documentElement.style||"StyleMedia"in v?h(e).attr("title",""):h(e).attr("title"," ")},update:function(e,t){var s=t()||{},n=h(e),d=n.parents(".uploadzone"),o=s.data;s.data=void 0;var c=s.canvasPreview;g.utils.extend(s,{url:"/upload/",dataType:"json",dropZone:d.find(".mo-uploadzone")[0],autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:1048576,disableImageResize:/Android(?!.*Chrome)|Opera/.test(v.navigator.userAgent),previewMaxWidth:200,previewMaxHeight:200,previewCrop:!1,replaceFileInput:!1,messages:{unknownError:"Unknown error",uploadedBytes:"Uploaded bytes exceed file size",maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small",post_max_size:"The uploaded file exceeds the post_max_size directive in php.ini",max_file_size:"File is too big",min_file_size:"File is too small",accept_file_types:"Filetype not allowed",max_number_of_files:"Maximum number of files exceeded",max_width:"Image exceeds maximum width",min_width:"Image requires a minimum width",max_height:"Image exceeds maximum height",min_height:"Image requires a minimum height",abort:"File upload aborted",image_resize:"Failed to resize image",generic:"Unexpected upload error"}}),g.utils.extend(s,g.bindingHandlers.fileupload.extendOptions);var u=0,f="",p=function(){0==--u&&(o&&o(f),f="",c&&(d.find("img").show(),d.find("canvas").remove()),d.removeClass("uploading"),d.find(".progress-bar").css("width",0))},b=function(e){if("object"==typeof s.messages&&null!==s.messages){var t=e.match(/^([^ ]+)(.*)$/);if(t&&void 0!==s.messages[t[1]])return s.messages[t[1]]+t[2]}return e};n.fileupload(s);for(var i=["fileuploadadd","fileuploadprocessalways","fileuploadprogressall","fileuploaddone","fileuploadfail"],r=function(e,t){if("fileuploadadd"==e.type&&u++,"fileuploadfail"==e.type&&(m.log("fileuploadfail",e,t),s.onerror&&(""===t.errorThrown&&"error"==t.textStatus?s.onerror(b("generic")):s.onerror(b("generic ("+t.errorThrown+")"))),p()),"fileuploaddone"==e.type)if(void 0!==t.result.files[0].url){if(s.onfile)for(var n=0;n<t.result.files.length;n++)t.result.files[n]=g.bindingHandlers.fileupload.remoteFilePreprocessor(t.result.files[n]),s.onfile(t.result.files[n]);if(""===f&&(f=t.result.files[0].url),c){var o=new Image;o.onload=p,o.onerror=p,o.src=t.result.files[0].url}else p()}else void 0!==t.result.files[0].error?(m.log("remote error",e,t),s.onerror&&s.onerror(b(t.result.files[0].error))):(m.log("unexpected error",e,t),s.onerror&&s.onerror(b("generic (Unexpected Error retrieving uploaded file)"))),p();if("fileuploadprocessalways"==e.type){var i=t.index,r=t.files[i];if(r.preview&&0===i&&0===d.find("canvas").length){if(c){var a=h(r.preview).css("width","100%");d.find("img").hide(),d.prepend(a)}d.addClass("uploading"),d.find(".progress-bar").css("width",0)}r.error&&(s.onerror&&s.onerror(b(r.error)),p())}if("fileuploadprogressall"==e.type){var l=parseInt(t.loaded/t.total*100,10);d.find(".progress-bar").css("width",l+"%")}},a=i.length-1;0<=a;a--){var l=i[a];n.on(l,r)}h.support.fileInput||n.prop("disabled",!0).parent().addClass("disabled")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],39:[function(n,e,t){(function(e){"use strict";var t,l,c="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,s=n("console-browserify");function d(e,t){return c.computed({read:function(){return t()},write:function(e){t(e)},disposeWhenNodeIsRemoved:e})}if(c.bindingHandlers.letproxy={init:function(e,t,n,o,i){var r=t(),a={};for(var l in r)a[l]=d(e,r[l]);var s=i.extend(function(){return a});return c.applyBindingsToDescendants(s,e),{controlsDescendantBindings:!0}}},c.virtualElements.allowedBindings.letproxy=!0,c.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var n=0,o=e.length,i=[];n<o;n++){var r=e[n].cloneNode(!0);i.push(t?c.cleanNode(r):r)}return i},init:function(i,r,e,t,a){var l,s,d=r();return void 0===d.data.subsCount&&c.extenders.subscriptionsCount(d.data),c.computed(function(){var e,t,n=c.utils.unwrapObservable(r().data.subsCount),o=!s;t=-(void 0!==r().gutter?r().gutter:1),e=n+(l?t:0)>=c.utils.unwrapObservable(d.threshold),void 0!==r().not&&r().not&&(e=!e),(o||e!==l)&&(o&&c.computedContext.getDependenciesCount()&&(s=c.bindingHandlers.ifSubs.cloneNodes(c.virtualElements.childNodes(i),!0)),e?(o||c.virtualElements.setDomNodeChildren(i,c.bindingHandlers.ifSubs.cloneNodes(s)),c.applyBindingsToDescendants(a,i)):c.virtualElements.emptyNode(i),l=e)},null,{disposeWhenNodeIsRemoved:i}),{controlsDescendantBindings:!0}}},c.virtualElements.allowedBindings.ifSubs=!0,"function"==typeof c.subscription&&void 0!==c.isWritableObservable)t="beforeSubscriptionAdd",l="afterSubscriptionRemove";else if("3.2.0"==c.version)t="va",l="nb";else if("3.3.0"==c.version)t="ja",l="ua";else if("3.4.0"==c.version)t="sa",l="Ia";else if("3.4.1"==c.version)t="sa",l="Ia";else if("3.4.2"==c.version)t="ua",l="Ka";else if("3.5.0"==c.version)t="Qa",l="cb";else{if("3.5.1"!=c.version)throw"Unsupported minimized Knockout version "+c.version+" (supported DEBUG or minimized 3.2.0 ... 3.5.1)";t="Qa",l="hb"}c.extenders.subscriptionsCount=function(n,o,i){if(void 0===n.subsCount){n.subsCount=c.observable(n.getSubscriptionsCount()).extend({notify:"always"});var r=n[t],a=n[l];n[t]=function(e){r&&r.call(n,e);var t=n.getSubscriptionsCount()+1;void 0!==o&&t!=o&&void 0!==i&&t!=i||n.subsCount(t)},n[l]=function(e){a&&a.call(n,e);var t=n.getSubscriptionsCount();void 0!==o&&t!=o&&void 0!==i&&t!=i||n.subsCount(t)}}else s.log("already applied subscriptionCount to observable");return null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],40:[function(o,e,t){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,n="undefined"!=typeof window?window.jQuery.ui.spinner:void 0!==e?e.jQuery.ui.spinner:null;o("console-browserify");if(void 0===n)throw"Cannot find jquery-ui spinner widget dependency!";t.widget("ui.spinner",n,{_adjustValue:function(e){this._super(e);var t=this.options;return e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],41:[function(o,e,t){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,n=(o("console-browserify"),"undefined"!=typeof window?window.jQuery.ui.tabs:void 0!==e?e.jQuery.ui.tabs:null);if(void 0===n)throw"Cannot find jquery-ui tabs widget dependency!";t.widget("ui.tabs",n,{_isLocal:function(e){return"true"==e.getAttribute("data-local")||this._superApply(arguments)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],42:[function(e,t,n){(function(e){"use strict";var i="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;i.bindingHandlers.preloader={init:function(e,t){var n=t();if(void 0===n.preloaded){n.preloaded=i.observable("");var o=function(e){if(e!=n.preloaded())if(""!==e){var t=new Image;t.onload=function(){n.preloaded(e)},t.onerror=function(){n.preloaded(e)},t.src=e}else n.preloaded(e)};n.subscribe(o),o(n())}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t,n){(function(o){"use strict";t.exports={init:function(){},addTemplate:function(e,t){var n=o.document.createElement("script");n.setAttribute("type","text/html"),n.setAttribute("id",e),n.text=t,o.document.body.appendChild(n)},removeTemplate:function(e){var t=o.document.getElementById(e);t&&t.parentNode.removeChild(t)},getTemplateContent:function(e){var t=o.document.getElementById(e);return t?t.innerHTML:void 0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,n){(function(t){"use strict";var n,o="undefined"!=typeof window?window.ko:void 0!==t?t.ko:null,i="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null,r=(e("console-browserify"),"undefined"!=typeof window?window.tinymce:void 0!==t?t.tinymce:null),a=function(){if((n=void 0)!==r.activeEditor&&null!==r.activeEditor&&void 0!==r.activeEditor.theme&&null!==r.activeEditor.theme&&void 0!==r.activeEditor.theme.panel&&null!==r.activeEditor.theme.panel){(void 0!==r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._fixed||void 0!==r.activeEditor.theme.panel.state&&r.activeEditor.theme.panel.state.get("visible")&&r.activeEditor.theme.panel.state.get("fixed"))&&r.activeEditor.theme.panel.fixed(!1);var e=void 0!==r.activeEditor.bodyElement?r.activeEditor.bodyElement:r.activeEditor.dom.settings.root_element;null!==e&&void 0!==e.classList&&e.classList.contains("mce-edit-focus")&&(r.activeEditor.nodeChanged(),r.activeEditor.theme.panel.visible(!0),r.activeEditor.theme.panel.layoutRect().y<=40&&r.activeEditor.theme.panel.moveBy(0,40-r.activeEditor.theme.panel.layoutRect().y))}};o.bindingHandlers.wysiwygScrollfix={scroll:function(e){n&&t.clearTimeout(n),n=t.setTimeout(a,50)},init:function(e){o.utils.domNodeDisposal.addDisposeCallback(e,function(){i(e).off("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}),i(e).on("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],45:[function(t,e,n){(function(e){"use strict";var v="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,h="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,g=t("console-browserify"),m=function(e,t,n,o){var i=n.scrollTop(),r=i-o-(t?20:-20);if(void 0!==n[0].nodeType){var a={scrollTop:Math.round(r)+"px"},l=Math.round(Math.abs(r-i));n.stop().animate(a,l)}else n.scrollTop(r)};h.bindingHandlers.scrollIntoView={update:function(e,t,n,o,i){if(h.utils.unwrapObservable(t()))try{for(;8===e.nodeType;)e=e.nextSibling;if(8!==e.nodeType){var r,a=v(e).scrollParent(),l=!1;9==a[0].nodeType?(a=v(a[0].defaultView),l=!(r=0)):r=a.offset().top;var s=a.height(),d=a.scrollTop(),c=r+s,u=v(e),f=u.offset().top;l&&(f-=d);var p=u.height(),b=f+p;r<f&&f+p<c||(p<s?(f<r&&m(0,!0,a,r-f),c<b&&m(0,!1,a,c-b)):(f<r&&b<c&&m(0,!1,a,c-b),r<f&&c<b&&m(0,!0,a,r-f)))}}catch(e){g.log("TODO exception scrolling into view",e)}}},h.virtualElements.allowedBindings.scrollIntoView=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],46:[function(i,r,e){(function(e){"use strict";var n="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t=i("./script-template.js"),o={};n.templateSources.stringTemplate=function(e,t){this.templateName=e,this.template=t,this._data={}},n.utils.extend(n.templateSources.stringTemplate.prototype,{data:function(e,t){if(1===arguments.length)return this._data[e];this._data[e]=t},text:function(e){if(0===arguments.length)return this.template;this.template=e}}),r.exports={init:function(){n.setTemplateEngine(function(e){var t=e.makeTemplateSource;return e.makeTemplateSource=function(e){return void 0!==o[e]?new n.templateSources.stringTemplate(e,o[e]):t(e)},e}(new n.nativeTemplateEngine))},addTemplate:function(e,t){o[e]=t},removeTemplate:function(e){void 0!==o[e]?o[e]=void 0:t.removeTemplate(e)},getTemplateContent:function(e){return void 0!==o[e]?o[e]:t.getTemplateContent(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./script-template.js":43}],47:[function(t,e,n){(function(e){"use strict";var r="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,a="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,l=("undefined"!=typeof window?window.kojqui:void 0!==e&&e.kojqui,t("console-browserify"),function(e,t){return function(){return r.utils.extend(t,e()),t}}),s={show:{delay:500},track:!0,items:'[title][title!=""][title!=" "]'};r.bindingHandlers.tooltips={init:function(e,t,n,o,i){if(void 0!==a.fn.tooltip&&void 0!==r.bindingHandlers.tooltip)return r.bindingHandlers.tooltip.init(e,l(t,s),n,o,i)},update:function(e,t,n,o,i){if(void 0!==a.fn.tooltip&&void 0!==r.bindingHandlers.tooltip)return r.bindingHandlers.tooltip.update(e,l(t,s),n,o,i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],48:[function(t,e,n){(function(e){"use strict";var a="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t("console-browserify");a.bindingHandlers.validatedValue={init:function(n,o,e){var t=o;if(void 0!==n.pattern){var i=new RegExp("^(?:"+n.pattern+")$"),r=a.computed({read:function(){var e=a.utils.unwrapObservable(o());return null===e||""===e||i.test(e)?n.classList.remove("invalid"):n.classList.add("invalid"),e},write:a.isWriteableObservable(o())&&function(e){a.selectExtensions.writeValue(n,e);var t=a.selectExtensions.readValue(n);o()(t)},disposeWhenNodeIsRemoved:n});t=function(){return r}}a.bindingHandlers.value.init(n,t,e)}},a.expressionRewriting._twoWayBindings.validatedValue=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],49:[function(e,t,n){(function(r){"use strict";var d="undefined"!=typeof window?window.ko:void 0!==r?r.ko:null;e("console-browserify");d.bindingHandlers.uniqueId={currentIndex:0,init:function(e,t){var n=d.utils.unwrapObservable(t())||{};if(""===n.id()){var o,i;for(i="ko_"+(void 0!==n.type?d.utils.unwrapObservable(n.type):"block");o=i+"_"+ ++d.bindingHandlers.uniqueId.currentIndex,r.document.getElementById(o););n.id(o)}}},d.virtualElements.allowedBindings.uniqueId=!0,d.bindingHandlers.virtualAttr={update:function(e,t){8!==e.nodeType&&d.bindingHandlers.attr.update(e,t)}},d.virtualElements.allowedBindings.virtualAttr=!0,d.bindingHandlers.virtualAttrStyle={update:function(e,t,n,o,i){if(8!==e.nodeType){var r=["style"];(void 0===i.templateMode||"wysiwyg"!=i.templateMode)&&r.push("replacedstyle");for(var a=d.utils.unwrapObservable(t()),l=0;l<r.length;l++){var s=r[l];!1===a||null==a?e.removeAttribute(s):e.setAttribute(s,a.toString())}}}},d.virtualElements.allowedBindings.virtualAttrStyle=!0,d.bindingHandlers.virtualStyle={update:function(e,t){8!==e.nodeType&&d.bindingHandlers.style.update(e,t)}},d.virtualElements.allowedBindings.virtualStyle=!0,d.bindingHandlers.virtualHtml={init:d.bindingHandlers.html.init,update:function(e,t){if(8===e.nodeType){var n=d.utils.unwrapObservable(t());if(d.virtualElements.emptyNode(e),null!=n){"string"!=typeof n&&(n=n.toString());var o=d.utils.parseHtmlFragment(n);if(o)for(var i=e.nextSibling,r=0,a=o.length;r<a;r++)i.parentNode.insertBefore(o[r],i)}}else d.bindingHandlers.html.update(e,t);return{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.virtualHtml=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],50:[function(e,t,n){(function(m){"use strict";var p="undefined"!=typeof window?window.tinymce:void 0!==m?m.tinymce:null,y="undefined"!=typeof window?window.jQuery:void 0!==m?m.jQuery:null,w="undefined"!=typeof window?window.ko:void 0!==m?m.ko:null,x=e("console-browserify");e("./eventable.js"),w.bindingHandlers.wysiwygOrHtml={init:function(e,t,n,o,i){return void 0===i.templateMode||"wysiwyg"!=i.templateMode?w.bindingHandlers.virtualHtml.init():w.bindingHandlers.wysiwyg.init(e,t,n,o,i)},update:function(e,t,n,o,i){if(void 0===i.templateMode||"wysiwyg"!=i.templateMode)return w.bindingHandlers.virtualHtml.update(e,t,n,o,i)}},w.virtualElements.allowedBindings.wysiwygOrHtml=!0,w.bindingHandlers.wysiwygHref={init:function(e,t,n,o,i){if(8!==e.nodeType){t();if(void 0===i.templateMode||"wysiwyg"!=i.templateMode)e.setAttribute("target","_new");else void 0!==n().wysiwygOrHtml?e.setAttribute("href","javascript:void(0)"):(e.removeAttribute("href"),e.setAttribute("disabledhref","#"))}},update:function(e,t,n,o,i){if(8!==e.nodeType){var r=void 0===i.templateMode||"wysiwyg"!=i.templateMode,a=w.utils.unwrapObservable(t());r&&(!1===a||null==a?e.removeAttribute("href"):e.setAttribute("href",a.toString()))}}},w.virtualElements.allowedBindings.wysiwygHref=!0,w.bindingHandlers.wysiwygSrc={preload:!0,preloadingClass:"mo-preloading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="__WIDTH__" height="__HEIGHT__"><defs><pattern id="pinstripe" patternUnits="userSpaceOnUse" width="56.568" height="56.568" patternTransform="rotate(135)"><line x1="14.142" y1="0" x2="14.142" y2="56.568" stroke="#808080" stroke-width="28.284" /></pattern></defs><rect width="100%" height="100%" fill="#707070"/><rect width="100%" height="100%" fill="url(#pinstripe)" /></svg>',convertedUrl:function(e,t,n,o){var i=-1==e.indexOf("?")?"?":"&";return e+i+"method="+t+"&width="+n+(null!==o?"&height="+o:"")},placeholderUrl:function(e,t,n){},init:function(e,t,n,o,i){w.bindingHandlers.wysiwygSrc.preload&&y(e).data("preloadimg",new Image)},update:function(l,e,t,n,o){var s=void 0!==o.templateMode&&"wysiwyg"==o.templateMode,i=e(),r=w.utils.unwrapObservable(i),a=w.utils.unwrapObservable(r.src),d=w.utils.unwrapObservable(r.placeholder),c=w.utils.unwrapObservable(r.width),u=w.utils.unwrapObservable(r.height),f=null,p=w.utils.unwrapObservable(d.width),b=w.utils.unwrapObservable(d.height),v=p&&b?p+"x"+b:p?"w"+p:"h"+b,h=!1;if(!1===a||null==a||""===a)"object"==typeof d&&null!==d&&(f=w.bindingHandlers.wysiwygSrc.placeholderUrl(p,b,v)),h=!0;else{var g=w.utils.unwrapObservable(r.method);g||(g=0<c&&0<u?"cover":"resize"),f=w.bindingHandlers.wysiwygSrc.convertedUrl(a,g,c,u)}!function(t,e,n,o,i){if(null==t||null==t||""==t)l.removeAttribute("src");else if(l.getAttribute("src")!==t)if(w.bindingHandlers.wysiwygSrc.preload&&s){if("string"==typeof w.bindingHandlers.wysiwygSrc.svg&&i){var r=w.bindingHandlers.wysiwygSrc.svg.replace("__WIDTH__",e).replace("__HEIGHT__",n).replace("__TEXT__",o);l.setAttribute("src","data:image/svg+xml;base64,"+m.btoa(r))}w.bindingHandlers.wysiwygSrc.preloadingClass&&l.classList.add(w.bindingHandlers.wysiwygSrc.preloadingClass);var a=y(l).data("preloadimg");a.onload=function(){l.setAttribute("src",t),w.bindingHandlers.wysiwygSrc.preloadingClass&&l.classList.remove(w.bindingHandlers.wysiwygSrc.preloadingClass)},a.onerror=function(e){x.warn("Unable to preload image",t,e),l.setAttribute("src",t),w.bindingHandlers.wysiwygSrc.preloadingClass&&l.classList.remove(w.bindingHandlers.wysiwygSrc.preloadingClass)},a.src=t}else l.setAttribute("src",t)}(f,p,b,v,h),null!=c?l.setAttribute("width",c):l.removeAttribute("width"),null!=u?l.setAttribute("height",u):l.removeAttribute("height")}},w.bindingHandlers.wysiwygId={init:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||e.setAttribute("id",w.utils.unwrapObservable(t()))},update:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||e.setAttribute("id",w.utils.unwrapObservable(t()))}},w.virtualElements.allowedBindings.wysiwygId=!0,w.bindingHandlers.wysiwygClick={init:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||w.bindingHandlers.click.init(e,t,n,o,i)}},w.virtualElements.allowedBindings.wysiwygClick=!0,w.bindingHandlers.wysiwygCss={update:function(e,t,n,o,i){void 0===i.templateMode||"wysiwyg"!=i.templateMode||w.bindingHandlers.css.update(e,t,n,o,i)}},w.virtualElements.allowedBindings.wysiwygCss=!0,w.bindingHandlers.wysiwygImg={makeTemplateValueAccessor:function(o,i){return function(){var e=void 0!==i.templateMode&&"wysiwyg"==i.templateMode,t=o(),n=w.utils.peekObservable(t);return w.utils.unwrapObservable(t),{name:e?n._editTemplate:n._template,templateEngine:w.nativeTemplateEngine.instance}}},init:function(e,t,n,o,i){return w.bindingHandlers.template.init(e,w.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i))},update:function(e,t,n,o,i){return i=i.extend(t()),w.bindingHandlers.template.update(e,w.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i),n,o,i)}},w.virtualElements.allowedBindings.wysiwygImg=!0;var b=function(t,e){try{return this.originalFire.apply(this,arguments)}catch(e){x.warn("Cought tinymce exception while firing editor event",t,e)}};w.bindingHandlers.wysiwyg={debug:!1,getContentOptions:{format:"raw"},useTarget:!1,currentIndex:0,standardOptions:{},initializingClass:"wysiwyg-loading",removeSelectionOnBlur:!0,emptyClass:void 0,fullOptions:{toolbar1:"bold italic forecolor backcolor hr styleselect removeformat | link unlink | pastetext code",plugins:["link hr paste lists textcolor code"]},init:function(n,t,e,o,i){w.bindingHandlers.focusable.init(n);var r,a=w.bindingHandlers.wysiwyg.debug&&"function"==typeof x.debug;w.bindingHandlers.wysiwyg.useTarget?r="@target_"+ ++w.bindingHandlers.wysiwyg.currentIndex:(r=n.getAttribute("id"))||(r="wysiwyg_"+ ++w.bindingHandlers.wysiwyg.currentIndex,n.setAttribute("id",r)),w.bindingHandlers.wysiwyg.initializingClass&&n.classList.add(w.bindingHandlers.wysiwyg.initializingClass),w.utils.domNodeDisposal.addDisposeCallback(n,function(){a&&x.debug("Editor for selector",r,"is being removed..."),p.remove("#"+n.getAttribute("id")),a&&x.debug("Editor for selector",r,"has been removed.")});var l=t();if(!w.isObservable(l))throw"Wysiwyg binding called with non observable";if(8===n.nodeType)throw"Wysiwyg binding called on virtual node, ignoring...."+n.innerHTML;var s,d="DIV"==n.tagName||"TD"==n.tagName,c=!1,u=!1,f={inline:!0,hidden_input:!1,plugins:["paste"],toolbar1:"bold italic",toolbar2:"",preview_styles:!1,paste_as_text:!0,language:"en",schema:"html5",extended_valid_elements:"strong/b,em/i,*[*]",menubar:!1,skin:"gray-flat",forced_root_block:d?"p":"",init_instance_callback:function(e){if(a&&x.debug("Editor for selector",r,"is now initialized."),w.bindingHandlers.wysiwyg.initializingClass&&n.classList.remove(w.bindingHandlers.wysiwyg.initializingClass),"function"==typeof x.debug){var t=n.currentStyle?n.currentStyle.display:m.getComputedStyle(n,null).display;"inline"==t&&x.debug("Initializing an editor on an inline element: please note that while it may work, this is unsupported because of a multitude of browser issues",n.tagName,t,r)}},setup:function(e){a&&x.debug("Editor for selector",r,"is now in the setup phase.");var t=function(){0==(n.textContent||n.innerText||"").trim().length?n.classList.add(w.bindingHandlers.wysiwyg.emptyClass):n.classList.remove(w.bindingHandlers.wysiwyg.emptyClass)};e.on("change redo undo",function(){if(!c)try{u=!0,l(e.getContent(w.bindingHandlers.wysiwyg.getContentOptions))}catch(e){x.warn("Unexpected error setting content value for",r,e)}finally{u=!1}w.bindingHandlers.wysiwyg.emptyClass&&t()}),w.bindingHandlers.wysiwyg.emptyClass&&e.on("keyup",function(){t()}),e.on("focus",function(){e.nodeChanged(),e.getElement().click()}),w.bindingHandlers.wysiwyg.removeSelectionOnBlur&&e.on("blur",function(e){m.getSelection().removeAllRanges()}),e.on("BeforeSetContent",function(e){e.initial&&(e.format="raw")}),void 0===e.originalFire&&(e.originalFire=e.fire,e.fire=b),s=e}};return w.bindingHandlers.wysiwyg.useTarget?f.target=n:f.selector="#"+r,w.utils.extend(f,w.bindingHandlers.wysiwyg.standardOptions),d&&w.utils.extend(f,w.bindingHandlers.wysiwyg.fullOptions),m.setTimeout(function(){a&&x.debug("Editor for selector",r,"is being inizialized ...");var e=p.init(f);a&&x.debug("Editor for selector",r,"init has just been called returning",e),e.then(function(){a&&x.debug("Editor for selector",r,"init promise has resolved.")},function(e){x.log("Editor for selector",r,"init promise has failed.",e)})}),w.computed(function(){var e=w.utils.unwrapObservable(t());if(!u){try{c=!0,void 0!==s?s.setContent(e,{format:"raw"}):w.utils.setHtml(n,e)}catch(e){x.warn("Exception setting content to editable element",typeof s,e)}c=!1}},null,{disposeWhenNodeIsRemoved:n}),{controlsDescendantBindings:!0}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventable.js":34,"console-browserify":6}],51:[function(e,t,n){"use strict";var u=e("console-browserify"),f=function(e,t,n,o,i){var r,a,l,s=0;if(void 0===i&&(i=!1),void 0!==t&&"function"==typeof t.splice)for(r={},a=0;a<t.length;a++)r[t[a].type]=t[a];else r=t;for(var d in e)if(e.hasOwnProperty(d))if(l=void 0!==o?o+"."+d:d,n.hasOwnProperty(d))if(typeof n[d]!=typeof e[d])null!==n[d]&&null!==e[d]&&("string"==typeof n[d]?String(e[d])!=e[d]&&(u.log("TODO Different type 1 ",l,typeof n[d],typeof e[d],n[d],e[d]),s=Math.max(s,2)):"number"==typeof n[d]?Number(e[d])!=e[d]&&(u.log("TODO Different type 2 ",l,typeof n[d],typeof e[d],n[d],e[d]),s=Math.max(s,2)):(u.log("TODO Different type 3 ",l,typeof n[d],typeof e[d],n[d],e[d]),s=Math.max(s,2)));else if("object"==typeof e[d])if(null!==e[d])if(void 0!==e[d].splice){if(0<e[d].length)if(0<n[d].length){var c=0;for(a=0;a<n[d].length;a++)if("string"==typeof n[d][a].type){for(;c<e[d].length&&e[d][c].type!==n[d][a].type;)u.log("ignoring ",l,e[d][c].type," block type in reference not found in model"),c++;if(c>=e[d].length){u.log("WARN cannot find ",l,n[d][a].type," block in reference"),s=Math.max(s,2);break}s=Math.max(s,f(e[d][c],void 0,n[d][a],l+"["+a+"."+n[d][a].type+"]"))}}else for(a=0;a<e[d].length;a++)s="string"!=typeof e[d][a].type?(u.log("TODO found an object with no type",l,e[d][a]),Math.max(s,2)):r.hasOwnProperty(e[d][a].type)?Math.max(s,f(r[e[d][a].type],r,e[d][a],l+"["+a+"."+e[d][a].type+"]")):(u.warn("TODO the model uses a block type not defined by the template. REMOVING IT!!",l,e[d][a]),e[d].splice(a,1),a--,Math.max(s,2))}else null===n[d]?i?(u.log("WARN Null object in model ",l,"instead of",e[d],"deleting it"),s=Math.max(s,2),delete e[d]):(u.log("INFO Null object in model ",l,"instead of",e[d],"cloning it from the reference"),s=Math.max(s,1),n[d]=e[d]):s=Math.max(s,f(e[d],r,n[d],l,i));else null!==n[d]&&(u.log("TODO Null in reference but not null in model",l,n[d]),s=Math.max(s,2));else"string"!=typeof e[d]&&"boolean"!=typeof e[d]&&"number"!=typeof e[d]&&(u.log("TODO unsupported type",l,typeof e[d]),s=Math.max(s,2));else i?(u.warn("WARN Property ",l,"found in model is not defined by template: removing it!"),s=Math.max(s,2),delete e[d]):(u.log("INFO Property ",l,"missing in model, cloning from reference!"),s=Math.max(s,1),n[d]=e[d]);return i||(s=Math.max(s,f(n,t,e,void 0!==o?o+"!R":"!R",!0))),s};t.exports=f},{"console-browserify":6}],52:[function(e,t,n){"use strict";var N=e("./utils.js"),R=e("mensch/lib/parser.js"),F=e("console-browserify"),L=e("./domutils.js"),U=function(e,t,n){for(var o=e.length-1;0<=o;o--)if("property"==e[o].type&&e[o].name==t)return q(e[o].value,n);return null},z=function(e){return e.replace(/-([a-z])/g,function(e,t,n,o){return t.toUpperCase()})},q=function(e,l){return e.match(/url\(.*\)/)?e.replace(/(url\()([^\)]*)(\))/g,function(e,t,n,o){var i=n.trim(),r=n.trim().charAt(0);"'"==r||'"'==r?i=i.substr(1,i.length-2):r="";var a=l(i);return null!==a?t+r+a+r+o:e}):e},V=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]?t.push(n+": { "+V(e[n])+" }"):t.push(n+": "+e[n]));return t.reverse().join(", ")};t.exports=function(e,t,n,o,i,r,a){var l="object"==typeof r&&null!==r?r:{},s=null,d=0;void 0===t&&(t=R("#{\n"+e+"}",{comments:!0,position:!0}).stylesheet.rules[0].declarations,d=1);for(var c=t.length-1;0<=c;c--)if("property"==t[c].type)if(!0===a&&"display"==t[c].name&&"none"==t[c].value)null===s&&(s=e),s=N.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,"");else{var u=t[c].name.match(/^-ko-(bind-|attr-)?([a-z0-9-]*?)(-if|-ifnot)?$/);if(null!==u){null===s&&void 0!==e&&(s=e);var f,p,b,v="attr-"==u[1],h="bind-"==u[1],g=u[2],m="-if"==u[3]||"-ifnot"==u[3];if(m){if(f=t[c].name.substr(0,t[c].name.length-u[3].length),null===U(t,f,n))throw"Unable to find declaration "+f+" for "+t[c].name}else{if((v||h)&&void 0===i&&void 0!==e)throw"Attributes and bind declarations are only allowed in inline styles!";var y,w=!0;if(v?(b=L.getAttribute(i,g),w=!1,y="virtualAttr"):h?(y=null,"text"==g?void 0!==i?b=L.getInnerText(i):w=!1:"html"==g&&void 0!==i?b=L.getInnerHtml(i):w=!1):((w=void 0!==e)&&(b=U(t,g,n)),y="virtualStyle"),w&&null===b)throw F.error("Cannot find default value for",t[c].name,t),"Cannot find default value for "+t[c].name+": "+t[c].value+" in "+i+" ("+typeof e+"/"+g+")";var x=b,k=h||v?-1!=g.indexOf("-")?"'"+g+"'":g:z(g);try{p=N.expressionBinding(t[c].value,o,x)}catch(e){throw F.error("Model ensure path failed",e.stack,"name",t[c].name,"value",t[c].value,"default",b,"element",i),e}null!==y&&void 0===l[y]&&(l[y]={}),"virtualAttr"==y&&"href"==k&&(k="wysiwygHref",(y=null)!=i&&L.removeAttribute(i,"href"));var _=U(t,t[c].name+"-if",n),O=!1;if(null===_)_=U(t,t[c].name+"-ifnot",n),O=!0;else if(null!==U(t,t[c].name+"-ifnot",n))throw"Unexpected error: cannot use both -if and -ifnot property conditions";if(null!==_)try{var S=N.conditionBinding(_,o);S.match(/^[^' ]*[^' \)]$/)&&(S="ko.utils.unwrapObservable("+S+")"),p.match(/^[^' ]*[^' \)]$/)&&(p="ko.utils.unwrapObservable("+p+")"),O&&(S="!"+S),p=S+" ? "+p+" : null"}catch(e){throw F.error("Unable to deal with -ko style binding condition",_,t[c].name),e}null!==y?l[y][k]=p:l[k]=p}if(null!==s)try{if(null!=i)s=N.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,"");else{var j="";m||(j=g+": \x3c!-- ko text: "+p+" --\x3e"+b+"\x3c!-- /ko --\x3e"),s=N.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,j)}}catch(e){throw F.warn("Remove style failed",e,"name",t[c]),e}}else{var C=q(t[c].value,n);if(C!=t[c].value&&(null===s&&void 0!==e&&(s=e),null!==s))try{s=N.removeStyle(s,t[c].position.start,t[c].position.end,d,0,0,t[c].name+": "+C)}catch(e){throw F.log("Remove style failed replacing url",e,"name",t[c]),e}var T=z(t[c].name),E="virtualAttrStyle",A=void 0!==l.virtualStyle?l.virtualStyle[T]:void 0,$=" ";void 0===l[E]&&(l[E]="''",$=""),void 0!==A?(A.match(/^[^' ]*[^' \)]$/)&&(A="ko.utils.unwrapObservable("+A+")"),l[E]="'"+t[c].name+": '+"+A+"+';"+$+"'+"+l[E],delete l.virtualStyle[T]):l[E]="'"+t[c].name+": "+N.addSlashes(C)+";"+$+"'+"+l[E]}}if(null!=i){for(var H in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(H))throw F.log("Unexpected virtualStyle binding after conversion to virtualAttr.style",H,l.virtualStyle[H],e),"Unexpected virtualStyle binding after conversion to virtualAttr.style for "+H;delete l.virtualStyle;var M=L.getAttribute(i,"data-bind"),I=(null!==M?M+", ":"")+V(l);""==I?L.removeAttribute(i,"data-bind"):L.setAttribute(i,"data-bind",I)}if(void 0!==e)return s;var B=!1;for(var D in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(D)){B=!0;break}if(B){if(void 0!==l.virtualAttrStyle){var P=l.virtualAttrStyle;delete l.virtualAttrStyle,l.virtualAttrStyle=P}}else delete l.virtualStyle;return V(l)}},{"./domutils.js":53,"./utils.js":59,"console-browserify":6,"mensch/lib/parser.js":19}],53:[function(e,t,n){(function(e){"use strict";var o="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;t.exports={getAttribute:function(e,t){var n=o(e).attr(t);return void 0===n&&(n=null),n},setAttribute:function(e,t,n){o(e).attr(t,n)},removeAttribute:function(e,t){o(e).removeAttr(t)},getInnerText:function(e){return o(e).text()},getInnerHtml:function(e){return o(e).html()},getLowerTagName:function(e){return""===e.tagName&&"string"==typeof e.name?e.name.toLowerCase():""!==e.tagName?e.tagName.toLowerCase():o(e).prop("tagName").toLowerCase()},setContent:function(e,t){o(e).html(t)},replaceHtml:function(e,t){o(e).replaceWith(t)},removeElements:function(e,t){t&&void 0!==e.detach&&e.detach(),e.remove()},objExtend:function(e,t){return"function"==typeof o.extend?o.extend(!0,e,t):function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(e,JSON.parse(JSON.stringify(t)))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(e,t,n){"use strict";var D=e("console-browserify"),P=e("./declarations.js"),N=e("./utils.js"),x=e("./model.js"),R=function(e,t,n,o,i){var r,a="";if(null!==e&&void 0!==e._widget&&(r=e._widget),void 0===r)throw"Unknown data type for "+t;var l="focusable: true";if("edit"==o&&(l+=", event: { focus: function(ui, event) { $($element).click(); } } "),a+='<label class="data-'+r+'"'+("boolean"==r?" data-bind=\"event: { mousedown: function(ui, evt) { if (evt.button == 0) { var input = $($element).find('input'); var ch = input.prop('checked'); setTimeout(function() { input.click(); input.prop('checked', !ch); input.trigger('change'); }, 0); } } }, click: function(ui, evt) { evt.preventDefault(); }, clickBubble: false\"":"")+">",void 0!==i&&void 0!==i[r]){var s=i[r],d={};if(void 0!==s.parameters)for(var c in s.parameters)s.parameters.hasOwnProperty(c)&&void 0!==e["_"+c]&&(d[c]=e["_"+c]);a+=s.html(n,l,d)}else if("boolean"==r)a+='<input type="checkbox" value="nothing" data-bind="checked: '+n+", "+l+'" />',a+='<span class="checkbox-replacer" ></span>';else if("color"==r)a+='<input size="7" type="text" data-bind="colorpicker: { color: '+n+", strings: $root.t('Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.') }, , "+l+'" />';else if("select"==r){if(void 0!==e._options){var u=function(e){for(var t=e.split("|"),n={},o=0;o<t.length;o++){var i=t[o].split("=");n[i[0].trim()]=1<i.length?i[1].trim():i[0].trim()}return n}(e._options);for(var f in a+='<select data-bind="value: '+n+", "+l+'">',u)u.hasOwnProperty(f)&&(a+='<option value="'+f+"\" data-bind=\"text: $root.ut('template', '"+N.addSlashes(u[f])+"')\">"+u[f]+"</option>");a+="</select>"}}else if("font"==r)a+='<select type="text" data-bind="value: '+n+", "+l+'">',a+='<optgroup label="Sans-Serif Fonts">',a+='<option value="Arial,Helvetica,sans-serif">Arial</option>',a+="<option value=\"'Comic Sans MS',cursive,sans-serif\">Comic Sans MS</option>",a+='<option value="Impact,Charcoal,sans-serif">Impact</option>',a+="<option value=\"'Trebuchet MS',Helvetica,sans-serif\">Trebuchet MS</option>",a+='<option value="Verdana,Geneva,sans-serif">Verdana</option>',a+="</optgroup>",a+='<optgroup label="Serif Fonts">',a+='<option value="Georgia,serif">Georgia</option>',a+="<option value=\"'Times New Roman',Times,serif\">Times New Roman</option>",a+="</optgroup>",a+='<optgroup label="Monospace Fonts">',a+="<option value=\"'Courier New',Courier,monospace\">Courier New</option>",a+="</optgroup>",a+="</select>";else if("url"==r)a+='<div class="ui-textbutton">',a+='<input class="ui-textbutton-input" size="7" type="url" pattern="(mailto:.+@.+|https?://.+\\..+|\\[.*\\].*)" value="nothing" data-bind="css: { withButton: typeof $root.linkDialog !== \'undefined\' }, validatedValue: '+n+", "+l+'" />',a+="<a class=\"ui-textbutton-button\" data-bind=\"visible: typeof $root.linkDialog !== 'undefined', click: typeof $root.linkDialog !== 'undefined' ? $root.linkDialog.bind($element.previousSibling) : false, button: { icons: { primary: 'fa fa-fw fa-ellipsis-h' }, label: 'Opzioni', text: false }\">Opzioni</a>",a+="</div>";else if("integer"==r){var p,b=0,v=1e3;null!==e&&void 0!==e._max&&(v=e._max),null!==e&&void 0!==e._min&&(b=e._min),a+="\x3c!-- ko letproxy: { prop: "+n+" } --\x3e",a+='<div style="width: 58%; display: inline-block;">',a+='<input class="number-slider" step="'+(p=null!==e&&void 0!==e._step?e._step:100<=v-b?10:1)+'" min="'+b+'" max="'+v+'" type="range" value="-1" data-bind="textInput: prop, '+l+'" />',a+='</div><div style="width: 38%; display: inline-block; float: right;">',a+='<input class="number-spinner" size="7" step="'+p+'" type="number" value="-1" data-bind="spinner: { min: '+b+", max: "+v+", page: "+5*p+", value: prop }, valueUpdate: ['change', 'spin'], "+l+'" />',a+="</div>",a+="\x3c!-- /ko --\x3e"}else a+='<input size="7" type="text" value="nothing" data-bind="value: '+n+", "+l+'" />';return a+="</label>"},F=function(e,t,n,o){var i;return"object"==typeof t&&null!==t&&void 0===t._widget||void 0!==n&&void 0!==o&&0<o.length&&"object"==typeof e&&void 0!==e[o]&&(i=e[o]),i},L=function(e,t,n,o,i,r,a,l,s,d,c,u,f,p,b){if(void 0===s&&(s=0),void 0!==a&&"object"==typeof o&&null!==o&&void 0===o._usecount)return"function"==typeof D.debug&&D.debug("Ignoring",r,"property because it is not used by the template","prop:",a,"type:",l,"level:",s,e._templateName),"";var v,h=void 0!==u?a+"._defaultComputed":a,g="",m=h,y=1,w=1;if("object"==typeof o&&null!==o&&void 0===o._widget||void 0===u&&(y+=1),void 0===u&&void 0!==d&&(w+=d),void 0!==a&&f&&(g+="\x3c!-- ko ifSubs: { data: "+m+", threshold: "+w+", gutter: "+y+" } --\x3e"),void 0===a||null!==o&&void 0!==o._name||D.log("Missing label for property ",a),void 0===a&&null!==o&&void 0===o._name&&"theme"!==o.type&&D.log("Missing label for object ",o.type),"object"==typeof o&&null!==o&&void 0===o._widget){var x=function(e,t,n){var o=[];for(var i in e)if(!i.match(/^customStyle$/)&&!i.match(/^_/)&&e.hasOwnProperty(i)){var r=null!==e[i]&&void 0!==e[i]._category&&"style"==e[i]._category;"id"==i||"type"==i||i.match(/Blocks$/)||("styler"==t?(r||0<n)&&o.push(i):"edit"==t?null!==e[i]&&void 0!==e[i]._category&&"content"==e[i]._category&&(void 0===e[i]._context||"block"!=e[i]._context)&&o.push(i):void 0===t&&o.push(i))}return o}(o,l,s),k="styler"==l&&null!==o&&void 0!==o.customStyle&&void 0!==u,_="",O="";void 0!==a&&"edit"==l&&(_=", click: function(obj, evt) { $root.selectItem("+a+", $data); return false }, clickBubble: false, css: { selecteditem: $root.isSelectedItem("+a+") }, scrollIntoView: $root.isSelectedItem("+a+"), ",O+=" selectable"),k&&(O+=" supportsCustomStyles"),g+='<div class="objEdit level'+s+O+'" data-bind="tooltips: {}'+_+'">';var S,j,C,T=null!==o&&void 0!==o._name?o._name:void 0!==a?"["+a+"]":"";if(k){var E="Stile";null!=i&&void 0!==i._name?E=i._name:D.log("Missing label for theme section ",a,null!==o?o.type:"-"),T="<span class=\"blockSelectionMethod\" data-bind=\"text: customStyle() ? $root.ut('template', '"+N.addSlashes(T)+"') : $root.ut('template', '"+N.addSlashes(E)+"')\">Block</span>"}else T="<span data-bind=\"text: $root.ut('template', '"+N.addSlashes(T)+"')\">"+T+"</span>";if(g+="<span"+(v=null!==o&&void 0!==o._help?' title="'+N.addSlashes(o._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+N.addSlashes(o._help)+"') }\"":"")+' class="objLabel level'+s+'">'+T+"</span>","edit"==l&&void 0!==o._blockDescription&&(g+="<div class=\"blockDescription\" data-bind=\"html: $root.ut('template', '"+N.addSlashes(o._blockDescription)+"')\">"+o._blockDescription+"</div>"),k&&(g+='<label class="data-boolean blockCheck" data-bind="tooltips: { }">',g+='<input type="checkbox" value="nothing" data-bind="focusable: true, checked: customStyle" />',g+='<span title="Switch between global and block level styles editing" data-bind="attr: { title: $root.t(\'Switch between global and block level styles editing\') }" class="checkbox-replacer checkbox-replacer-onoff"></span>',g+="</label>",g+="\x3c!-- ko template: { name: 'customstyle', if: customStyle } --\x3e\x3c!-- /ko --\x3e"),void 0!==a)if(g+="\x3c!-- ko with: "+a+" --\x3e",1==s&&void 0!==a)if(void 0!==o._previewBindings&&void 0!==e)void 0!==p&&(g+='\x3c!-- ko with: $root.content() --\x3e<div class="objPreview" data-bind="'+p+'"></div>\x3c!-- /ko --\x3e'),void 0!==b&&(g+='\x3c!-- ko with: $parent --\x3e<div class="objPreview" data-bind="'+b+'"></div>\x3c!-- /ko --\x3e'),g+='<div class="objPreview"><div class="objPreviewInner" data-bind="'+P(void 0,o._previewBindings,n,e.bind(this,r+"."))+'"></div></div>';0===s&&void 0!==o._previewBindings&&(S=P(void 0,o._previewBindings,n,e.bind(this,0<r.length?r+".":"")));var A,$,H=g.length;for(j=0;j<x.length;j++)C=0<r.length?r+"."+x[j]:x[j],"object"==typeof o[x[j]]&&null!==o[x[j]]&&void 0===o[x[j]]._widget||($=void 0,0===s&&"theme"==x[j]?g+=L(e,t,n,o[x[j]],A,C,x[j],l,0,d,void 0,void 0,f,p):($=F(c,o[x[j]],x[j],C),g+=L(e,t,n,o[x[j]],A,C,x[j],l,s+1,d,c,$,f,p,S)));for(j=0;j<x.length;j++)C=0<r.length?r+"."+x[j]:x[j],"object"==typeof o[x[j]]&&null!==o[x[j]]&&void 0===o[x[j]]._widget&&($=void 0,0===s&&"theme"==x[j]?g+=L(e,t,n,o[x[j]],A,C,x[j],l,0,d,void 0,void 0,f,p):($=F(c,o[x[j]],x[j],C),g+=L(e,t,n,o[x[j]],A,C,x[j],l,s+1,d,c,$,f,p,S)));if(0==g.length-H){if("object"==typeof o&&null!==o&&"template"==o._context)return"";g+='<div class="objEmpty" data-bind="html: $root.t(\'Selected element has no editable properties\')">Selected element has no editable properties</div>'}void 0!==a&&(g+="\x3c!-- /ko --\x3e"),g+="</div>"}else{var M=!0;if(void 0===c&&(M=!1),null===o||"object"!=typeof o||void 0!==o._widget){var I=[];void 0!==u&&I.push("css: { notnull: "+a+"() !== null }"),0<(v=null!==o&&void 0!==o._help?' title="'+N.addSlashes(o._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+N.addSlashes(o._help)+"') }\"":"").length&&I.push("tooltips: {}"),g+='<div class="propEditor '+(M?"checkboxes":"")+'"'+(0<I.length?'data-bind="'+N.addSlashes(I.join())+'"':"")+">";var B=null!==o&&void 0!==o._name?o._name:void 0!==a?"["+a+"]":"";g+="<span"+v+' class="propLabel">'+(B="<span data-bind=\"text: $root.ut('template', '"+N.addSlashes(B)+"')\">"+B+"</span>")+"</span>",g+='<div class="propInput '+(void 0!==c?"local":"")+'" data-bind="css: { default: '+a+'() === null }">',g+=R(o,a,h,l,t),g+="</div>",void 0!==u&&(g+='<div class="propInput global" data-bind="css: { overridden: '+a+'() !== null }">',g+=R(o,a,u,l,t),g+="</div>",M&&(g+='<div class="propCheck"><label data-bind="tooltips: {}"><input type="checkbox" data-bind="focusable: true, click: function(evt, obj) { $root.localGlobalSwitch('+a+", "+u+"); return true; }, checked: "+a+'() !== null">',g+='<span class="checkbox-replacer" data-bind="css: { checked: '+a+"() !== null }, attr: { title: $root.t('This style is specific for this block: click here to remove the custom style and revert to the theme value') }\"></span>",g+="</label></div>")),g+="</div>"}else g+=null===o||"object"!=typeof o?'<div class="propEditor unknown">[A|'+a+"|"+typeof o+"]</div>":'<div class="propEditor unknown">[B|'+a+"|"+typeof o+"]</div>"}return void 0!==a&&f&&(g+="\x3c!-- /ko --\x3e",g+="\x3c!-- ko ifSubs: { not: true, data: "+m+", threshold: "+w+", gutter: 0 } --\x3e",g+='<span class="label notused">('+a+")</span>",g+="\x3c!-- /ko --\x3e"),g},m=function(e,t,n,o,i,r,a,l,s,d,c,u){void 0===c&&(c=!0);var f,p=x.getDef(e,r),b=x.getDef(e,i);void 0!==b._previewBindings&&"thaeme"!=r&&"styler"==a&&(f=P(void 0,b._previewBindings,o,x.getBindValue.bind(void 0,e,n,i,i,"")));var v,h=void 0!==d&&d?e[r]._globalStyles:void 0,g=void 0!==d&&d?e[r]._globalStyle:void 0;void 0!==g&&(v=x.getDef(e,"theme")[g.replace(/^(\$theme|_theme_)\./,"")]);var m=x.getBindValue.bind(void 0,e,n,i,r);m._templateName=r;var y='<div class="editor">';y+='<div class="blockType'+(void 0!==h?" withdefaults":"")+'">'+p.type+"</div>";var w=L(m,t,o,p,v,"",void 0,a,u,s,h,g,c,f);0<w.length&&(y+=w),l(y+="</div>",r,a)};t.exports=function(e,t,n,o,i){var r,a,l,s,d,c,u,f,p,b=e._defs,v=e.templateName,h=e._blocks,g=[];for(r=0;r<h.length;r++)void 0!==h[r].container&&g.push(x.generateModel(b,h[r].block)),a=b,l=t,s=void 0,d=n,c=h[r].root,u=h[r].block,m(a,l,s,d,c,u,"edit",f=o,p=i),m(a,l,s,d,c,u,"styler",f,p,!0);return void 0!==b.theme&&m(b,t,void 0,n,v,"theme","styler",o,void 0,!1,!1,-1),g}},{"./declarations.js":52,"./model.js":56,"./utils.js":59,"console-browserify":6}],55:[function(r,e,t){"use strict";var a=r("./model.js");e.exports={translateTemplate:function(){var e=r("./parser.js");return e.apply(e,arguments)},wrappedResultModel:function(e){var t=e._defs,n=e.templateName,o=a.getDef(t,n),i=a.generateResultModel(e);return r("./wrapper.js")(i,o,t)},generateResultModel:a.generateResultModel,generateEditors:function(){var e=r("./editor.js");return e.apply(e,arguments)},checkModel:function(){var e=r("./checkmodel.js");return e.apply(e,arguments)}}},{"./checkmodel.js":51,"./editor.js":54,"./model.js":56,"./parser.js":57,"./wrapper.js":60}],56:[function(e,t,n){"use strict";var b=e("./domutils.js").objExtend,O=e("console-browserify"),c=function(e,t,n,o){var i=n.indexOf(".");if(-1==i)if(void 0===t[n])O.log("Undefined prop "+n+" while setting value "+o+" in model._valueSet");else if(null===t[n])"object"==typeof o&&null!==o&&void 0===o.push&&O.log("nullpropobjectvalue",n,o),t[n]=o;else if("object"==typeof t[n]&&"function"==typeof t[n].push){var r;if("string"==typeof o){var a=o.match(/^\[(.*)\]$/);if(null===a)throw"Unexpected default value for array property "+n+": "+o;r=a[1].split(",")}else{if("object"!=typeof o||void 0===o.push)throw"Unexpected default value for array property "+n+": "+o+" typeof "+typeof o;r=o}for(var l=[],s=0;s<r.length;s++)"@"==r[s].substr(0,1)?l.push(u(e,r[s].substr(1))):0<r[s].length&&l.push(r[s]);t[n]=l}else"string"==typeof t[n]||"boolean"==typeof t[n]?t[n]=o:"object"==typeof t[n]&&null!==t[n]&&void 0!==t[n]._widget?("object"==typeof o&&null!==o&&O.log("objectvalue",n,t[n]._widget,o),t[n]=o):O.log("setting",typeof t[n],t[n],n,o);else{var d=n.substr(0,i);c(e,t[d],n.substr(i+1),o)}},S=function(e,t,n,o){if(void 0!==e[t]&&e[t]._initialized&&!e[t]._writeable)throw O.error("Trying to alter non writeable model",e,t,n,o),"Trying to alter non writeable model: "+t+" / "+n;if(void 0===e[t]&&(e[t]={_writeable:!0},void 0===o&&(o={}),void 0===o.category&&void 0===e[t]._category&&(t.match(/(^t|.T)heme$/)||t.match(/(^s|.S)tyle$/)||t.match(/(^c|.C)olor$/)||t.match(/(^r|.R)adius$/)?o.category="style":o.category="content")),void 0!==o){if(void 0!==o.name&&(e[t]._name=o.name),void 0!==o.themeOverride&&(e[t]._themeOverride=o.themeOverride),void 0!==o.globalStyle){e[t]._globalStyle=o.globalStyle;var i=o.globalStyle.replace(/^(\$theme|_theme_)\./,""),r=i.indexOf("."),a=-1!=r?i.substr(0,r):i;S(e,"theme",a),(void 0===e[t]._themeOverride||e[t]._themeOverride)&&S(e,t,"customStyle=false")}void 0!==o.contextName&&(e[t]._context=o.contextName,"block"==o.contextName&&void 0===e[t]._globalStyle&&(e[t]._globalStyle="_theme_.bodyTheme",S(e,"theme","bodyTheme"),(void 0===e[t]._themeOverride||e[t]._themeOverride)&&S(e,t,"customStyle=false"))),void 0!==o.extend&&(e[t].type=o.extend)}for(var l in o)o.hasOwnProperty(l)&&void 0!==o[l]&&-1==["name","extend","contextName","globalStyle","themeOverride"].indexOf(l)&&(e[t]["_"+l]=o[l]);void 0!==n&&0<n.length&&(e[t]._props=void 0!==e[t]._props&&0<e[t]._props.length?e[t]._props+" "+n:n)},l=function(e,t){var n={};for(var o in e)if(!o.match(/^_.*/)&&e.hasOwnProperty(o)){var i=e[o];if("object"==typeof i&&null!==i&&void 0!==i._complex&&i._complex)n[o]=l(i,t);else if("type"==o)n[o]=i;else{if("object"!=typeof i)throw O.error("Unexpected model def",o,i,e),"Unexpected model def ["+o+"] = "+i;n[o]=null}}if(void 0!==e._defaultValues){var r=e._defaultValues;for(var a in r)r.hasOwnProperty(a)&&c(t,n,a,r[a])}return n},u=function(e,t){var n=j(e,t,!1,!0);return l(n,e)},j=function(e,t,n,o){if(void 0===e[t]){if(-1!=t.indexOf(" "))return null;var i=function(e){var t=e.match(/^[^A-Z]+([A-Z])(.*)$/);return null!==t?t[1].toLowerCase()+t[2]:null}(t);return null!==i?j(e,i,n,o):null}var r=e[t];if("object"!=typeof r)throw"Block definition must be an object: found "+r+" for "+t;if(void 0===r._initialized){if(void 0===r.type&&(-1==t.indexOf(" ")?r.type=t:r.type=t.substr(t.indexOf(" ")+1)),r.type!=t&&void 0===r._widget){var a=j(e,r.type,!0);r=b(a,r),e[t]=r}r._writeable=!0,r._initialized=!0}if(void 0!==r._props){var l=r._props;if(0<(l=l.split(" ")).length&&void 0===r._writeable)throw O.error("Altering a non writable object ",t,l,r),"Altering a non writable object: "+t+" def: "+l;void 0===r._processedDefs&&(r._processedDefs={}),void 0===r._globalStyles&&(r._globalStyles={}),void 0===r._defaultValues&&(r._defaultValues={});for(var s=0;s<l.length;s++){var d=l[s];if(0!==d.length){var c=d,u=null,f=d.match(/^([^=\[\]]+)(\[\])?(=?)(.*)$/);if(null!==f&&(d=f[1],"[]"==f[2]&&(void 0===r[d]&&(r[d]=[]),u=[]),"="==f[3]&&(u=d.match(/(^v|V)isible$/)||d.match(/^customStyle$/)?"true"==String(f[4]).toLowerCase():f[4])),null!==u&&void 0===r._defaultValues[d]&&(r._defaultValues[d]=u),void 0===r[d]){var p=j(e,t+" "+d,!0);null===p&&(p=j(e,d,!0)),r[d]=p}r._processedDefs[d]=c,r._complex=!0}}delete r._props}if(n)return r._writeable=!1,b({},r);if(o)return r._writeable=!1,r;if(void 0===r._writeable||!1===r._writeable)throw"Retrieving non writeable object definition: "+t;return r},C=function(e,t){if(e){if(void 0===t._usecount)throw O.error("ERROR trying to bind an unused property while readonly",t),"ERROR trying to bind an unused property"}else void 0===t._usecount&&(t._usecount=0),t._usecount++},T=function(e,t,n,o,i,r,a,l){var s=n(r,a,l);if(void 0===e[o]._globalStyles[i]){if(t)throw"Cannot find _globalStyle for "+i+" in "+o+"!";(-1!=i.indexOf(".")||"object"==typeof e[o][i]&&void 0!==e[o][i]._widget)&&(e[o]._globalStyles[i]=s)}else if(e[o]._globalStyles[i]!=s)throw"Unexpected conflicting globalStyle [2] for "+o+"/"+i+": old="+e[o]._globalStyles[i]+" new="+s},E=function(e,t,n,o,i,r,a,l,s,d){var c,u,f;if("_theme_."==a.substr(0,8)){var p=a.indexOf(".",8);u="$root.content().theme()."+(c=a.substr(8,p-8))+"()."+(f=a.substr(p+1)).replace(new RegExp("\\.","g"),"().")}else u="_root_."==a.substr(0,7)?(c=o,"$root.content()."+(f=a.substr(7)).replace(new RegExp("\\.","g"),"().")):(c=i,f=r+a,a.replace(new RegExp("\\.","g"),"()."));if(void 0===t[c])throw"Cannot find model def for ["+c+"]";var b,v=f.indexOf("."),h=-1==v?f:f.substr(0,v);if(-1!=c.indexOf("-"))throw"Unexpected char in block name: "+c;if(-1!=h.indexOf("-"))throw"Unexpected char in property name: "+h;if(e)return void 0!==t[c]._globalStyle&&void 0!==t[c][h]&&"style"==t[c][h]._category&&(u+="._defaultComputed"),u;if(e){if(void 0!==l)throw"Cannot use defaultValue in readonly mode!";if(s)throw"Cannot use overrideDefault in readonly mode for "+c+"/"+f+"/"+s+"!";if(void 0!==d)throw"Cannot set category for "+c+"/"+f+"/"+d+" in readonly mode!";b=j(t,c,!1,!0)}else!1===t[c]._writeable&&O.log("TODO debug use cases for this condition",c,f),b=j(t,c,!1===t[c]._writeable);if(null===b)throw"Unexpected model for ["+c+"]";if(void 0===b[h]){if(e)throw"Cannot find path "+h+" for "+c+"!";S(t,c,h),b=j(t,c,!1)}void 0!==t[c]._globalStyle&&void 0!==t[c][h]&&null!==t[c][h]&&"style"==t[c][h]._category&&(u+="._defaultComputed");var g=b;try{if(C(e,g),-1!=v){var m=f;do{var y=m.substr(0,v);if(void 0===g[y])throw"Found an unexpected prop "+y+" for model "+c+" for "+f;g=g[y],C(e,g),v=(m=m.substr(v+1)).indexOf(".")}while(-1!=v);if(void 0===g[m]||null===g[m])throw"Found an unexpected path termination "+m+" for model "+c+" for "+f;g=g[m]}else g=g[f];if(null==g)throw"Unexpected null model for "+c+"/"+r+"/"+a;void 0!==d&&(g._category=d),C(e,g)}catch(e){throw O.error("Property lookup exception",e,c,f,i,a,t),e}if(void 0!==t[c]._globalStyle&&"object"==typeof t[c][h]&&null!==t[c][h]&&void 0!==t[c][h]._category&&"style"==t[c][h]._category){var w=E.bind(void 0,e,t,n,o,i,""),x=-1!=f.indexOf(".")?f.substr(f.indexOf(".")):"";if(-1!=x.indexOf(".",1))throw"TODO unsupported object nesting! "+f;var k=t[c]._globalStyle+"."+h;"object"==typeof t[c][h]&&null!==t[c][h]&&void 0!==t[c][h]._globalStyle&&(k=t[c][h]._globalStyle),T(t,e,w,c,h,k,void 0,!1);var _=k+x;if(void 0===l&&null!==t[c]._defaultValues[f]&&(l=t[c]._defaultValues[f]),T(t,e,w,c,f,_,l,s),void 0!==l){if(e)throw"Cannot set a new theme default value ("+l+") for "+_.substr(7)+" while in readonly mode!";n("default",_.substr(7),l)}l=null}if(void 0!==l)if(void 0===t[c]._defaultValues[f]||void 0!==s&&s){if(e)throw"Cannot set new _defaultValues [1] for "+f+" in "+c+"!";t[c]._defaultValues[f]=l}else if(null===l){if(e&&null!==t[c]._defaultValues[f])throw"Cannot set new _defaultValues [2] for "+f+" in "+c+"!";t[c]._defaultValues[f]=null}else if(t[c]._defaultValues[f]!=l)throw"Trying to set a new default value for "+c+" "+f+" while it already exists (current: "+t[c].defaultValues[f]+", new: "+l+")";return u};t.exports={ensurePathAndGetBindValue:E.bind(void 0,!1),getBindValue:E.bind(void 0,!0),generateModel:u,generateResultModel:function(e){var t=e._defs,n=e.templateName,o=u(t,n);return void 0!==t.theme&&(o.theme=u(t,"theme")),o},getDef:function(e,t){return j(e,t,!1,!0)},createOrUpdateBlockDef:S}},{"./domutils.js":53,"console-browserify":6}],57:[function(t,n,e){(function(e){"use strict";var C="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,T=t("console-browserify"),g=t("./utils.js"),s=t("./declarations.js"),m=t("./stylesheet.js"),y=t("./model.js"),E=t("./domutils.js"),w=function(e,t,n,o){var i,r=E.getAttribute(e,"replacedstyle"),a=null;o&&(i={uniqueId:"$data",attr:{id:"id"}});var l=null!==E.getAttribute(e,"data-ko-display");null===(a=s(r,void 0,t,n,e,i,l))?a=r:E.removeAttribute(e,"replacedstyle"),null!==a&&(0<a.trim().length?E.setAttribute(e,"style",a):E.removeAttribute(e,"style"))},x=function(e,t,n,o){var i=t(E.getAttribute(o,e));null!==i&&E.setAttribute(o,e,i)},k=function(t,l,s,r,d,e,c,a,n,S){try{var u;if("block"==e)u=E.getAttribute(t,"data-ko-block"),E.removeAttribute(t,"data-ko-block");else{if("template"!=e)throw"Unexpected context name while processing block: "+e;u=c}C("[data-ko-remove]",t).remove();for(var f=C("[data-ko-block]",t).replaceWith("<replacedblock>"),o=["href","src","data-ko-placeholder-src","background"],i=0;i<o.length;i++){var p=x.bind(void 0,o[i],d);C("["+o[i]+"]",t).each(p)}var b=E.getAttribute(t,"data-ko-properties");null===b&&(b=""),C("[data-ko-properties]",t).each(function(e,t){0<b.length&&(b+=" "),b+=E.getAttribute(t,"data-ko-properties"),E.removeAttribute(t,"data-ko-properties")}),y.createOrUpdateBlockDef(l,u,b,{contextName:e});var j=y.ensurePathAndGetBindValue.bind(void 0,l,s,c,u,"");"block"==e&&j("id",""),C("style",t).each(function(e,t){var n=E.getInnerHtml(t),o=y.createOrUpdateBlockDef.bind(void 0,l),i=y.ensurePathAndGetBindValue.bind(void 0,l,s,c),r=m(n,void 0,i,o,s,d,c,u);if(r!=n)if(""!==r.trim()){var a=S(r);E.setAttribute(t,"data-bind","template: { name: '"+a+"' }"),E.setContent(t,"")}else E.removeElements(C(t))}),w(t,d,j,n);for(var v=["data-ko-display","data-ko-editable","data-ko-wrap","href"],h=0;h<v.length;h++){if(E.getAttribute(t,v[h]))throw T.warn("ERROR: Unsupported "+v[h]+" used together with data-ko-block",t),"ERROR: Unsupported "+v[h]+" used together with data-ko-block"}return C("[data-ko-link]",t).each(function(e,t){var n=E.getAttribute(t,"data-ko-link"),o=E.getAttribute(t,"replacedstyle");null==o&&(o=""),o=""!==o?"-ko-attr-href: @"+n+"; "+o:"-ko-attr-href: @"+n,E.setAttribute(t,"replacedstyle",o),E.setAttribute(t,"data-ko-wrap",n),E.removeAttribute(t,"data-ko-link")}),C("[replacedstyle]",t).each(function(e,t){w(t,d,j,!1)}),C("[replacedhttp-equiv]",t).each(function(e,t){}),C("[data-ko-display]",t).each(function(e,t){!function(t,n,e){var o=E.getAttribute(n,t);try{var i=g.conditionBinding(o,e);C(n).before("\x3c!-- ko if: "+i+" --\x3e"),C(n).after("\x3c!-- /ko --\x3e"),E.removeAttribute(n,t)}catch(e){throw T.warn("Model ensure path failed in if/variant",n,o,t),e}}("data-ko-display",t,j)}),C("[data-ko-editable]",t).each(function(e,t){var n,o,i,r,a,l,s=E.getAttribute(t,"data-ko-editable");if(0<s.lastIndexOf(".")){var d=s.substr(0,s.lastIndexOf("."));a=j(d)}else a=j(s);if(l="wysiwygClick: function(obj, evt) { $root.selectItem("+a+", $data); return false }, clickBubble: false, wysiwygCss: { selecteditem: $root.isSelectedItem("+a+") }, scrollIntoView: $root.isSelectedItem("+a+")","img"!=E.getLowerTagName(t)){o=E.getInnerHtml(t);var c=j(s,o,!0,"wysiwyg");if(n="",E.getAttribute(t,"id")||(n+="wysiwygId: id()+'_"+s.replace(".","_")+"', "),void 0!==l&&(n+=l+", "),n+="wysiwygOrHtml: "+c,"td"==E.getLowerTagName(t)){var u=C('<div data-ko-wrap="false" style="width: 100%; height: 100%"></div>')[0];E.setAttribute(u,"data-bind",n);var f=E.getInnerHtml(C("<div></div>").append(u));E.setContent(t,f)}else r=(null!==(i=E.getAttribute(t,"data-bind"))?i+", ":"")+n,E.setAttribute(t,"data-bind",r),E.setContent(t,"");E.removeAttribute(t,"data-ko-editable")}else{var p=E.getAttribute(t,"width");if(""===p&&(p=null),null===p)throw T.error("ERROR: data-ko-editable images must declare a WIDTH attribute!",t),"ERROR: data-ko-editable images must declare a WIDTH attribute!";var b=E.getAttribute(t,"height");""===b&&(b=null);var v=E.getAttribute(t,"align"),h=(i=E.getAttribute(t,"data-bind"))&&i.match(/virtualAttr: {[^}]* height: ([^,}]*)[,}]/);h&&(b=h[1]);var g=i&&i.match(/virtualAttr: {[^}]* width: ([^,}]*)[,}]/);g&&(p=g[1]);var m,y="";(o=E.getAttribute(t,"data-ko-placeholder-src"))?y=E.getAttribute(t,"src"):o=E.getAttribute(t,"src");var w=b||E.getAttribute(t,"data-ko-placeholder-height"),x=p||E.getAttribute(t,"data-ko-placeholder-width");if(E.removeAttribute(t,"src"),E.removeAttribute(t,"data-ko-editable"),E.removeAttribute(t,"data-ko-placeholder-height"),E.removeAttribute(t,"data-ko-placeholder-width"),E.removeAttribute(t,"data-ko-placeholder-src"),o&&(m="{ width: "+x+", height: "+w+" }"),!x||!w)throw T.error("IMG data-ko-editable must declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height",t),"ERROR: IMG data-ko-editable MUST declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height";var k=j(s,y,!1,"wysiwyg");r=(null!==i?i+", ":"")+(n="wysiwygSrc: { width: "+p+", height: "+b+", src: "+k+", placeholder: "+m+" }"),E.setAttribute(t,"data-bind",r);var _=S(t),O="{ width: "+p;"left"==v?O+=", float: 'left'":"right"==v?O+=", float: 'right'":"top"==v?O+=", verticalAlign: 'top'":"middle"==v?O+=", verticalAlign: 'middle'":"bottom"==v&&(O+=", verticalAlign: 'bottom'"),O+="}",C(t).before("\x3c!-- ko wysiwygImg: { _data: $data, _item: "+a+", _template: '"+_+"', _editTemplate: 'img-wysiwyg', _src: "+k+", _width: "+p+", _height: "+b+", _align: "+(null===v?void 0:"'"+v+"'")+", _method: "+void 0+", _stylebind: "+O+" } --\x3e"),C(t).after("\x3c!-- /ko --\x3e")}}),C("[href]",t).each(function(e,t){var n=E.getAttribute(t,"href"),o="wysiwygHref: '"+g.addSlashes(n)+"'",i=E.getAttribute(t,"data-bind"),r=(null!==i?i+", ":"")+o;E.setAttribute(t,"data-bind",r)}),C("replacedblock",t).each(function(e,t){var n=f[e],o=k(n,l,s,r,d,"block",u,a,!0,S),i=y.ensurePathAndGetBindValue(l,s,c,u,"",o);C(t).before("\x3c!-- ko block: { data: "+g.addSlashes(i)+", template: 'block' } --\x3e"),C(t).after("\x3c!-- /ko --\x3e"),C(t).remove()}),C(C("[data-ko-wrap]",t).get().reverse(),t).each(function(e,t){var n=E.getAttribute(t,"data-ko-wrap");if(void 0===n||""===n||"true"===n)throw"Unsupported empty value for data-ko-wrap: use false value if you want to always remove the tag";var o,i,r=g.conditionBinding(n,j),a=E.getAttribute(t,"data-bind");if(""!==a&&null!==a&&a.match(/(block|wysiwygOrHtml):/)){var l="\x3c!-- ko "+a+" --\x3e"+E.getInnerHtml(t)+"\x3c!-- /ko --\x3e";o=S(l),E.removeAttribute(t,"data-ko-wrap"),i=S(t),E.replaceHtml(t,"\x3c!-- ko template: /* special */ (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+r+" ? '"+i+"' : '"+o+"' --\x3e\x3c!-- /ko --\x3e")}else o=S(E.getInnerHtml(t)),E.removeAttribute(t,"data-ko-wrap"),E.setContent(t,"\x3c!-- ko template: '"+o+"' --\x3e\x3c!-- /ko --\x3e"),i=S(t),E.replaceHtml(t,"\x3c!-- ko template: (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+r+" ? '"+i+"' : '"+o+"' --\x3e\x3c!-- /ko --\x3e")}),S(t,u,"show"),r(c,u,e,a),u}catch(e){throw T.error("Exception while parsing the template",e,t),e}};n.exports=function(o,e,i,r){var a={},t=function(e){return e.replace(/<!--\[if ([^\]]*)\]>((?:(?!--)[\s\S])*?)<!\[endif\]-->/g,function(e,t,n){var o="\x3c!-- cc:start --\x3e";o+=n.replace(/<([A-Za-z:]+)/g,"\x3c!-- cc:bo:$1 --\x3e<cc").replace(/<\/([A-Za-z:]+)>/g,"</cc>\x3c!-- cc:ac:$1 --\x3e").replace(/\/>/g,"/>\x3c!-- cc:sc --\x3e"),o+="\x3c!-- cc:end --\x3e";var i='<replacedcc condition="'+t+'" style="display: none">';return i+=C("<div>").append(C(o)).html().replace(/^<!-- cc:start -->/,"").replace(/<!-- cc:end -->$/,""),i+="</replacedcc>"})}(e.replace(/(<[^>]+\s)(style|http-equiv)(="[^"]*"[^>]*>)/gi,function(e,t,n,o){return t+"replaced"+n+o})),n="function"==typeof C.parseHTML?C(C.parseHTML(t,!1)):C(t),l=n[0],s=[],d=function(e,t,n,o){s.push({root:e,block:t,context:n,container:o})},c=function(e,t,n){if(void 0===a.themes&&(a.themes={}),void 0===a.themes[e]&&(a.themes[e]={}),void 0===a.themes[e][t]||null===a.themes[e][t])a.themes[e][t]=n;else if(null!=n){var o=a.themes[e][t];o!=n&&T.log("Error setting a new default for property "+t+" in theme "+e+". old:"+o+" new:"+n+"!")}},u=C("[data-ko-container]",n),f={};u.each(function(e,t){var n=E.getAttribute(t,"data-ko-container")+"Blocks";E.removeAttribute(t,"data-ko-container"),E.setAttribute(t,"data-bind","block: "+n);var o=C("> [data-ko-block]",t);E.removeElements(o,!0),f[n]=o}),y.createOrUpdateBlockDef(a,"id"),y.createOrUpdateBlockDef(a,"bodyTheme"),y.createOrUpdateBlockDef(a,"blocks","blocks[]"),y.createOrUpdateBlockDef(a,"text"),k(l,a,c,d,i,"template",o,void 0,!1,r);var p=function(e,t,n){k(n,a,c,d,i,"block",o,e,!0,r)};for(var b in f)if(f.hasOwnProperty(b)){var v=f[b],h=b;y.ensurePathAndGetBindValue(a,c,o,o,"",h+".blocks","[]"),v.each(p.bind(void 0,h))}var g={_defs:a,templateName:o,_blocks:s};return void 0!==a[o]._version&&(g.version=a[o]._version),g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./declarations.js":52,"./domutils.js":53,"./model.js":56,"./stylesheet.js":58,"./utils.js":59,"console-browserify":6}],58:[function(e,t,n){"use strict";var O=e("mensch/lib/parser.js"),S=e("console-browserify"),j=e("./utils.js"),C=e("./declarations.js"),T=function(e,t){for(var n,o,i,r,a=0;a<t.length;a++)if("rule"==t[a].type){for(var l=t[a].selectors,s=!1,d=!1,c=0;c<l.length;c++)l[c].match(/:preview$/)?d=!0:s=!0;if(d&&s)throw S.log("cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs ",l),"Cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs";if(!d&&!s)throw S.log("cannot find known selectors in @supports -ko-blockdefs ",l),"Cannot find known selectors in @supports -ko-blockdefs";if(s){n="",o={},i=t[a].declarations;for(var u,f=0;f<i.length;f++)"property"==i[f].type&&(u="'"!=(r=i[f].value)[0]&&'"'!=r[0]||r[r.length-1]!=r[0]?r:r.substr(1,r.length-2).replace(/\\([\s\S])/gm,"$1"),"label"==i[f].name?o.name=u:"context"==i[f].name?o.contextName=u:"properties"==i[f].name?n=u:"theme"==i[f].name?o.globalStyle="_theme_."+u:"themeOverride"==i[f].name?o.themeOverride="true"==String(u).toLowerCase():o[i[f].name]=u);for(var p=0;p<l.length;p++)e(l[p],n,o)}if(d)for(var b=0;b<l.length;b++){e(l[b].substr(0,l[b].indexOf(":")),void 0,{previewBindings:t[a].declarations})}}},E=function(e,t,n,o,i,r,a,l){var s,d=e,c=null;if(void 0===t){var u=O(e,{comments:!0,position:!0});if("stylesheet"!=u.type||void 0===u.stylesheet)throw S.log("unable to process styleSheet",u),"Unable to parse stylesheet";t=u.stylesheet.rules}for(var f=t.length-1;0<=f;f--){if("supports"==t[f].type&&"-ko-blockdefs"==t[f].name)T(o,t[f].rules),d=j.removeStyle(d,t[f].position.start,c,0,0,0,"");else if("media"==t[f].type||"supports"==t[f].type)d=E(d,t[f].rules,n,o,i,r,a,l);else if("comment"==t[f].type);else if("rule"==t[f].type){for(var p=t[f].selectors,b="",v=null,h=0;h<p.length;h++){0<b.length&&(b+=", ");var g=p[h].match(/\[data-ko-block=([^ ]*)\]/);if(null!==g){if(null!==v&&v!=g[1])throw"Found multiple block-match attribute selectors: cannot translate it ("+v+" vs "+g[1]+")";v=g[1]}b+="\x3c!-- ko text: templateMode =='wysiwyg' ? '#main-wysiwyg-area ' : '' --\x3e\x3c!-- /ko --\x3e"+p[h]}if(v){var m="\x3c!-- ko foreach: $root.findObjectsOfType($data, '"+v+"') --\x3e",y="\x3c!-- /ko --\x3e",w=c,x=" ";0<t[f].declarations.length&&(t[f].declarations[0].position.start.line!=t[f].position.end.line&&(x="\n"+new Array(t[f].position.start.col).join(" ")),w=t[f].declarations[t[f].declarations.length-1].position.end),null===w?d+=x+y:d=w==c?j.removeStyle(d,w,c,0,0,0,x+y):j.removeStyle(d,w,c,0,0,0,x+"}"+x+y),b=m+x+b.replace(new RegExp("\\[data-ko-block="+v+"\\]","g"),"\x3c!-- ko text: '#'+id() --\x3e"+v+"\x3c!-- /ko --\x3e"),o(v,"",{contextName:"block"})}var k=v||l;s=n.bind(this,k,"");var _=C(d,t[f].declarations,r,s);null!==_&&(d=_),d=j.removeStyle(d,t[f].position.start,t[f].position.end,0,0,0,b)}else S.log("Unknown rule type",t[f].type,"while parsing <style> rules");c=t[f].position.start}return d};t.exports=E},{"./declarations.js":52,"./utils.js":59,"console-browserify":6,"mensch/lib/parser.js":19}],59:[function(e,t,n){"use strict";var d=e("console-browserify"),o=e("jsep");o.addBinaryOp("or",1),o.addBinaryOp("and",2),o.addBinaryOp("eq",6),o.addBinaryOp("neq",6),o.addBinaryOp("lt",7),o.addBinaryOp("lte",7),o.addBinaryOp("gt",7),o.addBinaryOp("gte",7);var c=function(e,t,n){return function t(e,n,o,i){if("BinaryExpression"===e.type||"LogicalExpression"===e.type)return"("+t(e.left,n,o)+" "+function(e){switch(e){case"or":return"||";case"and":return"&&";case"lt":return"<";case"lte":return"<=";case"gt":return">";case"gte":return">=";case"eq":return"==";case"neq":return"!=";default:return e}}(e.operator)+" "+t(e.right,n,o)+")";if("CallExpression"===e.type){var r=e.arguments.map(function(e){return t(e,n,o)});return t(e.callee,n,o)+"("+r.join(", ")+")"}if("UnaryExpression"===e.type)return e.operator+t(e.argument,n,o);if("MemberExpression"==e.type&&e.computed)throw"Unexpected computed member expression";if("MemberExpression"!=e.type||e.computed){if("Literal"===e.type)return e.raw;if("Identifier"===e.type){var a=e.name;return o?n(a,i)+"()":a}if("ConditionalExpression"===e.type)return"("+t(e.test,n,o)+" ? "+t(e.consequent,n,o)+" : "+t(e.alternate,n,o)+")";throw"Compound"===e.type?"Syntax error in expression: operator expected after "+t(e.body[0],n,!1):"Found an unsupported expression type: "+e.type}var l=t(e.object,n,!1)+"."+t(e.property,n,!1);return o&&"Math"!==e.object.name&&"Color"!==e.object.name&&"Util"!==e.object.name?n(l,i)+"()":l}(o(e),t,!0,n)};t.exports={addSlashes:function(e){return e.replace(/[\\"'\r\n\t\v\f\b]/g,"\\$&").replace(/\u0000/g,"\\0")},removeStyle:function(e,t,n,o,i,r,a){for(var l=e.split("\n"),s=i,d=r,c=1+o;c<t.line;c++)s+=l[c-1-o].length+1;if(s+=t.col,null!==n){for(var u=1+o;u<n.line;u++)d+=l[u-1-o].length+1;d+=n.col}else d+=e.length+1;return e.substr(0,s-1)+a+e.substr(d-1)},conditionBinding:c,expressionBinding:function(t,a,e){var l;if(null!=e){var n=t.trim().replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b/g,"###var###");if("###var###"==(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")))l=[null,e];else if(n="^"+n.replace(/###var###/g,"(.+)")+"$",!(l=e.trim().match(new RegExp(n))))throw d.error("Cannot find matches",l,"for",e,t,n,t),"Cannot find default value for "+t+" in "+e}try{var s=0,o="'"+t.replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b|(')/g,function(e,t,n,o){if(o)return"\\"+o;s++;var i,r=t||n;if(l){if(void 0===l[s])throw d.log("Cannot find default value for",r,"in",l,"as",s),"Cannot find default value for "+r+" at "+s;i=l[s].trim()}return t?"'+"+c(t,a,i)+"+'":"'+"+a(r,i)+"()+'"})+"'";if(o=o.replace(/^''\+/,"").replace(/\+''$/,"").replace(/^([^'+ ]*)\(\)$/,"$1"),0===s&&"false"!==o&&"true"!==o)throw d.error("Unexpected expression with no valid @variable references",t),"Unexpected expression with no valid @variable references: "+t;return o}catch(e){throw"Exception parsing expression "+t+" "+e}}}},{"console-browserify":6,jsep:9}],60:[function(t,i,e){(function(e){"use strict";var c="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,F=t("console-browserify");function d(e){var t=typeof e;if("object"===t&&(e?e.constructor==Date?t="date":"[object Array]"==Object.prototype.toString.call(e)&&(t="array"):t="null"),"array"==t){var n=c.observableArray();if(!e||0===e.length)return n;for(var o=0,i=e.length;o<i;++o)n.push(d(e[o]));return n}if("object"==t){var r={};for(var a in e){var l=e[a];r[a]=d(l)}return c.observable(r)}if("function"==t)return e;var s=c.observable();return s(e),s}var L=function(i,r,a,l,s,d){return c.computed({read:function(){var e=i();if(null!==e)return e;var t=c.utils.unwrapObservable(l);return void 0===t||"custom"==t?c.utils.unwrapObservable(r):d[t][s]},write:function(e){var t,n=c.utils.unwrapObservable(l);if(t=void 0===n||"custom"==n?c.utils.peekObservable(r):d[n][s],a)i(e==t?null:e);else{var o=c.utils.peekObservable(i);e==t&&null===o||i(e)}}})},U=function(e,t,n,o,i,r,a){if(void 0===e){if(void 0===o.utils.unwrapObservable(a).type)throw F.error("Found a non-typed def ",e,a),"Found a non-typed def "+e;var l=o.utils.unwrapObservable(o.utils.unwrapObservable(a).type);if("object"!=typeof(e=t[l]))throw F.error("Found a non-object def ",e,"for",l),"Found a non-object def "+e}void 0===i&&void 0!==r&&r&&(i=a);var s="$root.content().",d=e._globalStyles;if(void 0!==d)for(var c in d)if(d.hasOwnProperty(c)){var u,f,p,b="$root.content().theme().scheme";if(d[c].substr(0,s.length)!=s)throw"UNEXPECTED globalStyle path ("+d[c]+") outside selfPath ("+s+")";p=d[c].substr(s.length),f=i,u=b.substr(0,s.length)==s?b.substr(s.length):(F.log("Scheme path doesn't match selfPath",b,s),b);for(var v=f,h=p.split("()."),g="",m=!0,y=0;y<h.length;y++)f=o.utils.unwrapObservable(f)[h[y]],m?"theme"==h[y]&&(m=!1):(0<g.length&&(g+="."),g+=h[y]);for(var w=u.split("()."),x=0;x<w.length;x++)v=o.utils.unwrapObservable(v)[w[x]];for(var k=c.split("."),_=a,O=0;O<k.length;O++)_=o.utils.unwrapObservable(_)[k[O]];if(!o.isObservable(_))throw"Unexpected non observable target "+c+"/"+g;_._defaultComputed=L(_,f,!0,v,g,n)}if(void 0!==e._variant){for(var S=e._variant.split("."),j=a,C=o.utils.unwrapObservable(a),T=0;T<S.length;T++)j=o.utils.unwrapObservable(j)[S[T]];if(void 0!==j._defaultComputed&&(F.log("Found variant on a style property: beware variants should be only used on content properties because they don't match the theme fallback behaviour",e._variant),j=j._defaultComputed),void 0===j)throw F.error("Error looking for variant target",e._variant,a),"Error looking for variant target "+e._variant;C._nextVariant=function(e,t,n){for(var o=e.utils.unwrapObservable(t),i=0;i<n.length&&e.utils.peekObservable(n[i])!=o;i++);i==n.length&&(F.warn("Didn't find a variant!",t,o,n),i=n.length-1);var r=i+1;r==n.length&&(r=0),t(e.utils.peekObservable(n[r]))}.bind(j,o,j,function(e){var t=e._variant;if("object"!=typeof e[t]||void 0===e[t]._widget||"string"!=typeof e[t]._options&&"boolean"!==e[t]._widget)throw F.error("Unexpected variant declaration",t,e[t]),"Unexpected variant declaration: cannot find property "+t+" or its _options string and it is not a boolean";return"string"==typeof e[t]._options?function(e){for(var t=e.split("|"),n=[],o=0;o<t.length;o++){var i=t[o].split("=");n.push(i[0].trim())}return n}(e[t]._options):[!0,!1]}(e))}for(var E in e)if(e.hasOwnProperty(E)){var A=e[E];if("object"==typeof A&&null!==A&&void 0!==A._context&&"block"==A._context){var $=i[E](),H=U(t[E],t,n,o,i,r,$);a[E](H)}else if("object"==typeof A&&null!==A&&"blocks"==A.type){for(var M,I,B,D=i[E](),P=D.blocks(),N=0;N<P.length;N++)M=o.utils.unwrapObservable(P[N]),I=o.utils.unwrapObservable(M.type),B=U(t[I],t,n,o,i,r,M),P[N](B);var R=D.blocks;z(R,V.bind(D,void 0,t,n,o,void 0,i,r)),i[E]._wrap=q.bind(i[E],R._instrumentBlock),i[E]._unwrap=Q.bind(i[E])}}return a},z=function(e,t){e._instrumentBlock=t,void 0===e.origPush&&(e.origPush=e.push,e.push=n.bind(e),e.origSplice=e.splice,e.splice=o.bind(e))},q=function(e,t){var n=c.toJS(t),o=n.blocks;n.blocks=[];var i=d(n)();z(i.blocks,e);for(var r=0;r<o.length;r++){var a=c.toJS(o[r]);a.id="block_"+r,i.blocks.push(a)}this(i)},n=function(){if(1<arguments.length)throw"Array push with multiple arguments not implemented";if(0<arguments.length&&c.isObservable(arguments[0])&&("function"==typeof arguments[0]._unwrap?arguments[0]=arguments[0]._unwrap():F.log("WARN: pushing observable with no _unwrap function (TODO remove me, expected condition)")),c.isObservable(arguments[0]))return this.origPush.apply(this,arguments);var e=this._instrumentBlock(arguments[0]);return this.origPush.apply(this,[e])},o=function(){if(3<arguments.length)throw"Array splice with multiple objects not implemented";if(2<arguments.length&&c.isObservable(arguments[2])&&("function"==typeof arguments[2]._unwrap?arguments[2]=arguments[2]._unwrap():F.log("WARN: splicing observable with no _unwrap function (TODO remove me, expected condition)")),2<arguments.length&&!c.isObservable(arguments[2])){var e=this._instrumentBlock(arguments[2]);return this.origSplice.apply(this,[arguments[0],arguments[1],e])}return this.origSplice.apply(this,arguments)},V=function(e,t,n,o,i,r,a,l){void 0===i&&(i=l);var s=d(i);return s(U(e,t,n,o,r,a,s())),s._unwrap=Q.bind(s),s},Q=function(){return c.toJS(this)};i.exports=function(e,t,n){var o=V.bind(void 0,t,n,n.themes),i=o(c,e,void 0,!0);return i._wrap=function(e,t){this(c.utils.unwrapObservable(e(c,t,void 0,!0)))}.bind(i,o),i._unwrap=Q.bind(i),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],61:[function(e,i,t){(function(t){var n=e("tinycolor2");function o(n){this.getBrightness=function(e){return n(e).getBrightness()},this.isLight=function(e){return n(e).isLight()},this.isDark=function(e){return n(e).isDark()},this.getLuminance=function(e){return n(e).getLuminance()},this.lighten=function(e,t){return n(e).lighten(t).toHexString()},this.brighten=function(e,t){return n(e).brighten(t).toHexString()},this.darken=function(e,t){return n(e).darken(t).toHexString()},this.desaturate=function(e,t){return n(e).desaturate(t).toHexString()},this.saturate=function(e,t){return n(e).saturate(t).toHexString()},this.greyscale=function(e){return n(e).greyscale().toHexString()},this.spin=function(e,t){return n(e).spin(t).toHexString()},this.complement=function(e){return n(e).complement().toHexString()},this.mix=n.mix,this.readability=n.readability,this.isReadable=n.isReadable,this.mostReadable=n.mostReadable}i.exports=function(e){t.Color=new o(n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{tinycolor2:24}],62:[function(t,n,e){(function(e){"use strict";t("console-browserify");var i="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,r=t("juice/lib/inline")({}).inlineDocument;n.exports=function(e){e.inline=function(n){i("[style]:not([replacedstyle])",n).each(function(e,t){var n=i(t);n.attr("replacedstyle",n.attr("style"))});var o=[];i('style[data-inline="true"]',n).each(function(e,t){var n=i(t).html();n=(n=n.replace(/<!-- ko ((?!--).)*? -->/g,"")).replace(/<!-- \/ko -->/g,""),o.push(n),i(t).removeAttr("data-inline")});var e=o.join("\n"),t=function(e,t){return void 0===t&&(t=n),i(e,t)};t.root=function(){return i(":root",n)},r(t,e,{styleAttributeName:"replacedstyle"})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6,"juice/lib/inline":10}],63:[function(e,t,n){(function(s){"use strict";var d=e("console-browserify"),n="undefined"!=typeof window?window.ko:void 0!==s?s.ko:null,c="undefined"!=typeof window?window.jQuery:void 0!==s?s.jQuery:null,a=function(e,l){return function(o,i,r){var e={name:"Save",enabled:n.observable(!0),execute:function(){e.enabled(!1),r.metadata.changed=Date.now(),void 0===r.metadata.key&&(d.warn("Unable to find key in metadata object...",r.metadata),r.metadata.key=o),s.localStorage.setItem("metadata-"+o,r.exportMetadata()),s.localStorage.setItem("template-"+o,r.exportJSON()),e.enabled(!0)}},a={name:"Test",enabled:n.observable(!0)},t={name:"Download",enabled:n.observable(!0)};a.execute=function(){a.enabled(!1);var e=s.localStorage.getItem("testemail");if(null!==e&&"null"!=e||(e=r.t("Insert here the recipient email address")),"function"!=typeof s.prompt)s.alert(r.t("This feature is not supported by your browser")),a.enabled(!0);else if(null!=(e=s.prompt(r.t("Test email address"),e))&&e.match(/@/)){s.localStorage.setItem("testemail",e);var t=l||"/dl/",n=c.post(t,{action:"email",rcpt:e,subject:"[test] "+o+" - "+i,html:r.exportHTML()},null,"html");n.fail(function(){d.log("fail",arguments),r.notifier.error(r.t("Unexpected error talking to server: contact us!"))}),n.success(function(){d.log("success",arguments),r.notifier.success(r.t("Test email sent..."))}),n.always(function(){a.enabled(!0)})}else s.alert(r.t("Invalid email address")),a.enabled(!0)},t.execute=function(){t.enabled(!1),r.notifier.info(r.t("Downloading...")),r.exportHTMLtoTextarea("#downloadHtmlTextarea");var e=l||"/dl/";s.document.getElementById("downloadForm").setAttribute("action",e),s.document.getElementById("downloadForm").submit(),t.enabled(!0)},r.save=e,r.test=a,r.download=t}.bind(void 0,e.key,e.name)};t.exports=function(e,t){var n=s.localStorage.getItem("metadata-"+e);if(null===n)throw"Cannot find stored data for "+e;var o,i=s.localStorage.getItem("template-"+e);null!==i&&(o=JSON.parse(i));var r=JSON.parse(n);return{metadata:r,model:o,extension:a(r,t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],64:[function(e,n,t){(function(t){n.exports=function(e){t.Util={decodeURI:decodeURI,encodeURI:encodeURI,decodeURIComponent:decodeURIComponent,encodeURIComponent:encodeURIComponent}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(e,t,n){"use strict";e("knockout-sortable"),e("./bindings/jqueryui-spinner.js"),e("./bindings/jqueryui-tabs.js"),e("./bindings/colorpicker.js"),e("./bindings/blocks.js"),e("./bindings/csstext.js"),e("./bindings/bind-iframe.js"),e("./bindings/extdroppable.js"),e("./bindings/preloader.js"),e("./bindings/fileupload.js"),e("./bindings/virtuals.js"),e("./bindings/wysiwygs.js"),e("./bindings/scrollfix.js"),e("./bindings/if-subs.js"),e("./bindings/extsortables.js"),e("./bindings/eventable.js"),e("./bindings/tooltips.js"),e("./bindings/extender-pagination.js"),e("./bindings/validated-value.js"),e("./bindings/scrollintoview.js")},{"./bindings/bind-iframe.js":29,"./bindings/blocks.js":30,"./bindings/colorpicker.js":32,"./bindings/csstext.js":33,"./bindings/eventable.js":34,"./bindings/extdroppable.js":35,"./bindings/extender-pagination.js":36,"./bindings/extsortables.js":37,"./bindings/fileupload.js":38,"./bindings/if-subs.js":39,"./bindings/jqueryui-spinner.js":40,"./bindings/jqueryui-tabs.js":41,"./bindings/preloader.js":42,"./bindings/scrollfix.js":44,"./bindings/scrollintoview.js":45,"./bindings/tooltips.js":47,"./bindings/validated-value.js":48,"./bindings/virtuals.js":49,"./bindings/wysiwygs.js":50,"knockout-sortable":14}],66:[function(t,i,e){(function(H){"use strict";var M="undefined"!=typeof window?window.jQuery:void 0!==H?H.jQuery:null,I="undefined"!=typeof window?window.ko:void 0!==H?H.ko:null,B="undefined"!=typeof window?window.kojqui:void 0!==H?H.kojqui:null,D=t("./converter/main.js"),P=t("console-browserify"),N=t("./viewmodel.js"),R=t("./bindings/choose-template.js");if(!M.ui.version.match(/^1\.11\..*$/))throw"Usupported jQuery UI version detected: "+M.ui.version+" (we only support 1.11.*)";var F=function(e,t,n,o){var i,r,a,l,s;s=[],a=void 0!==o&&o?(i=e.length-1,r=0,-1):(i=0,r=e.length-1,1);for(var d=i;d!=r+a;d+=a)void 0!==e[d][t]&&void 0!==(l=e[d][t].apply(e[d],n))&&s.push(l);return s},n=I.utils.domNodeDisposal.addDisposeCallback;I.utils.domNodeDisposal.addDisposeCallback=function(e,t){n(e,function(e){try{t(e)}catch(e){"function"==typeof P.debug&&P.debug("Caught unexpected dispose callback exception",e)}})};function L(t){var n;return{viewModel:function(e){n=t(e)},init:function(){void 0!==n&&void 0!==n.init&&n.init()},dispose:function(){void 0!==n&&void 0!==n.dispose&&n.dispose()}}}var u=function(e,t,n,o,i,r,a,l){var s=o.match(/^([\S\s]*)([<]html[^>]*>[\S\s]*<\/html>)([\S\s]*)$/i);if(null===s)throw"Unable to find <html> opening and closing tags in the template";var d=s[1],c={"<html":0,"<head":0,"<body":0,"</html":0,"</body":0,"</head":0},u=s[2].replace(/(<\/?)(html|head|body)([^>]*>)/gi,function(e,t,n,o){return c[(t+n).toLowerCase()]+=1,t+"replaced"+n+o});for(var f in c)if(c.hasOwnProperty(f)&&1!=c[f]){if(0===c[f])throw"ERROR: missing mandatory element "+f+">";if(1<c[f])throw"ERROR: multiple element "+f+"> occourences are not supported (found "+c[f]+" occourences)"}var p=s[3],b=[],v=[];if(void 0!==a)for(var h=0;h<a.length;h++)"function"==typeof a[h]?v.push(L(a[h])):v.push(a[h]);var g=[],m={adder:function(e,t){if("string"!=typeof t)throw"Template system: cannot create new template "+e;var n=t.match(/(data)?-ko-[^ =:]*/g);n&&P.error("ERROR: found unexpected -ko- attribute in compiled template",e,", you probably mispelled it:",n),R.addTemplate(e,t),g.push(e)},exists:function(e){return void 0!==R.getTemplateContent(e)},dispose:function(){for(var e=g.length-1;0<=e;e--)R.removeTemplate(g[e])}};I.bindingHandlers.block.templateExists=m.exists;for(var y=function(e,t,n,o){var i=n;for(void 0!==n&&void 0!==o&&("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()||(i+="-"+o));null==i||e.exists(i);)i="anonymous-"+Math.floor(1e5*Math.random()+1);if("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()){var r=M(t),a=M("replacedhead",r),l=M("replacedbody",r);e.adder(i+"-head",a.html()||""),e.adder(i+"-show",l.html()||""),e.adder(i+"-preview",r.html()),e.adder(i+"-wysiwyg",r.html()),a.children().detach(),a.html("\x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e"),a.before("\x3c!-- ko withProperties: { templateMode: 'head' } --\x3e"),a.after("\x3c!-- /ko --\x3e"),l.html("\x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e"),e.adder(i+"-iframe",r[0].outerHTML)}else"object"==typeof t?e.adder(i,t.outerHTML):e.adder(i,t);return i}.bind(void 0,m),w=e("translateTemplate",D.translateTemplate.bind(void 0,n,u,t,y)),x=e("generateModel",D.wrappedResultModel.bind(void 0,w)),k={},_=F(v,"widget",[M,I,B]),O=0;O<_.length;O++)k[_[O].widget]=_[O];b.push.apply(b,e("generateEditors",D.generateEditors.bind(void 0,w,k,t,y,"+$root.contentListeners()")));var S=!1;if(null!=i){var j;j="string"==typeof i?I.utils.parseJson(i):i,2==e("checkModel",D.checkModel.bind(void 0,x._unwrap(),b,j))&&(P.error("Trying to compile an incompatible template version!",x._unwrap(),b,j),S=!0);try{x._wrap(j)}catch(e){P.error("Unable to inject model content!",e),S=!0}}var C=d+R.getTemplateContent(n+"-iframe").replace(/(<\/?)replaced(html|head|body)([^>]*>)/gi,function(e,t,n,o){return t+n+o})+p,T=I.bindingHandlers.bindIframe.tpl;I.bindingHandlers.bindIframe.tpl=C;var E={dispose:function(){I.bindingHandlers.bindIframe.tpl=T}};v.push(E),v.push(m);var A=e("initializeViewmodel",N.bind(this,x,b,t,l));A.metadata=r;var $="0.17.5";return void 0!==A.metadata.editorversion&&A.metadata.editorversion!==$&&P.log("The model being loaded has been created with a different editor version",A.metadata.editorversion,"runtime:",$),A.metadata.editorversion=$,void 0!==w.version&&(void 0!==A.metadata.templateversion&&A.metadata.templateversion!==w.version&&P.log("The model being loaded has been created with a different template version",A.metadata.templateversion,"runtime:",w.version),A.metadata.templateversion=w.version),R.init(),v.push(function(t){return{viewModel:function(e){try{t("applyBindings",I.applyBindings.bind(void 0,e))}catch(e){throw P.warn(e,e.stack),e}},dispose:function(){try{t("unapplyBindings",I.cleanNode.bind(this,H.document.body))}catch(e){throw P.warn(e,e.stack),e}}}}(e)),F(v,"viewModel",[A]),S&&M("#incompatible-template").dialog({modal:!0,appendTo:"#mo-body",buttons:{Ok:function(){M(this).dialog("close")}}}),{model:A,init:function(){F(v,"init",void 0,!0)},dispose:function(){F(v,"dispose",void 0,!0)}}},e=function(e,t){if(!t())throw P.warn("Missing required browser feature",e),"Missing required browser feature: "+e},o=function(){var e="checkbadbrowsersframe",t=I.bindingHandlers.bindIframe.tpl;I.bindingHandlers.bindIframe.tpl='<!DOCTYPE html>\r\n<html>\r\n<head><title>A</title>\r\n</head>\r\n<body><p align="right" data-bind="attr: { align: \'left\' }">B</p><div data-bind="text: content"></div></body>\r\n</html>\r\n',M("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var n=H.document.getElementById(e);I.applyBindings({content:"dummy content"},n);var o=n.contentWindow.document.doctype,i="<!DOCTYPE "+o.name+(o.publicId?' PUBLIC "'+o.publicId+'"':"")+(!o.publicId&&o.systemId?" SYSTEM":"")+(o.systemId?' "'+o.systemId+'"':"")+">"+"\n"+n.contentWindow.document.documentElement.outerHTML;I.cleanNode(n),I.removeNode(n),I.bindingHandlers.bindIframe.tpl=t;var r='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p align="left" data-bind="attr: { align: \'left\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',a='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p data-bind="attr: { align: \'left\' }" align="left">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>';if(r!=i&&a!=i)throw P.info("BadBrowser.FrameContentCheck",i.length,r.length,a.length,i==r,i==a),P.warn("Detected incompatible/misbehaving browser, probably introduced by a bad browser extension."),P.warn(i),"Detected misbehaving browser/extension: unexpected frame content."};i.exports={compile:u,load:function(t,e,n,o,i,r){var a="string"==typeof e?e:n.template,l="./",s=a.lastIndexOf("/");-1!=s&&(l=a.substr(0,s+1));var d,c=function(e,t){return t.match(/^[^\/]*:/)||t.match(/^\//)||t.match(/^\[/)||t.match(/^#?$/)?null:e+t}.bind(void 0,l);d=void 0===n?{template:a,name:"No name",created:Date.now()}:n,M.get(a,function(e){u(t,c,"template",e,o,d,i,r).init()})},isCompatible:function(t){try{return e("matchMedia",function(){return void 0!==H.matchMedia}),e("XMLHttpRequest 2",function(){return"XMLHttpRequest"in H&&"withCredentials"in new H.XMLHttpRequest}),e("ES5 strict",function(){return function(){return void 0===this}()}),e("CSS borderRadius",function(){return void 0!==H.document.body.style.borderRadius}),e("CSS boxShadow",function(){return void 0!==H.document.body.style.boxShadow}),e("CSS boxSizing",function(){return void 0!==H.document.body.style.boxSizing}),e("CSS backgroundSize",function(){return void 0!==H.document.body.style.backgroundSize}),e("CSS backgroundOrigin",function(){return void 0!==H.document.body.style.backgroundOrigin}),o(),!0}catch(e){if(t)throw e;return!1}},fixPageEvents:function(){H.addEventListener&&(H.addEventListener("drag",function(e){(e=e||H.event).preventDefault()},!1),H.addEventListener("dragstart",function(e){(e=e||H.event).preventDefault()},!1),H.addEventListener("dragover",function(e){(e=e||H.event).preventDefault()},!1),H.addEventListener("drop",function(e){(e=e||H.event).preventDefault()},!1),H.document.body.addEventListener("drop",function(e){e.preventDefault()},!1)),H.document.ondragstart&&(H.document.ondragstart=function(){return!1})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bindings/choose-template.js":31,"./converter/main.js":55,"./viewmodel.js":71,"console-browserify":6}],67:[function(e,t,n){"use strict";var r=e("console-browserify"),a=[];t.exports={timedCall:function(e,t){var n,o=(new Date).getTime();"object"==typeof r&&r.time&&r.time(e),n=function(e){return e()}(t),"object"==typeof r&&r.time&&r.timeEnd(e);var i=(new Date).getTime()-o;return"object"!=typeof r||r.time||"function"==typeof r.debug&&r.debug(e,"took",i,"ms"),a.push({name:e,time:i}),100<a.length&&a.unshift(),n},logs:a}},{"console-browserify":6}],68:[function(t,n,e){(function(e){"use strict";var o="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,i=t("./undomanager.js"),r=t("./undoserializer.js");n.exports=function(n){return function(e){e.contentListeners(e.contentListeners()+2);var t=i(e.content,{levels:100,undoLabel:o.computed(function(){return e.t("Undo (#COUNT#)")}),redoLabel:o.computed(function(){return e.t("Redo")})});return e.undo=t.undoCommand,e.undo.execute=n.bind(e,"undo",e.undo.execute),e.redo=t.redoCommand,e.redo.execute=n.bind(e,"redo",e.redo.execute),e.undoReset=n.bind(e,"undoReset",t.reset),e.setUndoModeMerge=t.setModeMerge,e.setUndoModeOnce=t.setModeOnce,t.setModeIgnore(),t.setUndoActionMaker(r.makeUndoAction.bind(void 0,e.content)),r.watchEnabled(!0),{pause:function(){t.setModeIgnore()},run:function(){t.setModeOnce()},init:function(){t.setModeOnce()},dispose:function(){e.contentListeners(e.contentListeners()-2),r.watchEnabled(!1),t.dispose()}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./undomanager.js":69,"./undoserializer.js":70}],69:[function(t,n,e){(function(e){"use strict";var h="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,g=t("ko-reactor/dist/ko-reactor.min.js"),m=t("console-browserify");n.exports=function(e,o){var r,t=h.observableArray(),n=h.observableArray(),a=0,l=0,i={levels:100,undoLabel:"undo (#COUNT#)",redoLabel:"redo (#COUNT#)"};o="object"==typeof o?h.utils.extend(i,o):i;var s=function(e){1==a?d(e,n):2==a?d(e,t):0==a&&(d(e,t),n.removeAll())},d=function(e,t){if(0<t().length){var n=function(e,t){return void 0!==e.mergedAction?e.mergedAction(t):null}(t()[t().length-1],e);if(null!==n)return void(t()[t().length-1]=n)}t().length>=o.levels&&t.shift(),(r=t).push(e)},c=function(e,o,i){return{name:h.computed(function(){return h.utils.unwrapObservable(e).replace(/#COUNT#/,i().length)}),enabled:h.computed(function(){return 0!==i().length}),execute:function(){var e=i.pop();if(e){var t=a;a=o;var n=l;l=3,e(),u(r),l=n,a=t}return!0}}},u=function(e){if(void 0===e)throw"Unexpected operation: stack cleaner called with undefined stack";0<e().length&&void 0!==e()[e().length-1].mergedAction&&delete e()[e().length-1].mergedAction},f=function(e,t){var n=function(e,t){e(),t()}.bind(void 0,e,t);return void 0!==e.mergedAction&&(n.mergedAction=e.mergedAction),n},p=function(e,t,n){if(void 0!==t)e(t);else{if(!n)throw"Unexpected condition: no item and no child.oldValues!";if("added"!==n.status&&"deleted"!==n.status)throw"Unsupported item.status: "+n.status;void 0!==n.moved?"added"==n.status&&(e.splice(n.index,1),e.splice(n.moved,0,n.value)):"added"==n.status?e.splice(n.index,1):e.splice(n.index,0,n.value)}},b=function(e,t,n,o,i){return e.bind(void 0,n,o,i)},v=("function"==typeof g?g:h.watch)(e,{depth:-1,oldValues:1,mutable:!0,tagFields:!0,async:!1},function(e,t,n){var o=void 0!==t.oldValues?t.oldValues[0]:void 0,i=b(p,e,t,o,n);1!=l&&(3==l?void 0!==i&&(i.mergedAction=function(e){return void 0!==e.mergeMe&&e.mergeMe?f(e,this):null},i.mergeMe=!0):void 0!==i&&(t.oldValues&&2==l&&(i.mergedAction=function(e,t,n){return"object"==typeof n.mergeableAction&&e==n.mergeableAction.child?this:null}.bind(i,t,n),i.mergeableAction={child:t,item:n}),!n||"deleted"!=n.status&&"added"!=n.status?n&&m.warn("Unsupported item.status",n.status,typeof n,n):(i.mergedAction=function(e,t,n){return"object"==typeof n.mergeableMove&&t.value==n.mergeableMove.item.value?f(n,this):null}.bind(i,t,n),i.mergeableMove={child:t,item:n})),void 0!==i&&s(i))},{});return{push:s,undoCommand:c(o.undoLabel,1,t),redoCommand:c(o.redoLabel,2,n),reset:function(){t.removeAll(),n.removeAll()},setModeOnce:function(){l=2,u(t)},setModeMerge:function(){l=3,u(t)},setModeNormal:function(){l=0,u(t)},setModeIgnore:function(){l=1,u(t)},setUndoActionMaker:function(e){b=e},dispose:function(){v.dispose()}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6,"ko-reactor/dist/ko-reactor.min.js":15}],70:[function(n,o,e){(function(e){"use strict";var l,t,s="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,d=n("console-browserify"),c=function(e,t){for(var n,o,i=0,r=e;i<t.length;)switch(t.charAt(i)){case"(":")"==t.charAt(i+1)&&(r=r()),i+=2;break;case"[":o=t.indexOf("]",i),r=r[t.substring(i+1,o)],i=o+1;break;case".":-1==(n=t.indexOf("(",i))&&(n=t.length),-1==(o=t.indexOf("[",i))&&(o=t.length),o=Math.min(n,o),r=r[t.substring(i+1,o)],i=o}return r},u=function(e,t){for(var n,o="",i=e.length,r=0;r<=i;r++)if(void 0!==(n=r<e.length?e[r]:t)._fieldName)s.isObservable(n)&&(o+="()"),o+="."+n._fieldName;else if(0<r&&"function"==typeof e[r-1].pop){var a=s.isObservable(e[r-1])?s.utils.peekObservable(e[r-1]):e[r-1],l=s.utils.arrayIndexOf(a,n);if(-1==l)throw d.error("Unexpected object not found in parent array",a,n,r,e.length,s.toJS(a),s.utils.unwrapObservable(n)),"Unexpected object not found in parent array";s.isObservable(n)&&(o+="()"),o+="["+l+"]"}else if(0!==i||void 0!==n._fieldName)throw d.error("Unexpected parent with no _fieldName and no parent array",r,e,typeof n),"Unexpected parent with no _fieldName and no parent array";return o};o.exports={dereference:u,reference:c,makeUndoAction:function(e,t,n,o,i,r){try{var a=u(n,o);if("object"!=typeof i&&"function"!=typeof i||(i=s.toJS(i)),void 0===r||"object"!=typeof r.value&&"function"!=typeof r.value||(r=s.toJS(r)),void 0!==l)try{l(a,o,i,r)}catch(e){d.log("Undoserializer ignoring exception in listener callback")}return function(e,t,n,o,i){e(c(t,n),o,i)}.bind(void 0,t,e,a,i,r)}catch(e){d.error("Exception processing undo",e,n,o,r)}},setListener:function(e){l=e},watchEnabled:function(e){if(void 0===e)return t;t=e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":6}],71:[function(e,t,n){(function(r){"use strict";var a="undefined"!=typeof window?window.jQuery:void 0!==r?r.jQuery:null,d="undefined"!=typeof window?window.ko:void 0!==r?r.ko:null,s=e("console-browserify"),i=e("./timed-call.js").timedCall,c=e("toastr");c.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-full-width",target:"#mo-body",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},t.exports=function(e,t,n,o){var l={galleryRecent:d.observableArray([]).extend({paging:16}),galleryRemote:d.observableArray([]).extend({paging:16}),selectedBlock:d.observable(null),selectedItem:d.observable(null),selectedTool:d.observable(0),selectedImageTab:d.observable(0),dragging:d.observable(!1),draggingImage:d.observable(!1),galleryLoaded:d.observable(!1),showPreviewFrame:d.observable(!1),previewMode:d.observable("mobile"),showToolbox:d.observable(!0),showTheme:d.observable(!1),showGallery:d.observable(!1),debug:d.observable(!1),contentListeners:d.observable(0),logoPath:"rs/img/mosaico32.png",logoUrl:".",logoAlt:"mosaico"};return l.content=e,l.blockDefs=t,l.notifier=c,l.tt=function(e,t){if(void 0!==t)for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp("__"+n+"__","g"),t[n]));return e},l.t=l.tt,l.ut=function(e,t){return t},l.templatePath=n,l.remoteUrlProcessor=function(e){return e},l.remoteFileProcessor=function(e){return void 0!==e.url&&(e.url=l.remoteUrlProcessor(e.url)),void 0!==e.thumbnailUrl&&(e.thumbnailUrl=l.remoteUrlProcessor(e.thumbnailUrl)),e},l.loadGallery=function(){l.galleryLoaded("loading");var e=o||"/upload/";a.getJSON(e,function(e){for(var t=0;t<e.files.length;t++)e.files[t]=l.remoteFileProcessor(e.files[t]);l.galleryLoaded(e.files.length),l.galleryRemote(e.files.reverse())}).fail(function(){l.galleryLoaded(!1),l.notifier.error(l.t("Unexpected error listing files"))})},l.fileToImage=function(e,t,n){return e.url},l.removeBlock=function(e,t){d.utils.unwrapObservable(l.selectedBlock)==d.utils.unwrapObservable(e)&&l.selectBlock(null,!0);var n=t.blocks.remove(e);return l.notifier.info(l.t("Block removed: use undo button to restore it...")),n},l.duplicateBlock=function(e,t){var n=d.utils.unwrapObservable(e),o=d.toJS(d.utils.unwrapObservable(t.blocks)[n]);void 0!==o.id&&(o.id=""),t.blocks.splice(n+1,0,o)},l.moveBlock=function(e,t,n){var o=d.utils.unwrapObservable(e),i=d.utils.unwrapObservable(t.blocks);if(n&&0<o||!n&&o<i.length-1){var r=o+(n?-1:1),a=i[r];l.startMultiple(),t.blocks.splice(r,1),t.blocks.splice(o,0,a),l.stopMultiple()}},l.loadDefaultBlocks=function(){var e=d.toJS(l.content().mainBlocks);e.blocks=[];for(var t=d.utils.unwrapObservable(l.blockDefs),n=0;n<t.length;n++){var o=d.toJS(t[n]);o.id="block_"+n,e.blocks.push(o)}i("setMainBlocks",l.content().mainBlocks._wrap.bind(l.content().mainBlocks,e))},l.addImage=function(e){var t=a("#main-wysiwyg-area .selectable-img.selecteditem");return 1==t.length&&"object"==typeof e&&void 0!==e.url&&(d.contextFor(t[0])._src(e.url),!0)},l.addBlock=function(e,t){var n,o,i=l.selectedBlock();if(null!==i)for(var r=l.content().mainBlocks().blocks().length-1;0<=r;r--)if(l.content().mainBlocks().blocks()[r]()==i){n=r;break}void 0!==n?(o=n+1,l.content().mainBlocks().blocks.splice(o,0,e),l.notifier.info(l.t("New block added after the selected one (__pos__)",{pos:o}))):(l.content().mainBlocks().blocks.push(e),o=l.content().mainBlocks().blocks().length-1,l.notifier.info(l.t("New block added at the model bottom (__pos__)",{pos:o})));var a=l.content().mainBlocks().blocks()[o]();return l.selectBlock(a,!0),!1},l.findObjectsOfType=function(e,t){var n=[],o=d.utils.unwrapObservable(e);for(var i in o)if(o.hasOwnProperty(i)){var r=d.utils.unwrapObservable(o[i]);if(i.match(/Blocks$/))for(var a=d.utils.unwrapObservable(r.blocks),l=0;l<a.length;l++){var s=d.utils.unwrapObservable(a[l]);null!==t&&d.utils.unwrapObservable(s.type)!=t||n.push(s)}else"object"==typeof r&&null!==r&&(null!==t&&d.utils.unwrapObservable(r.type)!=t||n.push(r))}return n},l.placeholderHelper={element:function(e){return a(e[0].outerHTML).removeClass("ui-draggable").addClass("sortable-placeholder").css("display","block").css("position","relative").css("width","100%").css("height","auto").css("opacity",".8")[0]},update:function(e,t){}},l.startMultiple=function(){void 0!==l.setUndoModeMerge&&l.setUndoModeMerge()},l.stopMultiple=function(){void 0!==l.setUndoModeOnce&&l.setUndoModeOnce()},l.localGlobalSwitch=function(e,t){return e(null===e()?t():null),!1},l.selectItem=function(e,t,n){var o=d.utils.peekObservable(e);return void 0!==n&&l.selectBlock(n,!1,!0),o!=t&&(e(t),null!==t&&0===l.selectedTool()&&l.selectedTool(1)),!1}.bind(l,l.selectedItem),l.isSelectedItem=function(e){return l.selectedItem()==e},l.selectBlock=function(e,t,n,o){var i=d.utils.peekObservable(e);o||l.selectItem(null),i!=t&&(e(t),l.showGallery(!1),null===t||n||0!==l.selectedTool()||l.selectedTool(1))}.bind(l,l.selectedBlock),l.countSubscriptions=function(e,t){var n=0;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];if(d.isObservable(i)&&(void 0!==i._defaultComputed&&(void 0!==t&&s.log(t+"/"+o+"/_",i._defaultComputed.getSubscriptionsCount()),n+=i._defaultComputed.getSubscriptionsCount()),void 0!==t&&s.log(t+"/"+o+"/-",i.getSubscriptionsCount()),n+=i.getSubscriptionsCount(),i=d.utils.unwrapObservable(i)),"object"==typeof i&&null!==i){var r=l.countSubscriptions(i,void 0!==t?t+"/"+o+"@":void 0);void 0!==t&&s.log(t+"/"+o+"@",r),n+=r}}return n},l.loopSubscriptionsCount=function(){var e=l.countSubscriptions(l.content());r.document.getElementById("subscriptionsCount").innerHTML=e,r.setTimeout(l.loopSubscriptionsCount,1e3)},l.export=function(){return i("exportHTML",l.exportHTML)},l.exportHTML=function(){var e="exportframe";a("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var t=r.document.getElementById(e);d.applyBindings(l,t),d.cleanNode(t),l.inline&&l.inline(t.contentWindow.document);var n=t.contentWindow.document.doctype,o="<!DOCTYPE "+n.name+(n.publicId?' PUBLIC "'+n.publicId+'"':"")+(!n.publicId&&n.systemId?" SYSTEM":"")+(n.systemId?' "'+n.systemId+'"':"")+">\n"+t.contentWindow.document.documentElement.outerHTML;d.removeNode(t);var i=(o=function(e){return e.replace(/<replacedcc[^>]* condition="([^"]*)"[^>]*>([\s\S]*?)<\/replacedcc>/g,function(e,t,n){var o="\x3c!--[if "+t.replace(/&amp;/,"&")+"]>";return o+=n.replace(/(<\/cc>)?<!-- cc:ac:([A-Za-z:]*) -->/g,"</$2>").replace(/><!-- cc:sc -->/g,"/>").replace(/<!-- cc:bo:([A-Za-z:]*) --><cc/g,"<$1").replace(/^.*<!-- cc:start -->/,"").replace(/<!-- cc:end -->.*$/,""),o+="<![endif]--\x3e"})}(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/<script ([^>]* )?type="text\/html"[^>]*>[\s\S]*?<\/script>/gm,"")).replace(/<!-- ko ((?!--).)*? -->/g,"")).replace(/<!-- \/ko -->/g,"")).replace(/ data-bind="[^"]*"/gm,"")).replace(/ data-mce-(href|src|style)="[^"]*"/gm,"")).replace(/ style="[^"]*"([^>]*) replaced(style="[^"]*")/gm,"$1 $2")).replace(/ replaced(style="[^"]*")([^>]*) style="[^"]*"/gm," $1$2")).replace(/ replaced(style="[^"]*")/gm," $1")).replace(/ http-equiv="[^"]*"([^>]*) replaced(http-equiv="[^"]*")/gm,"$1 $2")).replace(/ replaced(http-equiv="[^"]*")([^>]*) http-equiv="[^"]*"/gm," $1$2")).replace(/ replaced(http-equiv="[^"]*")/gm," $1"))).match(/ data-[^ =]+(="[^"]+")? /)||o.match(/ replaced([^= ]*=)/);return i&&s.warn("Output HTML contains unexpected data- attributes or replaced attributes",i),o},l.exportHTMLtoTextarea=function(e){a(e).val(l.exportHTML())},l.exportJSONtoTextarea=function(e){a(e).val(l.exportJSON())},l.importJSONfromTextarea=function(e){l.importJSON(a(e).val())},l.exportMetadata=function(){return d.toJSON(l.metadata)},l.exportJSON=function(){return d.toJSON(l.content)},l.exportJS=function(){return d.toJS(l.content)},l.importJSON=function(e){var t=d.utils.parseJson(e);l.content._wrap(t)},l.exportTheme=function(){var e={},t=l.content().theme(),r=function(e,t,n){for(var o in n)if(n.hasOwnProperty(o)){var i=d.utils.unwrapObservable(n[o]);null!==i&&"object"==typeof i?r(o+".",t,i):t[e+o]=i}};r("",e,t);var n="";for(var o in e)e.hasOwnProperty(o)&&"type"!=o&&(n+=o+": "+e[o]+";\n");return n},l.loadImage=function(e){l.galleryRecent.unshift(e),l.selectedImageTab(0)},l.selectImage=function(e){l.showGallery(!0)},l.dialog=function(e,t){a(e).dialog(t)},l.log=function(e,t){},l.selectedImageTab.subscribe(function(e){1==e&&!1===l.galleryLoaded()&&l.loadGallery()},l,"change"),l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./timed-call.js":67,"console-browserify":6,toastr:25}]},{},[28,1])(28)});
//# sourceMappingURL=mosaico.min.js.map